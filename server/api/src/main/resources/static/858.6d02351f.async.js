(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[858],{90858:function(N,v,n){"use strict";n.r(v);var F=n(71194),g=n(50146),z=n(54421),f=n(38272),$=n(49111),P=n(19650),G=n(57663),o=n(71577),k=n(12968),D=n(62462),j=n(83279),r=n(94657),y=n(3980),x=n(21444),I=n(38296),U=n(54549),A=n(94184),T=n.n(A),l=n(67294),p=n(5058),W=n.n(p),e=n(85893);function d(O){return O.match(/.(jpg|jpeg|png|gif)$/i)}var B=function(K){var u=K.value,L=(0,l.useState)(),M=(0,r.Z)(L,2),t=M[0],R=M[1];(0,l.useEffect)(function(){if(u){var _=Object.values(u).reduce(function(i,c){return i.push.apply(i,(0,j.Z)(c)),i},[]);y.hi.loadFiles({ids:_}).then(function(i){R(i)})}},[u]);var Z=(0,l.useState)(),C=(0,r.Z)(Z,2),s=C[0],E=C[1],S=(0,l.useState)(!1),m=(0,r.Z)(S,2),a=m[0],h=m[1];return(0,e.jsxs)("div",{className:"preview",children:[(0,e.jsx)("div",{style:{flexDirection:"row",flexWrap:"wrap",display:"flex"},children:(0,e.jsx)(D.Z.PreviewGroup,{children:t==null?void 0:t.filter(function(_){return d(_.originalName)}).map(function(_){return(0,e.jsx)(D.Z,{width:185,src:"/api/file?id=".concat(_.id),alt:_.originalName,height:140},_.id)})})}),(t==null?void 0:t.filter(function(_){return!d(_.originalName)}).length)>0&&(0,e.jsx)(f.ZP,{size:"small",bordered:!0,dataSource:t==null?void 0:t.filter(function(_){return!d(_.originalName)}),renderItem:function(i){return(0,e.jsx)(f.ZP.Item,{children:(0,e.jsxs)(P.Z,{children:[(0,e.jsx)("a",{onClick:function(){return window.open("/api/file?id=".concat(i.id))},children:i.originalName}),(0,e.jsx)(o.Z,{type:"link",size:"small",onClick:function(){return E(i)},children:"\u9884\u89C8"})]})},i.id)}}),s&&(0,e.jsx)(g.Z,{open:!0,footer:!1,title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("span",{children:["`\u9884\u89C8 $",s==null?void 0:s.originalName]}),(0,e.jsxs)(P.Z,{children:[(0,e.jsx)(o.Z,{type:"text",icon:a?(0,e.jsx)(x.Z,{}):(0,e.jsx)(I.Z,{}),onClick:function(){h(!a)}}),(0,e.jsx)(o.Z,{onClick:function(){return E(void 0)},type:"text",icon:(0,e.jsx)(U.Z,{})})]})]}),width:1e3,onCancel:function(){return E(void 0)},bodyStyle:{height:a?"calc(100vh - 100px)":600},className:T()("upload-preview",{"full-screen":a}),closable:!1,children:(0,e.jsx)(W(),{fileType:s==null?void 0:s.originalName.split(".").pop(),filePath:"/api/file?id=".concat(s==null?void 0:s.id),errorComponent:(0,e.jsx)("div",{children:s==null?void 0:s.originalName}),onError:function(){}})})]})};v.default=B}}]);
