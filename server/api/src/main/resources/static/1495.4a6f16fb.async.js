(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[1495],{92801:function(){},76898:function(je,le,f){"use strict";f.d(le,{Ff:function(){return He},rF:function(){return Z},M2:function(){return ae}});var z=f(22385),Y=f(94199),w=f(11849),U=f(93224),B=f(54707),I=f(49914),S=f(9761),se=f(94184),e=f.n(se),de=f(94657),ie=f(78338),ne=f(67294),R=f(85893);function Ne(F){if(F=Number(F),F<=0)return"0:0:0";var J=Math.floor(F/3600),H=Math.floor(F%3600/60),X=Math.floor(F%3600%60),W="".concat(J).padStart(2,"0"),$="".concat(H).padStart(2,"0"),te="".concat(X).padStart(2,"0");return"".concat(W,":").concat($,":").concat(te)}function _(F){return F<=60?"#ff4d4f":F<=180?"#faad14":"#52c41a"}var ge=(0,S.Pi)(function(){var F,J,H=(0,I.H)(),X=(0,B.Rk)(),W=H.startTime,$=((F=H.project)===null||F===void 0||(J=F.setting.examSetting)===null||J===void 0?void 0:J.maxSubmitMinutes)||0,te=(0,ne.useState)(0),he=(0,de.Z)(te,2),oe=he[0],ue=he[1],xe=W+$*60*1e3,ce=(0,ne.useRef)();return(0,ne.useEffect)(function(){if($!==0)return ce.current=window.setInterval(function(){ue((xe-new Date().getTime())/1e3)},1e3),function(){clearInterval(ce.current)}},[xe]),(0,ne.useEffect)(function(){oe<0&&(X.submit(),clearInterval(ce.current))},[oe]),$===0?(0,R.jsx)(R.Fragment,{}):(0,R.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,R.jsx)(ie.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,R.jsx)("span",{style:{marginLeft:3,color:_(oe)},children:Ne(oe)})]})}),ke=["size","marked"],ae=(0,S.Pi)(function(F){var J=(0,B.Rk)(),H=J.props.answerSheetVisible,X=F.size,W=F.marked,$=W===void 0?!0:W,te=(0,U.Z)(F,ke);return H?(0,R.jsx)(Y.Z,{title:"\u6807\u8BB0",children:(0,R.jsx)("svg",(0,w.Z)((0,w.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:F.size||24,height:F.size||24,className:"marked"},te),{},{children:(0,R.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:$?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,R.jsx)(R.Fragment,{})}),Z=(0,S.Pi)(function(F){var J,H,X,W=F.id,$=F.name,te=(0,B.Rk)(),he=te.answerSheet,oe=he.find(function(Ce){return Ce.id===W}),ue=(0,I.H)(),xe=ue==null||(J=ue.project)===null||J===void 0?void 0:J.isAuthenticated,ce=(H=ue.project)===null||H===void 0||(X=H.setting.examSetting)===null||X===void 0?void 0:X.randomSurveyWrong,we=te.exerciseMode;return(!we||!xe||W.length<=10)&&!ce?(0,R.jsx)(R.Fragment,{}):oe!=null&&oe.favorite?(0,R.jsx)(Y.Z,{title:ce?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,R.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){te.favoriteQuestion({templateId:W,name:$},!1)},children:(0,R.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,R.jsx)(Y.Z,{title:ce?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,R.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){te.favoriteQuestion({templateId:W,name:$})},children:(0,R.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),Oe=(0,S.Pi)(function(F){var J=(0,B.Rk)(),H=F.finished,X=F.id,W=F.marked,$=F.seqNo;return(0,R.jsxs)("div",{className:e()("answer-sheet-item",{marked:W,finished:H}),onClick:function(){return J.changePageIndex(X)},children:[$,W&&(0,R.jsx)(ae,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),Ie=(0,S.Pi)(function(){var F=(0,B.Rk)(),J=F.answerSheet;return(0,R.jsx)(R.Fragment,{children:J.filter(function(H){return H.display!=="none"}).map(function(H,X){return(0,ne.createElement)(Oe,(0,w.Z)((0,w.Z)({},H),{},{seqNo:X+1,key:H.id}))})})}),ze=(0,S.Pi)(function(){var F=(0,B.Rk)(),J=F.answerSheet,H=J.filter(function($){return $.finished}).length,X=J.filter(function($){return!$.finished}).length,W=J.filter(function($){return $.marked}).length;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,R.jsx)("span",{style:{marginLeft:4},children:H})]}),(0,R.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,R.jsx)("span",{style:{marginLeft:4},children:X})]}),(0,R.jsxs)("div",{className:"marked",children:[(0,R.jsx)(ae,{size:18}),"\u6807\u8BB0",(0,R.jsx)("span",{style:{marginLeft:4},children:W})]})]})}),Se=(0,S.Pi)(function(){return(0,R.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,R.jsx)(ge,{})]})}),He=(0,S.Pi)(function(){var F=(0,B.Rk)(),J=F.props.answerSheetVisible;return J?(0,R.jsxs)("div",{className:"answer-sheet",children:[(0,R.jsx)(Se,{}),(0,R.jsx)("div",{className:"answer-sheet-content",children:(0,R.jsx)(Ie,{})}),(0,R.jsx)("div",{className:"answer-sheet-footer",children:(0,R.jsx)(ze,{})})]}):(0,R.jsx)(R.Fragment,{})})},94905:function(je,le,f){"use strict";f.r(le),f.d(le,{default:function(){return Fa}});var z=f(94657),Y=f(40807),w=f(78210),U=f(9761),B=f(67294),I=f(54707),S=f(48187),se=f(73057),e=f(85893),de=function(){var n=(0,I.AK)(),l=(0,B.useContext)(Y.ZX),d=l.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(se.hl,{html:d.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(se.hl,{html:d.description})})]})},ie=function(n){var l=(0,I.AK)();return(0,e.jsx)("div",{className:l+"-body",children:n.children})},ne=f(77576),R=f(12028),Ne=f(57663),_=f(71577),ge=(0,U.Pi)(function(){var a,n,l=(0,I.AK)("-footer"),d=(0,B.useContext)(Y.ZX),t=d.schema,x=d.loading,m=(0,I.Rk)(),c=m.pagination,o=c.current,v=c.pageSize,i=v>1,r=o===1,s=o===v;return(0,e.jsxs)("div",{className:l,children:[s&&(0,e.jsx)("div",{className:l+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(se.hl,{html:t==null||(a=t.attribute)===null||a===void 0?void 0:a.suffix})}),(0,e.jsxs)("div",{className:l+"-pagination",children:[i&&!r&&(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{type:"primary",block:!0,onClick:function(){return m.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!s&&(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{type:"primary",block:!0,onClick:function(){return m.handleNext()},children:"\u4E0B\u4E00\u9875"})}),s&&(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{type:"primary",block:!0,onClick:function(){return m.submit()},loading:x,children:(0,e.jsx)(se.hl,{html:((n=t.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:l+"-pagination-info",children:["\u7B2C",o,"\u9875/\u5171",v,"\u9875"]}),m.autoNextPage>0&&(0,e.jsxs)("div",{style:{color:"#999",display:"flex",alignItems:"center",justifyContent:"center",width:200},children:["\u7B54\u5BF9\u81EA\u52A8\u8DF3\u8F6C\u4E0B\u4E00\u9875",(0,e.jsx)(R.Z,{style:{marginLeft:5},checked:m.autoNextPage===1,onChange:function(g){g?m.autoNextPage=1:m.autoNextPage=2}})]})]})]})}),ke=f(47673),ae=f(4107),Z=f(11849),Oe=f(77883),Ie=f(85986),ze=f(14965),Se=f(68318),He=f(39002),F=f(68351),J=f(43358),H=f(66074),X=f(29985),W=f(46842),$=f(64302),te=f(27484),he=f.n(te),oe=f(33852);he().locale("zh-cn");function ue(a,n){if(!!a)return he()(a,n)}var xe=function(n){var l=n.dictCode,d=n.value,t=n.onChange,x=n.style,m=n.bordered,c=n.className,o=n.parentValue,v=n.cascaderLevel,i=v===void 0?1:v,r=(0,I.Al)(),s=(0,B.useState)([]),u=(0,z.Z)(s,2),g=u[0],h=u[1],j=(0,I.zE)(function(A){i&&i>1&&!o||r.onDictSearch&&r.onDictSearch({dictCode:l,searchValue:A,parentValue:o==null?void 0:o.split("|")[0],cascaderLevel:i}).then(function(C){h(C||[])})},2);return(0,B.useEffect)(function(){i&&i>1&&(o?j(void 0):h([]))},[o,i]),(0,B.useEffect)(function(){!d&&i<=1&&l&&j(void 0),d&&g.length===0&&j(d)},[d]),(0,e.jsx)(H.Z,{options:g,showSearch:!0,filterOption:function(C,E){var y;return((y=E==null?void 0:E.label)!==null&&y!==void 0?y:"").includes(C)},value:d==null?void 0:d.split("|")[0],onChange:function(C){if(C===void 0)t(void 0);else{var E;t("".concat(C,"|").concat((E=g.find(function(y){return y.value===C}))===null||E===void 0?void 0:E.label))}},style:x,bordered:m,dropdownClassName:c,allowClear:!0})};function ce(a,n){return n||(a==="date"?"YYYY-MM-DD":a==="dateTime"?"YYYY-MM-DD HH:mm:ss":a==="time"?"HH:mm:ss":"YYYY-MM-DD")}function we(a){return a?a==="YYYY"?"year":a==="YYYY-MM"?"month":"date":"date"}var Ce=function(n){var l=n.onChange,d=n.type,t=n.value,x=n.style,m=x===void 0?{width:"100%"}:x,c=n.className,o=n.readOnly,v=n.bordered,i=ce(d,n.dateTimeFormat);return i.startsWith("HH")?(0,e.jsx)(F.Z,{value:ue(t,i),format:i,onChange:function(s,u){return l(u)},style:m,className:c,disabled:o,bordered:v}):(0,e.jsx)(Se.Z,{onChange:function(s,u){l(u)},disabled:o,format:i,picker:we(i),showTime:i.includes("HH")||i.includes("mm")||i.includes("ss"),showSecond:i.includes("ss"),showMinute:i.includes("mm"),showHour:i.includes("HH"),value:ue(t,i),style:m,className:c,bordered:v})},ve=function(n){var l,d=n.onChange,t=n.type,x=n.value,m=n.suffix,c=n.style,o=c===void 0?{width:"100%"}:c,v=n.className,i=n.dictCode,r=n.onBlur,s=r===void 0?function(){}:r,u=n.bordered,g=n.parentValue,h=n.cascaderLevel,j=n.icon,A=j===void 0?!0:j,C=n.readOnly,E=C===void 0?!1:C,y=n.schema,Q=n.placeholder,p=Q===void 0?y==null||(l=y.attribute)===null||l===void 0?void 0:l.placeholder:Q;return t==="horzBlank"?(0,e.jsx)(e.Fragment,{}):t==="selectDict"&&i?(0,e.jsx)(xe,{value:x,onChange:d,dictCode:i,style:o,bordered:u,className:v,parentValue:g,cascaderLevel:h}):t==="select"&&y!==null&&y!==void 0&&y.dataSource?(0,e.jsx)(H.Z,{options:y.dataSource,style:{width:200},bordered:u,onChange:d,placeholder:p}):t==="number"?(0,e.jsx)(Ie.Z,{className:v,onChange:d,onBlur:function(b){var M=b.target.value;s(M===""?void 0:parseFloat(M))},value:x,style:o,addonAfter:m,readOnly:E,bordered:u,placeholder:p}):t==="date"||t==="dateTime"||t==="time"?(0,e.jsx)(Ce,(0,Z.Z)({},n)):t==="mobile"?(0,e.jsx)(ae.Z,{prefix:A?(0,e.jsx)(X.Z,{}):void 0,onChange:function(b){return d(b.target.value)},value:x,className:v,onBlur:function(b){return s(b.target.value)},bordered:u,readOnly:E,placeholder:p}):t==="idCard"?(0,e.jsx)(ae.Z,{prefix:A?(0,e.jsx)(W.Z,{}):void 0,onChange:function(b){return d(b.target.value)},value:x,style:o,className:v,onBlur:function(b){return s(b.target.value)},bordered:u,readOnly:E,placeholder:p}):t==="email"?(0,e.jsx)(ae.Z,{prefix:A?(0,e.jsx)($.Z,{}):void 0,onChange:function(b){return d(b.target.value)},onBlur:function(b){return s(b.target.value)},value:x,style:o,className:v,bordered:u,readOnly:E,placeholder:p}):t==="password"?(0,e.jsx)(ae.Z.Password,{onChange:function(b){return d(b.target.value)},onBlur:function(b){return s(b.target.value)},value:x,suffix:m,style:o,className:v,bordered:u,readOnly:E,placeholder:p||"\u8BF7\u8F93\u5165\u5BC6\u7801"}):(0,e.jsx)(ae.Z,{onChange:function(b){return d(b.target.value)},onBlur:function(b){return s(b.target.value)},value:x,suffix:m,style:o,className:v,bordered:u,readOnly:E,placeholder:p})},Da=f(49111),Re=f(19650),rn=f(17672),ln=function(n){var l=n.onChange,d=(0,B.useRef)(null),t=(0,B.useRef)(),x=(0,B.useRef)(),m=(0,B.useState)(0),c=(0,z.Z)(m,2),o=c[0],v=c[1];return(0,B.useEffect)(function(){var i=d.current;if(i){var r,s=new rn.Z(d.current);s.addEventListener("beginStroke",function(){v(1)}),t.current=s;var u=Math.max(window.devicePixelRatio||1,1);i.width=i.offsetWidth*u,i.height=i.offsetHeight*u,(r=i.getContext("2d"))===null||r===void 0||r.scale(u,u)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:x.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:d,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:o!==2?"block":"none"}}),o===2&&(0,e.jsx)("img",{src:x.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(Re.Z,{children:[o===1&&(0,e.jsx)(_.Z,{type:"link",onClick:function(){var r;(r=t.current)===null||r===void 0||r.clear(),v(0)},children:"\u6E05\u7A7A"}),(o===0||o===1)&&(0,e.jsx)(_.Z,{type:"primary",disabled:o!==1,ghost:!0,size:"small",onClick:function(){var r;l(t.current.toDataURL()),x.current=(r=t.current)===null||r===void 0?void 0:r.toDataURL(),v(2)},children:"\u5B8C\u6210"}),o===2&&(0,e.jsx)(_.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var r;v(0),(r=t.current)===null||r===void 0||r.clear()},children:"\u91CD\u7B7E"})]})})]})]})},sn=f(3024),dn=(0,U.Pi)(function(){var a=(0,B.useContext)(Y.ZX),n=a.progressBar,l=(0,I.AK)(),d=(0,I.Rk)(),t=d.progress;return n?(0,e.jsx)(sn.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:l+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(t*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),Le=function(n){var l,d=n.optionId,t=n.questionId,x=n.checked,m=n.checkedCount,c=n.quota,o=n.statEnabled,v=(0,I.Al)(),i=v.statistics,r=i==null?void 0:i.questionStatistics[t],s=((r==null?void 0:r.optionStatistics.reduce(function(j,A){return j+A.count},0))||0)+m,u=(r==null||(l=r.optionStatistics.find(function(j){return j.optionId===d}))===null||l===void 0?void 0:l.count)||0,g=x?u+1:u,h="".concat(Math.floor(g/s*1e3)/10,"%");return!o&&c===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[c&&(0,e.jsxs)("span",{className:"vote-info-cnt",style:{color:c-u>0?"#1890ff":"#949aae"},children:["(\u4F59",c-u,")"]}),o&&m>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[g,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:h}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:h}})})]})]})},Me=function(n){var l=n.schema,d=n.type,t=l.attribute,x=t===void 0?{}:t,m=x.examCorrectAnswer,c=(0,I.Al)(),o=c.correctAnswerVisible,v=c.mode;return m&&o&&v==="exam"?d==="FillBlank"||d==="HorzBlank"||d==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:m}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Ta=function(n){var l=n.schema,d=l.attribute,t=d===void 0?{}:d,x=t.examScore,m=useSurvey(),c=m.mode,o=m.examScoreVisible;return x&&c==="exam"&&o?_jsxs("span",{className:"question-score",children:["\uFF08",x,"\u5206\uFF09"]}):_jsx(_Fragment,{})},on=(0,U.Pi)(function(a){var n=(0,I.Rk)(),l=n.reviewAnswer[a.qId];return l&&!l.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){l.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),ka=f(63185),ye=f(9676),un=f(36862),cn=f(46533),vn=f(94184),Ae=f.n(vn),Oa=f(12968),hn=f(62462),fn=f(91220),Ke=f(15020);function Ue(a,n,l,d){if(!a)return"";var t=RegExp("_{3,}","g"),x=a.matchAll(t),m=[],c=(0,fn.Z)(x),o;try{for(c.s();!(o=c.n()).done;){var v=o.value,i=v.index,r=v.index+v[0].length;m.push([i,r])}}catch(h){c.e(h)}finally{c.f()}if(m.length===0)return a;for(var s=m[0][0]===0?"":a.substring(0,m[0][0]),u=function(j){var A,C,E=m[j],y=m[j+1],Q=a.substring(E[0],E[1]),p=a.substring(E[1],y?y[0]:a.length),N=n[j],b=l?l[N.id]:"";if(((A=N.attribute)===null||A===void 0?void 0:A.dataType)==="select"){var M,D;b=(M=N.dataSource)===null||M===void 0||(D=M.find(function(k){return k.value===b}))===null||D===void 0?void 0:D.label}else if(((C=N.attribute)===null||C===void 0?void 0:C.dataType)==="selectDict"){var P,T;b=(P=b)===null||P===void 0||(T=P.split("|"))===null||T===void 0?void 0:T[1]}s+='<input data-id="'.concat(n[j].id,`" value='`).concat(b||"",`'  class="horz-blank" style="width:`).concat(12*Q.length,'px">'),s+=p},g=0;g<m.length;g++)u(g);return s}var Be=(0,U.Pi)(function(a){var n=a.content,l=a.children,d=a.value,t=d===void 0?{}:d,x=a.onChange,m=a.onBlur,c=a.schema,o=(0,I.Rk)(),v=o.reviewAnswer[c.id];function i(r,s){var u,g;if(t[r]!==s){t[r]=s;var h=l.find(function(E){return E.id===r}),j=h==null||(u=h.attribute)===null||u===void 0?void 0:u.cascaderLevel,A=h==null||(g=h.attribute)===null||g===void 0?void 0:g.dictCode;A&&j&&l.filter(function(E){var y;return((y=E.attribute)===null||y===void 0?void 0:y.dictCode)===A&&E.attribute.cascaderLevel&&E.attribute.cascaderLevel>j}).forEach(function(E){delete t[E.id]}),(s===""||s===void 0)&&delete t[r];var C=(0,Z.Z)({},t);if(Object.keys(C).length!==0)return C}}return(0,e.jsx)("div",{className:"pe-view",onClick:function(s){s.preventDefault(),s.stopPropagation()},children:(0,Ke.ZP)(Ue(n,l),{replace:function(s){if((s==null?void 0:s.name)==="img"){var u=s.attribs.width;return(0,e.jsx)(hn.Z,{width:u?parseFloat(u):void 0,src:s.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}var g=s.attribs;if(!!g){var h=g["data-id"];if(h){var j,A,C,E,y,Q=(0,Ke.e_)(g),p=l.findIndex(function(L){return L.id===h}),N=l[p],b=(j=l[p-1])===null||j===void 0?void 0:j.id,M=t[b],D=(N==null||(A=N.attribute)===null||A===void 0?void 0:A.dataType)||"text",P=N==null||(C=N.attribute)===null||C===void 0?void 0:C.dictCode,T=N==null||(E=N.attribute)===null||E===void 0?void 0:E.dateTimeFormat,k=(y=N.attribute)===null||y===void 0?void 0:y.cascaderLevel,O=v==null?void 0:v[h].isCorrect,G=Ae()(Q.className,{selected:v&&v.visible,"is-correct":v&&v.visible&&O});return(0,e.jsx)(ve,(0,Z.Z)((0,Z.Z)({type:D,value:t[h],parentValue:M,schema:N,cascaderLevel:k,onChange:function(K){return x(i(h,K))},onBlur:function(K){return m(i(h,K))},dictCode:P,dateTimeFormat:T,bordered:!1,icon:!1},Q),{},{className:G}))}}}})})}),mn=(0,U.Pi)(function(a){var n=a.qId,l=a.schema,d=a.checked,t=a.onChange,x=a.value,m=a.onBlur,c=a.disabled,o=l.id,v=l.title,i=l.attribute,r=i===void 0?{}:i,s=(0,I.Rk)(),u=s.reviewAnswer[n],g=u==null?void 0:u[o].selected,h=u==null?void 0:u[o].isCorrect,j=r.dataType;return u&&u.visible&&(g||h)?(0,e.jsxs)("label",{className:Ae()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:g,"is-correct":h}),onClick:function(){return t(!d)},children:[(0,e.jsxs)("span",{children:[!h&&(0,e.jsx)(un.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),h&&(0,e.jsx)(cn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(w.Z,{html:v})})]}):(0,e.jsxs)(ye.Z,{value:o,checked:d,onChange:function(C){return t(C.target.checked)},disabled:c,children:[j==="horzBlank"&&l.children?(0,e.jsx)(Be,{content:v,children:l.children,value:x,schema:l,onBlur:m,onChange:function(C){return t(!0,C)}}):(0,e.jsx)(w.Z,{html:v}),(0,e.jsx)(Me,{schema:a.schema})]})}),za=f(88983),Ze=f(66253),Je=f(43061),Ye=f(38819),gn=f(91508),xn=(0,U.Pi)(function(a){var n=a.qId,l=a.schema,d=a.onBlur,t=a.onChange,x=a.value,m=a.disabled,c=l.id,o=l.title,v=l.attribute,i=(0,I.Rk)(),r=i.reviewAnswer[n],s=r==null?void 0:r[c].selected,u=r==null?void 0:r[c].isCorrect,g=B.useContext(gn.ZP),h=v==null?void 0:v.dataType;return r&&r.visible&&(s||u)?(0,e.jsxs)("label",{className:Ae()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:s,"is-correct":u}),onClick:function(){var A;m||g==null||(A=g.onChange)===null||A===void 0||A.call(g,{target:{value:c}})},children:[(0,e.jsxs)("span",{children:[!u&&(0,e.jsx)(Je.Z,{style:{color:"#ff6d56",marginRight:10}}),u&&(0,e.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(w.Z,{html:o})})]}):(0,e.jsxs)(Ze.ZP,{value:c,className:"radio-item",disabled:m,children:[h==="horzBlank"&&l.children?(0,e.jsx)(Be,{schema:l,content:o,children:l.children,value:typeof x=="boolean"?{}:x,onBlur:d,onChange:t}):(0,e.jsx)(w.Z,{html:o}),(0,e.jsx)(Me,{schema:a.schema})]})}),An=(0,U.Pi)(function(a){var n=a.schema,l=a.value,d=a.onChange,t=a.qId,x=a.onBlur,m=(0,I.AK)("-body-question"),c=n.id,o=n.attribute,v=o==null?void 0:o.suffix,i=o==null?void 0:o.dataType,r=o==null?void 0:o.dictCode,s=o==null?void 0:o.dateTimeFormat,u=o==null?void 0:o.readOnly,g=(0,I.Rk)(),h=g.reviewAnswer[t],j=h==null?void 0:h[c].isCorrect;return h&&h.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!j&&(0,e.jsx)(Je.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),j&&(0,e.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(ve,{type:i,value:l[c],readOnly:u,schema:n,className:Ae()("selected",{"is-correct":j}),onChange:function(C){return d(C)},onBlur:x,style:{paddingLeft:20},suffix:v&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(w.Z,{html:v})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ve,{type:i,value:l[c],onChange:function(C){return d(C)},onBlur:x,schema:n,readOnly:u,dictCode:r,dateTimeFormat:s,suffix:v&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(w.Z,{html:v})})})})}),Ha=f(65011),La=f(48736),Ka=f(402),jn=f(20294),Cn=H.Z.Option,be=jn.Z.Text,Ua=function(n){var l=n.onChange,d=n.form,t=n.record,x=useState(n.value),m=_slicedToArray(x,2),c=m[0],o=m[1],v=useState(n.value),i=_slicedToArray(v,2),r=i[0],s=i[1];useEffect(function(){s(n.value)},[n.value]);var u=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),g=_slicedToArray(u,2),h=g[0],j=g[1],A=useThrottleCallback(function(C){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:r,dropdownMatchSelectWidth:!1,onBlur:function(){s(c),c?l==null||l(c):l==null||l(void 0)},onSelect:function(E){o(E),s(E)},allowClear:!0,onClear:function(){o(void 0),s(void 0),l==null||l(void 0)},onSearch:function(E){s(E),A(E)},dropdownRender:function(E){return _jsxs(_Fragment,{children:[E,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(be,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(be,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:h.map(function(C){return _jsxs(Cn,{value:C.drugName,children:[_jsxs(be,{children:[" ",C.drugName]}),_jsxs(be,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",C.chemicalName,"-",C.stCompName,")"]})]},C.id)})})},En=(0,U.Pi)(function(a){var n,l=a.schema,d=a.title,t=a.onBlur,x=a.onChange,m=l.type,c=((n=l.children)===null||n===void 0?void 0:n.filter(function(i){var r;return(r=i.attribute)===null||r===void 0?void 0:r.fieldInTitle}))||[],o=(0,U.U$)(),v=o.value;return m!=="HorzBlank"||c.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(w.Z,{html:d})}):(0,e.jsx)(Be,{schema:l,children:c,content:d,onChange:x,onBlur:t,value:v})}),yn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),Bn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),Zn=(0,U.Pi)(function(a){var n,l=a.schema,d=a.seqNo,t=d===void 0?0:d,x=(0,I.Rk)(),m=x.props.correctAnswerVisible,c=x.props.questionScore,o=(n=l.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!m||!c||o==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",t,"\u9898"]}),c[l.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",c[l.id],"\u5206"]}),Bn]}):yn]})}),Ja=f(71194),bn=f(50146);function $e(a){return a?a.substring(0,a.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var pn=function(n){var l=n.onChange,d=n.value,t=n.mapMove,x=t===void 0?!1:t,m=n.optionId,c=(0,B.useRef)(null),o=(0,B.useRef)(),v=(0,B.useRef)(),i=(0,B.useRef)(),r=(0,B.useState)(function(){if(!!d){var b=d.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(b&&b.length>2)return[parseFloat(b[1]),parseFloat(b[2])]}}),s=(0,z.Z)(r,2),u=s[0],g=s[1],h=(0,B.useState)(function(){return $e(d)}),j=(0,z.Z)(h,2),A=j[0],C=j[1],E=(0,B.useState)(!1),y=(0,z.Z)(E,2),Q=y[0],p=y[1],N=(0,B.useCallback)(function(b){v.current.getLocation(b,function(M,D){if(M==="complete"&&D.geocodes.length){var P=D.geocodes[0].location;i.current.start(P)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,B.useEffect)(function(){if(!!Q){window["localMap".concat(m)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(T){var k=new AMap.Map("map-".concat(m),{zoom:16,center:u,dragEnable:x,zoomEnable:x});if(o.current=k,x){var O=new T({mode:"dragMarker",map:k});O.on("success",function(K){C(K.address),g([K.position.lng,K.position.lat])}),u?O.start(u):O.start(),k.panBy(0,1),i.current=O}var G=new AMap.Geocoder({city:"010"});v.current=G;var L=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});L.getCurrentPosition(function(K,q){K=="complete"?(k.setCenter(q.position),C(q.formattedAddress),g([q.position.lng,q.position.lat])):console.error(q)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var b="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(m,"&plugin=AMap.Geocoder,AMap.Geolocation"),M=document.createElement("script");M.src=b,document.head.appendChild(M);var D="https://webapi.amap.com/ui/1.1/main-async.js",P=document.createElement("script");P.src=D,document.head.appendChild(P)}},[Q]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(ae.Z.TextArea,{readOnly:!0,value:$e(d),onClick:function(){return p(!0)}}),(0,e.jsxs)(bn.Z,{open:Q,onCancel:function(){p(!1)},onOk:function(){u&&l("".concat(A,"[").concat(u[0],", ").concat(u[1],"]")),p(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:x&&(0,e.jsx)(ae.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(M){return N(M)}})}),(0,e.jsx)("div",{ref:c,id:"map-".concat(m),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:A})]})]})},Qn=(0,U.Pi)(function(a){var n,l,d=a.qId,t=a.schema,x=(0,I.Rk)(),m=x.reviewAnswer[d],c=(n=t.children)===null||n===void 0?void 0:n.map(function(r){var s;return(s=r.attribute)===null||s===void 0?void 0:s.examCorrectAnswer}).filter(function(r){return r}).join(";"),o=c&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(t.type),v=function(){return o?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:c})]}):(0,e.jsx)(e.Fragment,{})},i=function(){var s;if((s=t.attribute)!==null&&s!==void 0&&s.examAnalysis){var u;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(w.Z,{html:(u=t.attribute)===null||u===void 0?void 0:u.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return m&&m.visible&&((l=t.attribute)!==null&&l!==void 0&&l.examAnalysis||o)?(0,e.jsxs)("div",{className:"answer-analysis",children:[v(),i()]}):(0,e.jsx)(e.Fragment,{})}),Pe=f(76898);function Nn(a){var n=a.schema,l=a.required,d=a.error,t=a.replaceTitle,x=a.seqNo,m=a.onBlur,c=a.onChange,o=a.onFocus,v=(0,B.useContext)(Y.ZX),i=v.questionNumber,r=v.requiredVisible,s=(0,I.AK)("-body-question"),u=(0,B.useState)(),g=(0,z.Z)(u,2),h=g[0],j=g[1],A=n.description,C=(0,I.Rk)(),E=C.answerSheet.find(function(p){return p.id===n.id}),y=E==null?void 0:E.marked;(0,B.useEffect)(function(){if(h){var p,N;(p=document.querySelector("[data-id='".concat(n.id,"']")))===null||p===void 0||p.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(n.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(O){O.classList.remove("ant-form-item-has-error")})}if(d.length>0){var b,M=d[0].split("^"),D=(0,z.Z)(M,2),P=D[0],T=D[1],k;T?(k=document.querySelector("[data-id='".concat(P,"']")),j(T)):(k=document.querySelector("[data-id='".concat(n.id,"']")),j(P)),(b=k)===null||b===void 0||b.classList.add("ant-form-item-has-error")}else h&&j(void 0)},[d]);var Q=function(){return h?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:h})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:s,children:[(0,e.jsx)("div",{className:"".concat(s,"-head"),children:(0,e.jsxs)("span",{className:s+"-header",children:[(0,e.jsx)(Zn,{schema:n,seqNo:x}),(0,e.jsxs)("h2",{className:s+"-header-title",children:[i&&(0,e.jsx)("span",{className:s+"-header-title-seq",children:(0,e.jsx)("b",{children:i&&x?x:""})}),l&&r&&(0,e.jsx)("span",{className:s+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:s+"-header-title-text",children:(0,e.jsx)(En,{schema:n,title:t||n.title,onBlur:m,onChange:c,onFocus:o})}),Q(),x&&(0,e.jsx)(Pe.M2,{marked:y,onClick:function(){C.markQuestion(n.id,!y)}}),(0,e.jsx)(Pe.rF,{id:n.id,name:n.title})]}),A&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(w.Z,{html:A})})]})}),(0,e.jsxs)("div",{className:"".concat(s,"-body"),children:[a.children,(0,e.jsx)(on,{qId:n.id}),(0,e.jsx)(Qn,{qId:n.id,schema:n})]})]})}(0,S.eC)("Question",(0,U.Pi)(Nn),"antd");function In(a){var n=a.schema,l=a.index,d=a.seqNo,t=(0,I.AK)("-body-questionSet"),x=(0,B.useContext)(Y.ZX),m=x.questionNumber;return(0,e.jsxs)("div",{className:t,children:[(0,e.jsxs)("div",{className:t+"-title",children:[m&&(0,e.jsx)("span",{className:t+"-title-seq",children:(0,e.jsx)("b",{children:m?d:""})}),(0,e.jsx)(w.Z,{html:n.title})]}),a.children,(0,e.jsx)("div",{className:t+"-splitLine"})]})}(0,S.eC)("QuestionSet",In,"antd");var Ya=f(84305),Sn=f(88182),wn=f(82925);he().locale("zh-cn");function Rn(a){var n=a.headerVisible,l=a.footerVisible,d=a.schema,t=(0,I.AK)(),x=(0,I.Al)(),m=function(){var o,v=(o=d.attribute)===null||o===void 0?void 0:o.headerImage;if(v)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(v),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Ae()(t,{preview:x.isPreview}),children:[(0,e.jsx)(dn,{}),(0,e.jsx)("div",{className:t+"-banner",children:m()}),n&&(0,e.jsx)(de,{}),(0,e.jsx)(Sn.ZP,{locale:wn.Z,children:(0,e.jsx)(ie,{children:a.children})}),l&&(0,e.jsx)(ge,{}),(0,e.jsx)(Pe.Ff,{})]})}(0,S.eC)("Survey",Rn,"antd");var $a=f(13062),re=f(71230),Wa=f(89032),ee=f(15746),V=f(32059);function Mn(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children;function m(c,o){l((0,V.Z)({},o,c))}return(0,e.jsx)("div",{children:x==null?void 0:x.map(function(c){var o=c.id,v=c.title,i=c.attribute,r=i===void 0?{}:i,s=r.mapMove;return(0,e.jsxs)(re.Z,{gutter:[10,0],"data-id":o,children:[v&&(0,e.jsx)(ee.Z,{span:24},c.id),(0,e.jsx)(ee.Z,{span:24,children:(0,e.jsx)(pn,{optionId:o,onChange:function(g){return m(g,o)},value:t[o],mapMove:s})})]},o)})})}(0,S.RM)("Address",Mn,"antd");var Ga=f(43185),pe=f(32620),Va=f(34792),We=f(48086),Qe=f(39428),Ge=f(3182),Pn=f(81473);function Fn(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=a.readOnly,m=n.children,c=m===void 0?[]:m,o=(0,I.Al)(),v=function(){var i=(0,Ge.Z)((0,Qe.Z)().mark(function r(s){var u,g,h,j;return(0,Qe.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:u=s.onSuccess,g=s.onError,h=s.file,j=s.onProgress,o.onUpload&&o.onUpload({file:h,fileType:6},function(E){j&&j({percent:E.loaded/E.total*100})}).then(function(E){if(E.success&&u&&(u(E.data),E.data.content&&l((0,V.Z)({},c[0].id,E.data.content))),!E.success&&g){var y=new Error("Some error");g({event:y})}});case 2:case"end":return C.stop()}},r)}));return function(s){return i.apply(this,arguments)}}();return(0,e.jsx)("div",{children:c==null?void 0:c.map(function(i){var r=i.id,s=i.attribute,u=s===void 0?{}:s,g=u.cameraOnly;return(0,e.jsx)(re.Z,{style:{marginBottom:10},"data-id":r,children:(0,e.jsx)(ee.Z,{span:12,children:(0,e.jsx)(ae.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:t[r],addonAfter:(0,e.jsx)(pe.Z,{accept:"image/*",capture:g?"environment":void 0,disabled:x,maxCount:1,beforeUpload:function(j){return u!=null&&u.maxFileSize&&j.size>u.maxFileSize*1024*1024?(We.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(u.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),pe.Z.LIST_IGNORE):!0},customRequest:v,showUploadList:!1,children:(0,e.jsx)(Pn.Z,{})},r)})})},r)})})}(0,S.RM)("Barcode",Fn,"antd");var Xa=f(36877),Dn=f(95897);function Tn(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x;function c(o){var v={};o.forEach(function(i,r){var s=m[r].id;v[s]=i}),l(v)}return(0,e.jsx)(re.Z,{children:(0,e.jsx)(ee.Z,{span:12,children:(0,e.jsx)(Dn.Z,{value:m.map(function(o){return t[o.id]}).filter(function(o){return o}),style:{width:260},options:n.dataSource,onChange:c,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,S.RM)("Cascader",Tn,"antd");function kn(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=a.onBlur,m=n.children,c=n.attribute,o=24/((c==null?void 0:c.columns)||1),v=(0,I.AK)("-body-question"),i=!!(c!=null&&c.statEnabled),r=(0,I.Al)(),s=(0,I.Rk)(),u=s.hiddenOption[n.id]||[];(0,B.useEffect)(function(){var h=Object.keys(t),j=!1;h.forEach(function(A){u.includes(A)&&(j=!0,delete t[A])}),j&&l((0,Z.Z)({},t))},[u]);function g(h,j,A){return j?t[h]=A||!0:delete t[h],(0,Z.Z)({},t)}return(0,B.useEffect)(function(){m==null||m.forEach(function(h){var j;(j=h.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(t).length===0&&l((0,V.Z)({},h.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(re.Z,{children:m==null?void 0:m.filter(function(h){return!u.includes(h.id)}).map(function(h){var j,A,C,E,y=h.id,Q=(j=h.attribute)===null||j===void 0?void 0:j.dataType,p=(A=h.attribute)===null||A===void 0?void 0:A.suffix,N=(C=h.attribute)===null||C===void 0?void 0:C.readOnly,b=(E=h.attribute)===null||E===void 0?void 0:E.quota,M=!1;if(b!==void 0){var D,P=r.statistics,T=P==null?void 0:P.questionStatistics[n.id],k=(T==null||(D=T.optionStatistics.find(function(G){return G.optionId===y}))===null||D===void 0?void 0:D.count)||0,O=b-k;O<=0&&(M=!0)}return(0,e.jsxs)(ee.Z,{span:o,className:v+"-option","data-id":y,children:[(0,e.jsx)(mn,{disabled:M,qId:n.id,schema:h,checked:t.hasOwnProperty(y),onChange:function(L,K){M||l(g(y,L,K))},value:typeof t[y]=="boolean"?{}:t[y],onBlur:x}),(0,e.jsx)(Le,{statEnabled:i,quota:b,checked:!!t[y],optionId:y,questionId:n.id,checkedCount:Object.keys(t).length}),Q&&(0,e.jsx)(ve,{value:typeof t[y]=="boolean"?"":t[y],style:{maxWidth:200},type:Q,onChange:function(L){return l(g(y,!0,L))},onBlur:function(L){return x(g(y,!0,L))},readOnly:N,suffix:p&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(w.Z,{html:p})})})]},y)})})})}(0,S.RM)("Checkbox",(0,U.Pi)(kn),"antd");var qa=f(71153),Ve=f(60331),_a=f(62999),On=f(95222),fe=f(3980),zn=f(60780),Hn=f.n(zn);function Ln(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=m[0].id,o=(0,B.useState)([]),v=(0,z.Z)(o,2),i=v[0],r=v[1];function s(g){c&&((g==null?void 0:g.length)===0?l(void 0):l((0,V.Z)({},c,g==null?void 0:g.map(function(h){return h.value}))))}var u=(0,B.useMemo)(function(){return Hn()(i.map(function(g){return{title:g.name,key:g.id,value:g.id,parentId:g.parentId}}),{parentProperty:"parentId",customID:"key"})},[i]);return(0,B.useEffect)(function(){fe.hi.selectDept({}).then(function(g){g.success&&r(g.data)})},[]),(0,e.jsx)(re.Z,{children:(0,e.jsx)(ee.Z,{span:24,children:(0,e.jsx)(On.Z,{style:{width:"100%"},treeCheckable:!0,value:(t[c]||[]).map(function(g){return{value:g}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:u,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:s,showSearch:!1})})})}var Kn=function(n){var l=n.schema,d=n.value,t=d===void 0?{}:d,x=l.children,m=x===void 0?[]:x,c=m[0].id,o=(0,B.useState)([]),v=(0,z.Z)(o,2),i=v[0],r=v[1];return(0,B.useEffect)(function(){fe.hi.selectDept({selected:t[c]||[],name:"^_^"}).then(function(s){s.success&&r(s.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Re.Z,{children:i.map(function(s){return(0,e.jsx)(Ve.Z,{color:"blue",children:s.name},s.id)})})})};(0,S.RM)("Dept",Ln,"antd"),(0,S.cf)("Dept",Kn,"antd");function Xe(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=a.onBlur,m=n.children,c=(0,I.AK)("-body-question");function o(i,r){t[i]=r,r===""&&delete t[i],l((0,Z.Z)({},t),i)}function v(i,r){t[i]=r,r===""&&delete t[i],x((0,Z.Z)({},t),i)}return(0,e.jsx)("div",{children:m==null?void 0:m.map(function(i){var r=i.id,s=i.title;return(0,e.jsxs)(re.Z,{style:{marginBottom:10},"data-id":r,children:[s&&(0,e.jsx)(ee.Z,{className:c+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:c+"-option-title",children:(0,e.jsx)(w.Z,{html:i.title})})},i.id),(0,e.jsxs)(ee.Z,{span:12,className:c+"-option",children:[(0,e.jsx)(An,{qId:n.id,schema:i,value:t,onChange:function(g){return o(r,g)},onBlur:function(g){return v(r,g)}}),(0,e.jsx)(Me,{schema:i,type:n.type})]})]},r)})})}(0,S.RM)("FillBlank",Xe,"antd"),(0,S.RM)("MultipleBlank",Xe,"antd");function Un(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=a.onBlur,m=n.children,c=n.attribute,o=c===void 0?{}:c,v=o.content;return!v||!m?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Be,{schema:n,children:m.filter(function(i){var r;return!((r=i.attribute)!==null&&r!==void 0&&r.fieldInTitle)}),content:v,onBlur:x,onChange:l,value:t})}var Jn=function(n){var l=n.schema,d=n.value,t=l.children,x=l.attribute,m=x===void 0?{}:x,c=m.content;return(0,e.jsx)("div",{className:"preview pe-view",children:(0,e.jsx)(w.Z,{html:Ue(c,t,d),replaceP:!1},Math.random())})};(0,S.RM)("HorzBlank",Un,"antd"),(0,S.cf)("HorzBlank",Jn,"antd");var Fe=f(83279),me=f(79521),Yn=f(54121),$n=function(n){var l=(0,fe.XI)(200),d=(0,z.Z)(l,2),t=d[0],x=d[1],m=(0,fe.XI)(200),c=(0,z.Z)(m,2),o=c[0],v=c[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:t,children:[n.cells.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(i.column.id),children:i.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:o,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Yn.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:x||v?"visible":"hidden"}})})]}))};function qe(a){var n=a.columns,l=a.data,d=a.onAdd,t=a.onDelete,x=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),m=(0,me.useTable)({columns:n,data:l,defaultColumn:x},me.useBlockLayout),c=m.getTableProps,o=m.getTableBodyProps,v=m.headerGroups,i=m.rows,r=m.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},c()),{},{className:"table",children:[(0,e.jsx)("div",{children:v.map(function(s){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(u){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o()),{},{children:i.map(function(s,u){return r(s),(0,B.createElement)($n,(0,Z.Z)((0,Z.Z)({},s),{},{key:u,i:u,onDelete:t?function(){return t(u)}:void 0}))})})),d&&(0,e.jsx)("div",{className:"footer",onClick:d,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Wn(a){var n,l=a.schema,d=a.onChange,t=a.value||[{}],x=l.children,m=x===void 0?[]:x,c=(0,Y.Ck)((n=l.attribute)===null||n===void 0?void 0:n.scope,[1,999]),o=(0,B.useMemo)(function(){return m.map(function(v){var i;return{Header:(0,e.jsx)(w.Z,{html:v.title}),width:(i=v.attribute)===null||i===void 0?void 0:i.width,accessor:v.id,Cell:function(s){var u,g=s.value,h=s.row,j=s.data;if(((u=v.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var A;return(0,e.jsx)(H.Z,{placeholder:"\u8BF7\u9009\u62E9",value:g,style:{width:"100%"},onChange:function(Q){j[h.index][v.id]=Q},options:((A=v.dataSource)===null||A===void 0?void 0:A.map(function(y){return{label:y.label,value:y.value}}))||[]})}else{var C,E;return(0,e.jsx)(ve,{schema:v,type:(C=v.attribute)===null||C===void 0?void 0:C.dataType,dictCode:(E=v.attribute)===null||E===void 0?void 0:E.dictCode,onBlur:function(){},value:g,onChange:function(Q){j[h.index][v.id]=Q,d((0,Fe.Z)(j))}})}}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(qe,{columns:o,data:t,onAdd:t.length<c[2]?function(){t.push({}),d((0,Fe.Z)(t))}:void 0,onDelete:function(i){t.splice(i,1),d((0,Fe.Z)(t))}})})}var Gn=function(n){var l=n.schema,d=n.value||[{},{}],t=l.children,x=t===void 0?[]:t,m=(0,B.useMemo)(function(){return x.map(function(c){var o;return{Header:(0,e.jsx)(w.Z,{html:c.title}),width:(o=c.attribute)===null||o===void 0?void 0:o.width,accessor:c.id,Cell:function(i){var r,s=i.value,u=i.row,g=i.data;if(((r=c.attribute)===null||r===void 0?void 0:r.dataType)==="select"){var h,j,A=((h=c.dataSource)===null||h===void 0||(j=h.find(function(C){return C.value===s}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:A})}else return(0,e.jsx)("span",{children:s})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(qe,{columns:m,data:d})})};(0,S.RM)("MatrixAuto",Wn,"antd"),(0,S.cf)("MatrixAuto",Gn,"antd");var Ee=f(93224),Vn=["title","rowId"],Xn=["title","rowId"];function _e(a){var n=a.columns,l=a.data,d=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),t=(0,me.useTable)({columns:n,data:l,defaultColumn:d},me.useBlockLayout),x=t.getTableProps,m=t.getTableBodyProps,c=t.headerGroups,o=t.rows,v=t.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},x()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:o.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function qn(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=n.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,s=m.map(function(u){var g;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(g=u.attribute)===null||g===void 0?void 0:g.width,accessor:u.id,Cell:function(j){var A,C=j.value,E=j.row,y=j.data,Q=(A=u.attribute)===null||A===void 0?void 0:A.dataType;return(0,e.jsxs)("div",{onClick:function(N){var b=!C,M={};y.forEach(function(D,P){var T=D.title,k=D.rowId,O=(0,Ee.Z)(D,Vn);E.index===P&&(b?O[u.id]=!0:delete O[u.id]),M[k]=O}),l(M)},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(ye.Z,{checked:!!C}),Q?(0,e.jsx)(ve,{type:Q,style:{width:120,marginLeft:5},value:C===!0?"":C,onChange:function(N){var b={};y.forEach(function(M,D){var P=M.title,T=M.rowId,k=(0,Ee.Z)(M,Xn);E.index===D&&(k[u.id]=N),b[T]=k}),l(b)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return s.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),s},[]),i=o.map(function(r,s){var u=r.id,g=t[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},g)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(_e,{columns:v,data:i})})}var _n=function(n){var l=n.schema,d=n.value,t=d===void 0?{}:d,x=l.children,m=x===void 0?[]:x,c=l.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,s=m.map(function(u){var g;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(g=u.attribute)===null||g===void 0?void 0:g.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return A?(0,e.jsx)("div",{children:(0,e.jsx)(ye.Z,{checked:!!A,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return s.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=l.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),s},[]),i=o.map(function(r,s){var u=r.id,g=t[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},g)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(_e,{columns:v,data:i})})};(0,S.RM)("MatrixCheckbox",qn,"antd"),(0,S.cf)("MatrixCheckbox",_n,"antd");var ea=["title","rowId"];function en(a){var n=a.columns,l=a.data,d=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),t=(0,me.useTable)({columns:n,data:l,defaultColumn:d},me.useBlockLayout),x=t.getTableProps,m=t.getTableBodyProps,c=t.headerGroups,o=t.rows,v=t.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},x()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:o.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td","data-id":"".concat(i.original.rowId,"-").concat(r.column.id),children:r.render("Cell")}))})}))})}))]}))}function na(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=n.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,s=m.map(function(u){var g;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(g=u.attribute)===null||g===void 0?void 0:g.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return(0,e.jsx)(ve,{value:A,onChange:function(Q){var p={};E.forEach(function(N,b){var M=N.title,D=N.rowId,P=(0,Ee.Z)(N,ea);C.index===b&&(P[u.id]=Q),p[D]=P}),l(p)}})}}});return s.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),s},[]),i=o.map(function(r,s){var u=r.id,g=t[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},g)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(en,{columns:v,data:i})})}var aa=function(n){var l=n.schema,d=n.value,t=d===void 0?{}:d,x=l.children,m=x===void 0?[]:x,c=l.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,s=m.map(function(u){var g;return{Header:function(){return(0,e.jsx)(w.Z,{html:u.title})},width:(g=u.attribute)===null||g===void 0?void 0:g.width,accessor:u.id,Cell:function(j){var A=j.value;return(0,e.jsx)("span",{children:A})}}});return s.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(r=l.attribute)===null||r===void 0?void 0:r.width,accessor:"title"}),s},[]),i=o.map(function(r,s){var u=r.id,g=t[u]||{};return(0,Z.Z)({title:r.title,rowId:u},g)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(en,{columns:v,data:i})})};(0,S.RM)("MatrixFillBlank",na,"antd"),(0,S.cf)("MatrixFillBlank",aa,"antd");var ta=["title","rowId"],ra=["title","rowId"];function nn(a){var n=a.columns,l=a.data,d=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),t=(0,me.useTable)({columns:n,data:l,defaultColumn:d},me.useBlockLayout),x=t.getTableProps,m=t.getTableBodyProps,c=t.headerGroups,o=t.rows,v=t.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},x()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:o.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function ia(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=n.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var s;return((s=n.children)===null||s===void 0?void 0:s.filter(function(u){var g;return(g=u.attribute)===null||g===void 0?void 0:g.exclusiveFillBlankInMatrix}).map(function(u){return u.id}))||[]},[n]),i=(0,B.useMemo)(function(){var s,u,g=m.map(function(h){var j;return{Header:(0,e.jsx)(w.Z,{html:h.title}),width:(j=h.attribute)===null||j===void 0?void 0:j.width,accessor:h.id,Cell:function(C){var E,y,Q=C.value,p=C.row,N=C.data,b=(E=h.attribute)===null||E===void 0?void 0:E.exclusiveFillBlankInMatrix,M=(y=h.attribute)===null||y===void 0?void 0:y.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!b){var P={};N.forEach(function(T,k){var O=T.title,G=T.rowId,L=(0,Ee.Z)(T,ta);p.index===k?(P[G]={},v.forEach(function(K){P[G][K]=L[K]}),P[G][h.id]=!0):P[G]=L}),l(P)}},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[!b&&(0,e.jsx)(Ze.ZP,{checked:!!Q}),M?(0,e.jsx)(ve,{type:M,style:{width:120},value:Q===!0?"":Q,onChange:function(P){var T={};N.forEach(function(k,O){var G=k.title,L=k.rowId,K=(0,Ee.Z)(k,ra);p.index===O?(b?T[L]=K:(T[L]={},v.forEach(function(q){T[L][q]=K[q]})),T[L][h.id]=P):T[L]=K}),l(T)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return g.splice(0,0,{Header:(0,e.jsx)(w.Z,{html:(s=n.attribute)===null||s===void 0?void 0:s.cornerText}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),r=o.map(function(s,u){var g=s.id,h=t[g]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:s.title}),rowId:g},h)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(nn,{columns:i,data:r})})}var la=function(n){var l=n.schema,d=n.value,t=d===void 0?{}:d,x=l.children,m=x===void 0?[]:x,c=l.row,o=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,s,u=m.map(function(g){var h;return{Header:(0,e.jsx)(w.Z,{html:g.title}),width:(h=g.attribute)===null||h===void 0?void 0:h.width,accessor:g.id,Cell:function(A){var C=A.value,E=A.row,y=A.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(Ze.ZP,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return u.splice(0,0,{Header:(0,e.jsx)(w.Z,{html:(r=l.attribute)===null||r===void 0?void 0:r.cornerText}),width:((s=l.attribute)===null||s===void 0?void 0:s.width)||150,accessor:"title"}),u},[]),i=o.map(function(r,s){var u=r.id,g=t[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},g)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(nn,{columns:v,data:i})})};(0,S.RM)("MatrixRadio",ia,"antd"),(0,S.cf)("MatrixRadio",la,"antd");function sa(a){for(var n=[],l=2;l<a+2;l++)n.push(l/(a+2));return n}function da(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=[],t=a;t<=n;t++)d.push(t);return l&&d.reverse(),d}function oa(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=m[0].id,o=(0,B.useState)(function(){return t[c]||-1}),v=(0,z.Z)(o,2),i=v[0],r=v[1];function s(g){l((0,V.Z)({},c,g))}(0,B.useEffect)(function(){Object.keys(t).length>0&&r(t[c])},[t,c]);var u=function(h){var j=t[h.id],A=h.attribute||{},C=A.scope,E=C===void 0?"[0,10]":C,y=A.npsInvertSort,Q=A.npsStart,p=Q===void 0?"\u4E0D\u53EF\u80FD":Q,N=A.npsEnd,b=N===void 0?"\u6781\u6709\u53EF\u80FD":N,M=E.replace("[","").replace("]","").split(","),D=(0,z.Z)(M,2),P=D[0],T=D[1],k=sa(i||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){r(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:da(parseInt(P),parseInt(T),y).map(function(O){var G={background:"#2672ff",opacity:k[O]};return(0,e.jsx)("div",{className:"nps-item",style:i>=O?G:void 0,onMouseOver:function(){r(O)},onClick:function(){return s(O)},children:O},O)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:y?b:p}),(0,e.jsx)("div",{children:y?p:b})]})]},h.id)};return(0,e.jsx)(re.Z,{children:m.map(function(g){return u(g)})})}(0,S.RM)("Nps",oa,"antd");var ua=Ze.ZP.Group;function ca(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=a.onBlur,m=n.children,c=n.attribute,o=24/((c==null?void 0:c.columns)||1),v=(0,I.AK)("-body-question"),i=!!(c!=null&&c.statEnabled),r=(0,I.Rk)(),s=r.hiddenOption[n.id]||[],u=(0,I.Al)();function g(A){var C,E=A.target.value,y=(C=n.children)===null||C===void 0?void 0:C.find(function(p){return p.id===E});if(y){var Q=y.id;l((0,V.Z)({},A.target.value,t[Q]||!0))}}(0,B.useEffect)(function(){var A=Object.keys(t)[0];s.includes(A)&&l(void 0)},[s]);function h(A,C){l((0,V.Z)({},A,C||!0),A)}function j(A,C){x((0,V.Z)({},A,C||!0),A)}return(0,B.useEffect)(function(){var A;(A=n.children)===null||A===void 0||A.forEach(function(C){var E,y=C.id,Q=C.attribute,p=Q==null?void 0:Q.dataType;(E=C.attribute)!==null&&E!==void 0&&E.defaultChecked&&Object.keys(t).length===0&&l((0,V.Z)({},y,p?t[y]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ua,{onChange:g,value:Object.keys(t)[0],style:{width:"100%"},children:(0,e.jsx)(re.Z,{children:m==null?void 0:m.filter(function(A){return!s.includes(A.id)}).map(function(A){var C,E,y,Q,p=A.id,N=(C=A.attribute)===null||C===void 0?void 0:C.dataType,b=(E=A.attribute)===null||E===void 0?void 0:E.suffix,M=(y=A.attribute)===null||y===void 0?void 0:y.readOnly,D=(Q=A.attribute)===null||Q===void 0?void 0:Q.quota,P=!1;if(D!==void 0){var T,k=u.statistics,O=k==null?void 0:k.questionStatistics[n.id],G=(O==null||(T=O.optionStatistics.find(function(K){return K.optionId===p}))===null||T===void 0?void 0:T.count)||0,L=D-G;L<=0&&(P=!0)}return(0,e.jsxs)(ee.Z,{span:o,className:v+"-option","data-id":p,children:[(0,e.jsx)(xn,{qId:n.id,schema:A,disabled:P,value:t[p],onChange:function(q){return h(p,q)},onBlur:function(q){return j(p,q)}}),(0,e.jsx)(Le,{statEnabled:i,quota:D,checked:!!t[p],optionId:p,questionId:n.id,checkedCount:Object.keys(t).length}),N&&(0,e.jsx)(ve,{value:t[p]===!0?"":t[p],type:N,schema:A,readOnly:M,style:{maxWidth:200},onChange:function(q){return h(p,q)},onBlur:function(q){return j(p,q)},suffix:b&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(w.Z,{html:b})})})]},p)})})})})}(0,S.RM)("Radio",(0,U.Pi)(ca),"antd");function va(a){var n=(0,I.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(w.Z,{html:"".concat(a.replaceTitle||a.schema.title||"")})})}var ha=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(w.Z,{html:"".concat(n.replaceTitle||n.schema.title||"")})})};(0,S.RM)("Remark",va,"antd"),(0,S.cf)("Remark",ha,"antd");var et=f(96433),De=f(2864),an=f(41687),fa=f(46870),tn=f(18613),ma=f(57206),ga={1:(0,e.jsx)(an.Z,{}),2:(0,e.jsx)(an.Z,{}),3:(0,e.jsx)(fa.Z,{}),4:(0,e.jsx)(tn.Z,{}),5:(0,e.jsx)(tn.Z,{})};function xa(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x;function c(v,i){l((0,V.Z)({},v,i))}var o=function(i){var r=i.attribute||{},s=i.id,u=r.scope,g=u===void 0?"[0,5]":u,h=r.scoreStyle,j=g.replace("[","").replace("]","").split(","),A=(0,z.Z)(j,2),C=A[0],E=A[1];return h==="heart"?(0,e.jsx)(De.Z,{defaultValue:parseInt(C),character:(0,e.jsx)(ma.Z,{}),style:{color:"#ea7463"},value:t[s],count:parseInt(E),onChange:function(Q){return c(s,Q)}},s):h==="smile"?(0,e.jsx)(De.Z,{defaultValue:parseInt(C),character:function(Q){var p=Q.index;return ga[p+1]},count:parseInt(E),onChange:function(Q){return c(s,Q)},value:t[s]},s):(0,e.jsx)(De.Z,{defaultValue:parseInt(C),count:parseInt(E),value:t[s],onChange:function(Q){return c(s,Q)}},s)};return(0,e.jsx)(re.Z,{children:m.map(function(v){return o(v)})})}(0,S.RM)("Score",xa,"antd");function Aa(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x;function c(o){var v,i=(v=n.children)===null||v===void 0?void 0:v.find(function(r){return r.id===o});i&&l((0,V.Z)({},o,!0))}return(0,B.useEffect)(function(){var o;(o=n.children)===null||o===void 0||o.forEach(function(v){var i,r=v.id;(i=v.attribute)!==null&&i!==void 0&&i.defaultChecked&&Object.keys(t).length===0&&l((0,V.Z)({},r,!0))})},[]),(0,e.jsx)(re.Z,{children:(0,e.jsx)(ee.Z,{span:12,children:(0,e.jsx)(H.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){l(void 0)},showSearch:!0,value:Object.keys(t)[0],filterOption:function(v,i){return(i==null?void 0:i.label).toLowerCase().indexOf(v.toLowerCase())!==-1},onChange:c,style:{width:260},options:m.map(function(o){return{label:o.title,value:o.id}})})})})}(0,S.RM)("Select",Aa,"antd");var nt=f(34669),ja=f(82833);function Ca(a){var n=a.schema,l=a.onChange,d=n.children,t=(0,I.Al)(),x=(0,B.useState)(0),m=(0,z.Z)(x,2),c=m[0],o=m[1];function v(i,r){var s="signature-".concat(r,"-").concat((0,Y.kb)(6),".png");if(!t.onUpload){l((0,V.Z)({},r,[s]));return}fetch(i).then(function(u){return u.blob()}).then(function(u){var g=new File([u],s,{type:"image/png"});t.onUpload({file:g},function(h){o(h.loaded/h.total*100)}).then(function(h){h.success&&h.data.id&&l((0,V.Z)({},r,[h.data.id]))})})}return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(i){var r=i.id,s=i.title;return(0,e.jsxs)(re.Z,{gutter:[10,0],"data-id":r,children:[s&&(0,e.jsx)(ee.Z,{span:24},i.id),(0,e.jsxs)(ee.Z,{span:24,children:[(0,e.jsx)(ln,{onChange:function(g){return v(g,r)}}),c>0&&c!==100&&(0,e.jsx)(ja.Z,{percent:c,size:"small",showInfo:!1})]})]},r)})})}var Ea=function(n){var l=n.value,d;return l&&(d=Object.values(l)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:d&&(0,e.jsx)("img",{src:"/api/file?id=".concat(d)})})};(0,S.RM)("Signature",Ca,"antd"),(0,S.cf)("Signature",Ea,"antd");var Te=f(27049);function ya(a){var n=(0,I.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(Te.Z,{plain:!0})})}var Ba=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(Te.Z,{plain:!0})})};(0,S.RM)("SplitLine",ya,"antd"),(0,S.cf)("SplitLine",Ba,"antd");function Za(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=(0,I.AK)("-body-question");function c(o,v){t[o]=v,v===""&&delete t[o],l((0,Z.Z)({},t))}return(0,e.jsx)("div",{children:x==null?void 0:x.map(function(o){var v=o.id,i=o.attribute,r=o.title,s=(0,Y.Ck)(i==null?void 0:i.autoSize,[2,4]);return(0,e.jsxs)(re.Z,{style:{marginBottom:10},"data-id":v,children:[r&&(0,e.jsx)(ee.Z,{className:m+"-option",span:4,children:o.title&&(0,e.jsx)("span",{className:m+"-option-title",children:o.title})},o.id),(0,e.jsx)(ee.Z,{span:12,children:(0,e.jsx)(ae.Z.TextArea,{autoSize:{minRows:s[1],maxRows:s[2]},value:t[v]||"",onChange:function(g){return c(v,g.target.value)}})})]},v)})})}(0,S.RM)("Textarea",Za,"antd");var ba=f(43347),pa=pe.Z.Dragger;function Qa(a){var n=a.schema,l=a.onChange,d=a.value,t=a.readOnly,x=n.children,m=(0,I.Al)(),c=(0,B.useState)(),o=(0,z.Z)(c,2),v=o[0],i=o[1];(0,B.useEffect)(function(){var u=n.children[0].id,g=d&&d[u]||[];v==null&&g.length>0&&fe.hi.loadFiles({ids:g}).then(function(h){i(h==null?void 0:h.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[d]);var r=function(){var u=(0,Ge.Z)((0,Qe.Z)().mark(function g(h){var j,A,C,E;return(0,Qe.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:j=h.onSuccess,A=h.onError,C=h.file,E=h.onProgress,m.onUpload&&m.onUpload({file:C},function(p){E&&E({percent:p.loaded/p.total*100})}).then(function(p){if(p.success&&j&&j(p.data),!p.success&&A){var N=new Error("Some error");A({event:N})}});case 2:case"end":return Q.stop()}},g)}));return function(h){return u.apply(this,arguments)}}(),s=function(g,h){if(i(g.fileList),(g.file.status==="removed"||g.file.status==="done")&&!g.fileList.find(function(A){return A.status!=="done"})){var j=g.fileList.filter(function(A){return A.status==="done"}).map(function(A){var C;return((C=A.response)===null||C===void 0?void 0:C.id)||A.uid});j.length===0?l(void 0):l((0,V.Z)({},h,j))}};return(0,e.jsx)("div",{children:x==null?void 0:x.map(function(u){var g=u.id,h=u.attribute,j=[];if(h){var A=h.maxFileCount,C=h.maxFileSize,E=h.fileAccept;A&&j.push("\u6700\u591A\u4E0A\u4F20".concat(A,"\u4E2A")),C&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(C,"M\u4EE5\u5185")),E&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(E))}return(0,e.jsxs)(pa,{multiple:!0,disabled:t,maxCount:(h==null?void 0:h.maxFileCount)||20,accept:h==null?void 0:h.fileAccept,beforeUpload:function(Q){return h!=null&&h.maxFileSize&&Q.size>h.maxFileSize*1024*1024?(We.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(h.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),pe.Z.LIST_IGNORE):!0},customRequest:r,onChange:function(Q){return s(Q,g)},fileList:v,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(ba.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},g)})})}(0,S.RM)("Upload",Qa,"antd");var Na=f(55686),Ia=H.Z.Option;function Sa(a){var n=a.schema,l=a.onChange,d=a.value,t=d===void 0?{}:d,x=n.children,m=x===void 0?[]:x,c=m[0].id,o=(0,B.useState)([]),v=(0,z.Z)(o,2),i=v[0],r=v[1];function s(h){c&&l((0,V.Z)({},c,h))}var u=(0,fe.zE)(function(h){fe.hi.selectUser({name:h,selected:t[c]||[]}).then(function(j){j.success&&r(j.data)})},5),g=function(j){s(j?i.map(function(A){return A.userId}):void 0)};return(0,B.useEffect)(function(){var h;u(""),(h=n.children)===null||h===void 0||h.forEach(function(j){var A,C=j.id;(A=j.attribute)!==null&&A!==void 0&&A.defaultChecked&&Object.keys(t).length===0&&l((0,V.Z)({},C,!0))})},[]),(0,e.jsx)(re.Z,{children:(0,e.jsx)(ee.Z,{span:24,children:(0,e.jsx)(H.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){l(void 0)},style:{width:"100%"},value:t[c]||[],onSearch:u,showSearch:!0,onChange:s,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(Te.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(ye.Z,{onChange:function(C){g(C.target.checked)},children:"\u5168\u9009"})})]})},children:i.map(function(h){return(0,e.jsx)(Ia,{value:h.userId,label:h.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Na.Z,{user:h,size:20})}),h.name," ",h.deptName&&"(".concat(h.deptName,")")]})},h.userId)})})})})}var wa=function(n){var l=n.schema,d=n.value,t=d===void 0?{}:d,x=l.children,m=x===void 0?[]:x,c=m[0].id,o=(0,B.useState)([]),v=(0,z.Z)(o,2),i=v[0],r=v[1];return(0,B.useEffect)(function(){fe.hi.selectUser({selected:t[c]||[],name:"^_^"}).then(function(s){s.success&&r(s.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Re.Z,{children:i.map(function(s){return(0,e.jsx)(Ve.Z,{color:"blue",children:s.name},s.userId)})})})};(0,S.RM)("User",Sa,"antd"),(0,S.cf)("User",wa,"antd");var Ra=f(73328),Ma=function(n){var l=(0,B.useRef)(null),d=(0,B.useState)(!1),t=(0,z.Z)(d,2),x=t[0],m=t[1];return(0,Ra.Z)(l,function(){m(!1)}),(0,e.jsx)("div",{className:Ae()("preview",{active:x}),ref:l,onClick:function(){m(!0)},children:(0,e.jsx)(w.Z,{html:Object.values(n.value||{})[0]})})};(0,Y.cf)("RichText",Ma,"antd");var Pa=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Fa=Pa;(0,Y.RM)("RichText",(0,B.lazy)(function(){return Promise.all([f.e(9548),f.e(4177),f.e(6779),f.e(3710),f.e(2684),f.e(6625),f.e(596),f.e(811),f.e(7462)]).then(f.bind(f,27321))}),"antd"),(0,Y.cf)("Upload",(0,B.lazy)(function(){return Promise.all([f.e(9548),f.e(6779),f.e(4502),f.e(3640)]).then(f.bind(f,43640))}),"antd")},55686:function(je,le,f){"use strict";var z=f(11849),Y=f(94233),w=f(51890),U=f(93224),B=f(89366),I=f(85893),S=["user"],se=function(de){var ie=de.user,ne=(0,U.Z)(de,S);return!ie||!ie.avatar?(0,I.jsx)(w.C,(0,z.Z)({icon:(0,I.jsx)(B.Z,{}),size:ne.size||"small"},ne)):(0,I.jsx)(w.C,(0,z.Z)({src:"/api/public/preview/".concat(ie.avatar),size:ne.size||"small"},ne))};le.Z=se},78210:function(je,le,f){"use strict";var z=f(12968),Y=f(62462),w=f(27856),U=f.n(w),B=f(15020),I=f(85893),S=function(e){var de=e.html,ie=de===void 0?"":de,ne=e.replaceP,R=ne===void 0?!0:ne;return R?(0,I.jsx)("div",{className:"pe-view",children:typeof ie=="string"&&(0,B.ZP)(U().sanitize(ie,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"),{replace:function(_){if((_==null?void 0:_.name)==="img"){var ge=_.attribs.width;return(0,I.jsx)(Y.Z,{width:ge?parseFloat(ge):void 0,src:_.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}return _}})}):(0,I.jsx)(I.Fragment,{children:typeof ie=="string"&&(0,B.ZP)(U().sanitize(ie))})};le.Z=S},49914:function(je,le,f){"use strict";f.d(le,{H:function(){return w}});var z=f(67294),Y=f(96389);function w(){return(0,z.useContext)(Y.ff)}},39002:function(je,le,f){"use strict";var z=f(38663),Y=f.n(z),w=f(92801),U=f.n(w),B=f(14965)}}]);
