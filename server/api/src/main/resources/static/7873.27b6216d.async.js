(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[7873],{38006:function(B){B.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(B){B.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(B,H,t){"use strict";t.r(H),t.d(H,{default:function(){return _}});var u=t(13062),C=t(71230),te=t(58024),A=t(91894),ue=t(89032),i=t(15746),U=t(54421),$=t(38272),ae=t(94657),me=t(95300),W=t(7277),fe=t(94233),L=t(51890),xe=t(71748),ne=t(90860),J=t(67294),V=t(27400),re=t(36450),le=t(9761),se=t(30381),Y=t.n(se),ie=t(73727),a=t(38006),o=t.n(a),e=t(85893),n=function(d){var r=d.links,m=d.linkElement,T=d.onAdd;return(0,e.jsx)("div",{className:o().linkGroup,children:r.map(function(v){return(0,J.createElement)(m,{key:"linkGroup-item-".concat(v.id||v.title),to:v.href,href:v.href},v.title)})})};n.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var s=n,P=t(9016),c=t.n(P),Z=t(18106),E=t(38222),j=t(39428),h=t(3182),X=t(402),N=t(20294),b=t(3980),F=t(91186),M=t(27484),K=t.n(M),G=N.Z.Text,O=function(d){var r=d.mode,m=d.type,T=[{title:r==="exam"?"\u8003\u8BD5\u540D\u79F0":"\u95EE\u5377\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"examStartTime",hideInTable:m==="history",renderText:function(f){return f?K()(f).format("YYYY-MM-DD HH:mm"):"-"}},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",hideInTable:m==="history",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u6211\u7684\u7B54\u9898\u65F6\u95F4",dataIndex:"answerTime",hideInTable:m!=="history",renderText:function(f,l){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{fontSize:12},children:K()(l.startTime).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:K()(l.endTime).format("YYYY-MM-DD HH:mm:ss")})]})}},{title:"\u6211\u7684\u7B54\u9898\u7528\u65F6",dataIndex:"totalTime",hideInTable:m!=="history",renderText:function(f,l){if(l.endTime&&l.startTime)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G,{strong:!0,style:{fontSize:18,marginRight:5},children:Math.floor((l.endTime-l.startTime)/6e4)}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206\u949F"})]})}},{title:"\u6211\u7684\u5F97\u5206",dataIndex:"examScore",hideInTable:!(r==="exam"&&m==="history"),renderText:function(f){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:f}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206"})]})}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(f,l){return l.answerId&&r==="exam"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(l.projectId,"/exam-result/").concat(l.answerId))},children:"\u67E5\u770B\u7ED3\u679C"}):l.answerId&&r==="survey"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(l.projectId,"/").concat(l.answerId,"?pattern=readPretty"))},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(l.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,e.jsx)(F.ZP,{rowKey:"id",params:{type:r},request:function(){var v=(0,h.Z)((0,j.Z)().mark(function f(l){return(0,j.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",m==="todo"?b.hi.listUserTask(l):b.hi.listHistoryTask(l));case 1:case"end":return g.stop()}},f)}));return function(f){return v.apply(this,arguments)}}(),bordered:!0,columns:T,search:!1,toolbar:{}})};function Q(){var x=[{key:"exam",label:"\u6211\u7684\u8003\u8BD5",children:(0,e.jsx)(O,{type:"todo",mode:"exam"})},{key:"survey",label:"\u6211\u7684\u95EE\u5377",children:(0,e.jsx)(O,{type:"todo",mode:"survey"})},{key:"surveyHistory",label:"\u95EE\u5377\u8BB0\u5F55",children:(0,e.jsx)(O,{type:"history",mode:"survey"})},{key:"examHistory",label:"\u8003\u8BD5\u8BB0\u5F55",children:(0,e.jsx)(O,{type:"history",mode:"exam"})}];return(0,e.jsx)(A.Z,{style:{width:"100%",marginBottom:24},children:(0,e.jsx)(E.Z,{items:x})})}var oe=[{title:"\u521B\u5EFA\u95EE\u5377",href:"/survey/new?mode=survey"},{title:"\u521B\u5EFA\u8003\u8BD5",href:"/survey/new?mode=exam"}];function de(){var x=new Date,d=x.getHours();return d<6?"\u51CC\u6668\u597D":d<9?"\u65E9\u4E0A\u597D":d<12?"\u4E0A\u5348\u597D":d<14?"\u4E2D\u5348\u597D":d<17?"\u4E0B\u5348\u597D":d<19?"\u508D\u665A\u597D":d<22?"\u665A\u4E0A\u597D":"\u591C\u91CC\u597D"}var k=function(d){var r=d.currentUser,m=r&&Object.keys(r).length;return m?(0,e.jsxs)("div",{className:c().pageHeaderContent,children:[(0,e.jsx)("div",{className:c().avatar,children:(0,e.jsx)(L.C,{size:"large",src:r.avatar})}),(0,e.jsxs)("div",{className:c().content,children:[(0,e.jsxs)("div",{className:c().contentTitle,children:[de(),"\uFF0C",r.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"]}),(0,e.jsx)("div",{children:r.group})]}),(0,e.jsx)(w,{})]}):(0,e.jsx)(ne.Z,{avatar:!0,paragraph:{rows:1},active:!0})},w=function(){var d=(0,V.a)(),r=d.userOverview;return(0,e.jsxs)("div",{className:c().extraContent,children:[(0,e.jsx)("div",{className:c().statItem,children:(0,e.jsx)(W.Z,{title:"\u95EE\u5377\u6570",value:r==null?void 0:r.surveyCount})}),(0,e.jsx)("div",{className:c().statItem,children:(0,e.jsx)(W.Z,{title:"\u8003\u8BD5\u6570",value:r==null?void 0:r.examCount})})]})},q=void 0==="1",I=function(){var d=(0,V.a)(),r=d.user,m=(0,J.useState)(function(){return!localStorage.getItem("welcome")}),T=(0,ae.Z)(m,2),v=T[0],f=T[1],l={},z=l.loading,g=l.data,ye=g===void 0?[]:g,ce=function(y){var ve=y.template.split(/@\{([^{}]*)\}/gi).map(function(S){return y[S]?(0,e.jsx)("a",{href:y[S].link,children:y[S].name},y[S].name):S});return(0,e.jsx)($.ZP.Item,{children:(0,e.jsx)($.ZP.Item.Meta,{avatar:(0,e.jsx)(L.C,{src:y.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:c().username,children:y.user.name}),"\xA0",(0,e.jsx)("span",{className:c().event,children:ve})]}),description:(0,e.jsx)("span",{className:c().datetime,title:y.updatedAt,children:Y()(y.updatedAt).fromNow()})})},y.id)};return(0,e.jsx)(re._z,{className:c().container,content:(0,e.jsx)(k,{currentUser:{avatar:"/api/public/preview/".concat(r==null?void 0:r.avatar),name:r==null?void 0:r.name,userid:r==null?void 0:r.userId,email:r==null?void 0:r.email,signature:r==null?void 0:r.profile,group:r==null?void 0:r.deptName}}),children:(0,e.jsxs)(C.Z,{gutter:24,children:[(0,e.jsx)(i.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(Q,{})}),d.hasPermission("project:create")&&(0,e.jsx)(i.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(A.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0},children:(0,e.jsx)(s,{onAdd:function(){},links:oe,linkElement:ie.rU})})})]})})},_=(0,le.Pi)(I)},91894:function(B,H,t){"use strict";t.d(H,{Z:function(){return ie}});var u=t(96156),C=t(22122),te=t(94184),A=t.n(te),ue=t(98423),i=t(67294),U=t(53124),$=t(97647),ae=t(90860),me=t(38222),W=function(a,o){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&o.indexOf(n)<0&&(e[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(e[n[s]]=a[n[s]]);return e},fe=function(o){var e=o.prefixCls,n=o.className,s=o.hoverable,P=s===void 0?!0:s,c=W(o,["prefixCls","className","hoverable"]);return i.createElement(U.C,null,function(Z){var E=Z.getPrefixCls,j=E("card",e),h=A()("".concat(j,"-grid"),n,(0,u.Z)({},"".concat(j,"-grid-hoverable"),P));return i.createElement("div",(0,C.Z)({},c,{className:h}))})},L=fe,xe=function(a,o){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&o.indexOf(n)<0&&(e[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(e[n[s]]=a[n[s]]);return e};function ne(a){var o=a.map(function(e,n){return i.createElement("li",{style:{width:"".concat(100/a.length,"%")},key:"action-".concat(n)},i.createElement("span",null,e))});return o}var J=i.forwardRef(function(a,o){var e,n,s=i.useContext(U.E_),P=s.getPrefixCls,c=s.direction,Z=i.useContext($.Z),E=function(p){var D;(D=a.onTabChange)===null||D===void 0||D.call(a,p)},j=function(){var p;return i.Children.forEach(a.children,function(D){D&&D.type&&D.type===L&&(p=!0)}),p},h=a.prefixCls,X=a.className,N=a.extra,b=a.headStyle,F=b===void 0?{}:b,M=a.bodyStyle,K=M===void 0?{}:M,G=a.title,O=a.loading,Q=a.bordered,oe=Q===void 0?!0:Q,de=a.size,k=a.type,w=a.cover,q=a.actions,I=a.tabList,_=a.children,x=a.activeTabKey,d=a.defaultActiveTabKey,r=a.tabBarExtraContent,m=a.hoverable,T=a.tabProps,v=T===void 0?{}:T,f=xe(a,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),l=P("card",h),z=i.createElement(ae.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},_),g=x!==void 0,ye=(0,C.Z)((0,C.Z)({},v),(e={},(0,u.Z)(e,g?"activeKey":"defaultActiveKey",g?x:d),(0,u.Z)(e,"tabBarExtraContent",r),e)),ce,ee=I&&I.length?i.createElement(me.Z,(0,C.Z)({size:"large"},ye,{className:"".concat(l,"-head-tabs"),onChange:E,items:I.map(function(R){var p;return{label:R.tab,key:R.key,disabled:(p=R.disabled)!==null&&p!==void 0?p:!1}})})):null;(G||N||ee)&&(ce=i.createElement("div",{className:"".concat(l,"-head"),style:F},i.createElement("div",{className:"".concat(l,"-head-wrapper")},G&&i.createElement("div",{className:"".concat(l,"-head-title")},G),N&&i.createElement("div",{className:"".concat(l,"-extra")},N)),ee));var y=w?i.createElement("div",{className:"".concat(l,"-cover")},w):null,ve=i.createElement("div",{className:"".concat(l,"-body"),style:K},O?z:_),S=q&&q.length?i.createElement("ul",{className:"".concat(l,"-actions")},ne(q)):null,ge=(0,ue.Z)(f,["onTabChange"]),he=de||Z,Ce=A()(l,(n={},(0,u.Z)(n,"".concat(l,"-loading"),O),(0,u.Z)(n,"".concat(l,"-bordered"),oe),(0,u.Z)(n,"".concat(l,"-hoverable"),m),(0,u.Z)(n,"".concat(l,"-contain-grid"),j()),(0,u.Z)(n,"".concat(l,"-contain-tabs"),I&&I.length),(0,u.Z)(n,"".concat(l,"-").concat(he),he),(0,u.Z)(n,"".concat(l,"-type-").concat(k),!!k),(0,u.Z)(n,"".concat(l,"-rtl"),c==="rtl"),n),X);return i.createElement("div",(0,C.Z)({ref:o},ge,{className:Ce}),ce,y,ve,S)}),V=J,re=function(a,o){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&o.indexOf(n)<0&&(e[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(e[n[s]]=a[n[s]]);return e},le=function(o){return i.createElement(U.C,null,function(e){var n=e.getPrefixCls,s=o.prefixCls,P=o.className,c=o.avatar,Z=o.title,E=o.description,j=re(o,["prefixCls","className","avatar","title","description"]),h=n("card",s),X=A()("".concat(h,"-meta"),P),N=c?i.createElement("div",{className:"".concat(h,"-meta-avatar")},c):null,b=Z?i.createElement("div",{className:"".concat(h,"-meta-title")},Z):null,F=E?i.createElement("div",{className:"".concat(h,"-meta-description")},E):null,M=b||F?i.createElement("div",{className:"".concat(h,"-meta-detail")},b,F):null;return i.createElement("div",(0,C.Z)({},j,{className:X}),N,M)})},se=le,Y=V;Y.Grid=L,Y.Meta=se;var ie=Y},89032:function(B,H,t){"use strict";var u=t(38663),C=t.n(u),te=t(6999)}}]);
