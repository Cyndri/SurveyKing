(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[2072],{92801:function(){},76898:function(Ze,ve,h){"use strict";h.d(ve,{Ff:function(){return Ne},rF:function(){return Me},M2:function(){return ae}});var k=h(22385),L=h(94199),w=h(11849),H=h(93224),B=h(77883),I=h(85986),P=h(34792),he=h(48086),e=h(54707),W=h(49914),K=h(9761),G=h(94184),oe=h.n(G),pe=h(94657),q=h(78338),de=h(67294),S=h(85893);function ee(R){if(R=Number(R),R<=0)return"0:0:0";var J=Math.floor(R/3600),U=Math.floor(R%3600/60),ne=Math.floor(R%3600%60),X="".concat(J).padStart(2,"0"),V="".concat(U).padStart(2,"0"),ie="".concat(ne).padStart(2,"0");return"".concat(X,":").concat(V,":").concat(ie)}function Z(R){return R<=60?"#ff4d4f":R<=180?"#faad14":"#52c41a"}var we=(0,K.Pi)(function(){var R,J,U=(0,W.H)(),ne=(0,e.Rk)(),X=U.startTime,V=((R=U.project)===null||R===void 0||(J=R.setting.examSetting)===null||J===void 0?void 0:J.maxSubmitMinutes)||0,ie=(0,de.useState)(0),le=(0,pe.Z)(ie,2),me=le[0],fe=le[1],ye=X+V*60*1e3,ge=(0,de.useRef)();return(0,de.useEffect)(function(){if(V!==0)return ge.current=window.setInterval(function(){fe((ye-new Date().getTime())/1e3)},1e3),function(){clearInterval(ge.current)}},[ye]),(0,de.useEffect)(function(){me<0&&(ne.submit(),clearInterval(ge.current))},[me]),V===0?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,S.jsx)(q.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,S.jsx)("span",{style:{marginLeft:3,color:Z(me)},children:ee(me)})]})}),je=h(27400),Pe=h(3980),be=["size","marked"],Re=(0,K.Pi)(function(){var R=(0,e.Rk)(),J=R.lazy,U=(0,je.a)().user;return!J||!U?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)("div",{style:{marginTop:10,textWrap:"wrap",lineHeight:"24px",fontSize:12,color:"#707070"},children:["\u8FDE\u7EED\u505A\u5BF9",(0,S.jsx)(I.Z,{size:"small",style:{width:60,marginInline:4},defaultValue:U.correctTimes,min:0,max:100,onChange:function(X){X!==null&&Pe.hi.updateUserInfo({correctTimes:X}).then(function(V){V.success&&he.default.success("\u66F4\u65B0\u6210\u529F")})}}),"\u2003\u6B21\uFF0C\u81EA\u52A8\u79FB\u51FA\u9519\u9898/0\u4EE3\u8868\u6C38\u4E0D\u79FB\u51FA"]})}),ae=(0,K.Pi)(function(R){var J=(0,e.Rk)(),U=J.props.answerSheetVisible,ne=R.size,X=R.marked,V=X===void 0?!0:X,ie=(0,H.Z)(R,be);return U?(0,S.jsx)(L.Z,{title:"\u6807\u8BB0",children:(0,S.jsx)("svg",(0,w.Z)((0,w.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:R.size||24,height:R.size||24,className:"marked"},ie),{},{children:(0,S.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:V?"#EA4942":"#d8d8d8"})}))}):(0,S.jsx)(S.Fragment,{})}),Me=(0,K.Pi)(function(R){var J,U,ne,X=R.id,V=R.name,ie=(0,e.Rk)(),le=ie.answerSheet,me=le.find(function(Ie){return Ie.id===X}),fe=(0,W.H)(),ye=fe==null||(J=fe.project)===null||J===void 0?void 0:J.isAuthenticated,ge=(U=fe.project)===null||U===void 0||(ne=U.setting.examSetting)===null||ne===void 0?void 0:ne.randomSurveyWrong,Le=ie.exerciseMode;return(!Le||!ye||X.length<=10)&&!ge?(0,S.jsx)(S.Fragment,{}):me!=null&&me.favorite?(0,S.jsx)(L.Z,{title:ge?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,S.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){ie.favoriteQuestion({templateId:X,name:V},!1)},children:(0,S.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,S.jsx)(L.Z,{title:ge?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,S.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){ie.favoriteQuestion({templateId:X,name:V})},children:(0,S.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),ce=(0,K.Pi)(function(R){var J=(0,e.Rk)(),U=R.finished,ne=R.id,X=R.marked,V=R.seqNo,ie=R.isCorrect;return(0,S.jsxs)("div",{className:oe()("answer-sheet-item",{marked:X,finished:U,correct:ie===!0,wrong:ie===!1}),onClick:function(){return J.changePageIndex(ne)},children:[V,X&&(0,S.jsx)(ae,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),Ce=(0,K.Pi)(function(){var R=(0,e.Rk)(),J=R.answerSheet;return(0,S.jsx)(S.Fragment,{children:J.filter(function(U){return U.display!=="none"}).map(function(U,ne){return(0,de.createElement)(ce,(0,w.Z)((0,w.Z)({},U),{},{seqNo:ne+1,key:U.id}))})})}),Ee=(0,K.Pi)(function(){var R=(0,e.Rk)(),J=R.answerSheet,U=J.filter(function(V){return V.finished}).length,ne=J.filter(function(V){return!V.finished}).length,X=J.filter(function(V){return V.marked}).length;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,S.jsx)("span",{style:{marginLeft:4},children:U})]}),(0,S.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,S.jsx)("span",{style:{marginLeft:4},children:ne})]}),(0,S.jsxs)("div",{className:"marked",children:[(0,S.jsx)(ae,{size:18}),"\u6807\u8BB0",(0,S.jsx)("span",{style:{marginLeft:4},children:X})]})]})}),Qe=(0,K.Pi)(function(){return(0,S.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,S.jsx)(we,{})]})}),Ne=(0,K.Pi)(function(){var R=(0,e.Rk)(),J=R.props.answerSheetVisible;return J?(0,S.jsxs)("div",{className:"answer-sheet",children:[(0,S.jsx)(Qe,{}),(0,S.jsx)("div",{className:"answer-sheet-content",children:(0,S.jsx)(Ce,{})}),(0,S.jsx)("div",{className:"answer-sheet-footer",children:(0,S.jsx)(Ee,{})}),(0,S.jsx)(Re,{})]}):(0,S.jsx)(S.Fragment,{})})},95771:function(Ze,ve,h){"use strict";h.r(ve),h.d(ve,{default:function(){return Jt}});var k=h(94657),L=h(40807),w=h(78210),H=h(9761),B=h(67294),I=h(54707),P=h(48187),he=h(13525),e=h(85893),W=function(){var n=(0,I.AK)(),l=(0,B.useContext)(L.ZX),o=l.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(he.hl,{html:o.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(he.hl,{html:o.description})})]})},K=function(n){var l=(0,I.AK)();return(0,e.jsx)("div",{className:l+"-body",children:n.children})},G=h(77576),oe=h(12028),pe=h(57663),q=h(71577),de=(0,H.Pi)(function(){var t,n,l=(0,I.AK)("-footer"),o=(0,B.useContext)(L.ZX),a=o.schema,g=o.loading,m=(0,I.Rk)(),c=m.pagination,s=c.current,v=c.pageSize,i=v>1,r=s===1,d=s===v;return(0,e.jsxs)("div",{className:l,children:[d&&(0,e.jsx)("div",{className:l+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(he.hl,{html:a==null||(t=a.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:l+"-pagination",children:[i&&!r&&(0,e.jsx)("div",{children:(0,e.jsx)(q.Z,{type:"primary",block:!0,onClick:function(){return m.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!d&&(0,e.jsx)("div",{children:(0,e.jsx)(q.Z,{type:"primary",block:!0,onClick:function(){return m.handleNext()},children:"\u4E0B\u4E00\u9875"})}),d&&(0,e.jsx)("div",{children:(0,e.jsx)(q.Z,{type:"primary",block:!0,onClick:function(){return m.submit()},loading:g,children:(0,e.jsx)(he.hl,{html:((n=a.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:l+"-pagination-info",children:["\u7B2C",s,"\u9875/\u5171",v,"\u9875"]}),m.autoNextPage>0&&(0,e.jsxs)("div",{style:{color:"#999",display:"flex",alignItems:"center",justifyContent:"center",width:200},children:["\u7B54\u5BF9\u81EA\u52A8\u8DF3\u8F6C\u4E0B\u4E00\u9875",(0,e.jsx)(oe.Z,{style:{marginLeft:5},checked:m.autoNextPage===1,onChange:function(x){x?m.autoNextPage=1:m.autoNextPage=2}})]})]})]})}),S=h(47673),ee=h(28166),Z=h(11849),we=h(77883),je=h(85986),Pe=h(14965),be=h(68318),Re=h(39002),ae=h(68351),Me=h(43358),ce=h(34041),Ce=h(29985),Ee=h(46842),Qe=h(64302),Ne=h(27484),R=h.n(Ne),J=h(33852);R().locale("zh-cn");function U(t,n){if(!!t)return R()(t,n)}var ne=function(n){var l=n.dictCode,o=n.value,a=n.onChange,g=n.style,m=n.bordered,c=n.className,s=n.parentValue,v=n.cascaderLevel,i=v===void 0?1:v,r=(0,I.Al)(),d=(0,B.useState)([]),u=(0,k.Z)(d,2),x=u[0],f=u[1],j=(0,I.zE)(function(A){i&&i>1&&!s||r.onDictSearch&&r.onDictSearch({dictCode:l,searchValue:A,parentValue:s==null?void 0:s.split("|")[0],cascaderLevel:i}).then(function(C){f(C||[])})},2);return(0,B.useEffect)(function(){i&&i>1&&(s?j(void 0):f([]))},[s,i]),(0,B.useEffect)(function(){!o&&i<=1&&l&&j(void 0),o&&x.length===0&&j(o)},[o]),(0,e.jsx)(ce.Z,{options:x,showSearch:!0,filterOption:function(C,E){var y;return((y=E==null?void 0:E.label)!==null&&y!==void 0?y:"").includes(C)},value:o==null?void 0:o.split("|")[0],onChange:function(C){if(C===void 0)a(void 0);else{var E;a("".concat(C,"|").concat((E=x.find(function(y){return y.value===C}))===null||E===void 0?void 0:E.label))}},style:g,bordered:m,dropdownClassName:c,allowClear:!0})};function X(t,n){return n||(t==="date"?"YYYY-MM-DD":t==="dateTime"?"YYYY-MM-DD HH:mm:ss":t==="time"?"HH:mm:ss":"YYYY-MM-DD")}function V(t){return t?t==="YYYY"?"year":t==="YYYY-MM"?"month":"date":"date"}var ie=function(n){var l=n.onChange,o=n.type,a=n.value,g=n.style,m=g===void 0?{width:"100%"}:g,c=n.className,s=n.readOnly,v=n.bordered,i=X(o,n.dateTimeFormat);return i.startsWith("HH")?(0,e.jsx)(ae.Z,{value:U(a,i),format:i,onChange:function(d,u){return l(u)},style:m,className:c,disabled:s,bordered:v}):(0,e.jsx)(be.Z,{onChange:function(d,u){l(u)},disabled:s,format:i,picker:V(i),showTime:i.includes("HH")||i.includes("mm")||i.includes("ss"),showSecond:i.includes("ss"),showMinute:i.includes("mm"),showHour:i.includes("HH"),value:U(a,i),style:m,className:c,bordered:v})},le=function(n){var l,o=n.onChange,a=n.type,g=n.value,m=n.suffix,c=n.style,s=c===void 0?{width:"100%"}:c,v=n.className,i=n.dictCode,r=n.onBlur,d=r===void 0?function(){}:r,u=n.bordered,x=n.parentValue,f=n.cascaderLevel,j=n.icon,A=j===void 0?!0:j,C=n.readOnly,E=C===void 0?!1:C,y=n.schema,Q=n.placeholder,b=Q===void 0?y==null||(l=y.attribute)===null||l===void 0?void 0:l.placeholder:Q;return a==="horzBlank"?(0,e.jsx)(e.Fragment,{}):a==="selectDict"&&i?(0,e.jsx)(ne,{value:g,onChange:o,dictCode:i,style:s,bordered:u,className:v,parentValue:x,cascaderLevel:f}):a==="select"&&y!==null&&y!==void 0&&y.dataSource?(0,e.jsx)(ce.Z,{options:y.dataSource,style:{width:200},bordered:u,onChange:o,placeholder:b}):a==="number"?(0,e.jsx)(je.Z,{className:v,onChange:o,onBlur:function(p){var M=p.target.value;d(M===""?void 0:parseFloat(M))},value:g,style:s,addonAfter:m,readOnly:E,bordered:u,placeholder:b}):a==="date"||a==="dateTime"||a==="time"?(0,e.jsx)(ie,(0,Z.Z)({},n)):a==="mobile"?(0,e.jsx)(ee.Z,{prefix:A?(0,e.jsx)(Ce.Z,{}):void 0,onChange:function(p){return o(p.target.value)},value:g,className:v,onBlur:function(p){return d(p.target.value)},bordered:u,readOnly:E,placeholder:b}):a==="idCard"?(0,e.jsx)(ee.Z,{prefix:A?(0,e.jsx)(Ee.Z,{}):void 0,onChange:function(p){return o(p.target.value)},value:g,style:s,className:v,onBlur:function(p){return d(p.target.value)},bordered:u,readOnly:E,placeholder:b}):a==="email"?(0,e.jsx)(ee.Z,{prefix:A?(0,e.jsx)(Qe.Z,{}):void 0,onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,style:s,className:v,bordered:u,readOnly:E,placeholder:b}):a==="password"?(0,e.jsx)(ee.Z.Password,{onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,suffix:m,style:s,className:v,bordered:u,readOnly:E,placeholder:b||"\u8BF7\u8F93\u5165\u5BC6\u7801"}):(0,e.jsx)(ee.Z,{onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,suffix:m,style:s,className:v,bordered:u,readOnly:E,placeholder:b})},me=h(49111),fe=h(19650),ye=h(17672),ge=function(n){var l=n.onChange,o=(0,B.useRef)(null),a=(0,B.useRef)(),g=(0,B.useRef)(),m=(0,B.useState)(0),c=(0,k.Z)(m,2),s=c[0],v=c[1];return(0,B.useEffect)(function(){var i=o.current;if(i){var r,d=new ye.Z(o.current);d.addEventListener("beginStroke",function(){v(1)}),a.current=d;var u=Math.max(window.devicePixelRatio||1,1);i.width=i.offsetWidth*u,i.height=i.offsetHeight*u,(r=i.getContext("2d"))===null||r===void 0||r.scale(u,u)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:g.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:o,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:s!==2?"block":"none"}}),s===2&&(0,e.jsx)("img",{src:g.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(fe.Z,{children:[s===1&&(0,e.jsx)(q.Z,{type:"link",onClick:function(){var r;(r=a.current)===null||r===void 0||r.clear(),v(0)},children:"\u6E05\u7A7A"}),(s===0||s===1)&&(0,e.jsx)(q.Z,{type:"primary",disabled:s!==1,ghost:!0,size:"small",onClick:function(){var r;l(a.current.toDataURL()),g.current=(r=a.current)===null||r===void 0?void 0:r.toDataURL(),v(2)},children:"\u5B8C\u6210"}),s===2&&(0,e.jsx)(q.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var r;v(0),(r=a.current)===null||r===void 0||r.clear()},children:"\u91CD\u7B7E"})]})})]})]})},Le=h(3024),Ie=(0,H.Pi)(function(){var t=(0,B.useContext)(L.ZX),n=t.progressBar,l=(0,I.AK)(),o=(0,I.Rk)(),a=o.progress;return n?(0,e.jsx)(Le.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:l+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),$e=function(n){var l,o=n.optionId,a=n.questionId,g=n.checked,m=n.checkedCount,c=n.quota,s=n.statEnabled,v=(0,I.Al)(),i=v.statistics,r=i==null?void 0:i.questionStatistics[a],d=((r==null?void 0:r.optionStatistics.reduce(function(j,A){return j+A.count},0))||0)+m,u=(r==null||(l=r.optionStatistics.find(function(j){return j.optionId===o}))===null||l===void 0?void 0:l.count)||0,x=g?u+1:u,f="".concat(Math.floor(x/d*1e3)/10,"%");return!s&&c===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[c&&(0,e.jsxs)("span",{className:"vote-info-cnt",style:{color:c-u>0?"#1890ff":"#949aae"},children:["(\u4F59",c-u,")"]}),s&&m>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[x,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:f}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:f}})})]})]})},He=function(n){var l=n.schema,o=n.type,a=l.attribute,g=a===void 0?{}:a,m=g.examCorrectAnswer,c=(0,I.Al)(),s=c.correctAnswerVisible,v=c.mode;return m&&s&&v==="exam"?o==="FillBlank"||o==="HorzBlank"||o==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:m}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Yt=function(n){var l=n.schema,o=l.attribute,a=o===void 0?{}:o,g=a.examScore,m=useSurvey(),c=m.mode,s=m.examScoreVisible;return g&&c==="exam"&&s?_jsxs("span",{className:"question-score",children:["\uFF08",g,"\u5206\uFF09"]}):_jsx(_Fragment,{})},hn=(0,H.Pi)(function(t){var n=(0,I.Rk)(),l=n.reviewAnswer[t.qId];return l&&!l.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){l.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),$t=h(63185),Fe=h(9676),fn=h(36862),mn=h(46533),gn=h(94184),Be=h.n(gn),Wt=h(12968),xn=h(20352),An=h(91220),We=h(15020);function Ge(t,n,l,o){if(!t)return"";var a=RegExp("_{3,}","g"),g=t.matchAll(a),m=[],c=(0,An.Z)(g),s;try{for(c.s();!(s=c.n()).done;){var v=s.value,i=v.index,r=v.index+v[0].length;m.push([i,r])}}catch(f){c.e(f)}finally{c.f()}if(m.length===0)return t;for(var d=m[0][0]===0?"":t.substring(0,m[0][0]),u=function(j){var A,C,E=m[j],y=m[j+1],Q=t.substring(E[0],E[1]),b=t.substring(E[1],y?y[0]:t.length),N=n[j],p=l?l[N.id]:"";if(((A=N.attribute)===null||A===void 0?void 0:A.dataType)==="select"){var M,D;p=(M=N.dataSource)===null||M===void 0||(D=M.find(function(O){return O.value===p}))===null||D===void 0?void 0:D.label}else if(((C=N.attribute)===null||C===void 0?void 0:C.dataType)==="selectDict"){var F,T;p=(F=p)===null||F===void 0||(T=F.split("|"))===null||T===void 0?void 0:T[1]}d+='<input data-id="'.concat(n[j].id,`" value='`).concat(p||"",`'  class="horz-blank" style="width:`).concat(12*Q.length,'px">'),d+=b},x=0;x<m.length;x++)u(x);return d}var De=(0,H.Pi)(function(t){var n=t.content,l=t.children,o=t.value,a=o===void 0?{}:o,g=t.onChange,m=t.onBlur,c=t.schema,s=(0,I.Rk)(),v=s.reviewAnswer[c.id];function i(r,d){var u,x;if(a[r]!==d){a[r]=d;var f=l.find(function(E){return E.id===r}),j=f==null||(u=f.attribute)===null||u===void 0?void 0:u.cascaderLevel,A=f==null||(x=f.attribute)===null||x===void 0?void 0:x.dictCode;A&&j&&l.filter(function(E){var y;return((y=E.attribute)===null||y===void 0?void 0:y.dictCode)===A&&E.attribute.cascaderLevel&&E.attribute.cascaderLevel>j}).forEach(function(E){delete a[E.id]}),(d===""||d===void 0)&&delete a[r];var C=(0,Z.Z)({},a);if(Object.keys(C).length!==0)return C}}return(0,e.jsx)("div",{className:"pe-view",onClick:function(d){d.preventDefault(),d.stopPropagation()},children:(0,We.ZP)(Ge(n,l),{replace:function(d){if((d==null?void 0:d.name)==="img"){var u=d.attribs.width;return(0,e.jsx)(xn.Z,{width:u?parseFloat(u):void 0,src:d.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}var x=d.attribs;if(!!x){var f=x["data-id"];if(f){var j,A,C,E,y,Q=(0,We.e_)(x),b=l.findIndex(function(Y){return Y.id===f}),N=l[b],p=(j=l[b-1])===null||j===void 0?void 0:j.id,M=a[p],D=(N==null||(A=N.attribute)===null||A===void 0?void 0:A.dataType)||"text",F=N==null||(C=N.attribute)===null||C===void 0?void 0:C.dictCode,T=N==null||(E=N.attribute)===null||E===void 0?void 0:E.dateTimeFormat,O=(y=N.attribute)===null||y===void 0?void 0:y.cascaderLevel,z=v==null?void 0:v[f].isCorrect,_=Be()(Q.className,{selected:v&&v.visible,"is-correct":v&&v.visible&&z});return(0,e.jsx)(le,(0,Z.Z)((0,Z.Z)({type:D,value:a[f],parentValue:M,schema:N,cascaderLevel:O,onChange:function($){return g(i(f,$))},onBlur:function($){return m(i(f,$))},dictCode:F,dateTimeFormat:T,bordered:!1,icon:!1},Q),{},{className:_}))}}}})})}),jn=(0,H.Pi)(function(t){var n=t.qId,l=t.schema,o=t.checked,a=t.onChange,g=t.value,m=t.onBlur,c=t.disabled,s=l.id,v=l.title,i=l.attribute,r=i===void 0?{}:i,d=(0,I.Rk)(),u=d.reviewAnswer[n],x=u==null?void 0:u[s].selected,f=u==null?void 0:u[s].isCorrect,j=r.dataType;return u&&u.visible&&(x||f)?(0,e.jsxs)("label",{className:Be()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:x,"is-correct":f}),onClick:function(){return a(!o)},children:[(0,e.jsxs)("span",{children:[!f&&(0,e.jsx)(fn.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),f&&(0,e.jsx)(mn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(w.Z,{html:v})})]}):(0,e.jsxs)(Fe.Z,{value:s,checked:o,onChange:function(C){return a(C.target.checked)},disabled:c,children:[j==="horzBlank"&&l.children?(0,e.jsx)(De,{content:v,children:l.children,value:g,schema:l,onBlur:m,onChange:function(C){return a(!0,C)}}):(0,e.jsx)(w.Z,{html:v}),(0,e.jsx)(He,{schema:t.schema})]})}),Gt=h(88983),Te=h(66253),Ve=h(8913),Xe=h(38819),Cn=h(91508),En=(0,H.Pi)(function(t){var n=t.qId,l=t.schema,o=t.onBlur,a=t.onChange,g=t.value,m=t.disabled,c=l.id,s=l.title,v=l.attribute,i=(0,I.Rk)(),r=i.reviewAnswer[n],d=r==null?void 0:r[c].selected,u=r==null?void 0:r[c].isCorrect,x=B.useContext(Cn.ZP),f=v==null?void 0:v.dataType;return r&&r.visible&&(d||u)?(0,e.jsxs)("label",{className:Be()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:d,"is-correct":u}),onClick:function(){var A;m||x==null||(A=x.onChange)===null||A===void 0||A.call(x,{target:{value:c}})},children:[(0,e.jsxs)("span",{children:[!u&&(0,e.jsx)(Ve.Z,{style:{color:"#ff6d56",marginRight:10}}),u&&(0,e.jsx)(Xe.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(w.Z,{html:s})})]}):(0,e.jsxs)(Te.ZP,{value:c,className:"radio-item",disabled:m,children:[f==="horzBlank"&&l.children?(0,e.jsx)(De,{schema:l,content:s,children:l.children,value:typeof g=="boolean"?{}:g,onBlur:o,onChange:a}):(0,e.jsx)(w.Z,{html:s}),(0,e.jsx)(He,{schema:t.schema})]})}),yn=(0,H.Pi)(function(t){var n=t.schema,l=t.value,o=t.onChange,a=t.qId,g=t.onBlur,m=(0,I.AK)("-body-question"),c=n.id,s=n.attribute,v=s==null?void 0:s.suffix,i=s==null?void 0:s.dataType,r=s==null?void 0:s.dictCode,d=s==null?void 0:s.dateTimeFormat,u=s==null?void 0:s.readOnly,x=(0,I.Rk)(),f=x.reviewAnswer[a],j=f==null?void 0:f[c].isCorrect;return f&&f.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!j&&(0,e.jsx)(Ve.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),j&&(0,e.jsx)(Xe.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(le,{type:i,value:l[c],readOnly:u,schema:n,className:Be()("selected",{"is-correct":j}),onChange:function(C){return o(C)},onBlur:g,style:{paddingLeft:20},suffix:v&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(w.Z,{html:v})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le,{type:i,value:l[c],onChange:function(C){return o(C)},onBlur:g,schema:n,readOnly:u,dictCode:r,dateTimeFormat:d,suffix:v&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(w.Z,{html:v})})})})}),Vt=h(65011),Xt=h(48736),qt=h(402),qe=h(20294),Bn=ce.Z.Option,Oe=qe.Z.Text,_t=function(n){var l=n.onChange,o=n.form,a=n.record,g=useState(n.value),m=_slicedToArray(g,2),c=m[0],s=m[1],v=useState(n.value),i=_slicedToArray(v,2),r=i[0],d=i[1];useEffect(function(){d(n.value)},[n.value]);var u=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),x=_slicedToArray(u,2),f=x[0],j=x[1],A=useThrottleCallback(function(C){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:r,dropdownMatchSelectWidth:!1,onBlur:function(){d(c),c?l==null||l(c):l==null||l(void 0)},onSelect:function(E){s(E),d(E)},allowClear:!0,onClear:function(){s(void 0),d(void 0),l==null||l(void 0)},onSearch:function(E){d(E),A(E)},dropdownRender:function(E){return _jsxs(_Fragment,{children:[E,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(Oe,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(Oe,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:f.map(function(C){return _jsxs(Bn,{value:C.drugName,children:[_jsxs(Oe,{children:[" ",C.drugName]}),_jsxs(Oe,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",C.chemicalName,"-",C.stCompName,")"]})]},C.id)})})},Zn=(0,H.Pi)(function(t){var n,l=t.schema,o=t.title,a=t.onBlur,g=t.onChange,m=l.type,c=((n=l.children)===null||n===void 0?void 0:n.filter(function(i){var r;return(r=i.attribute)===null||r===void 0?void 0:r.fieldInTitle}))||[],s=(0,H.U$)(),v=s.value;return m!=="HorzBlank"||c.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(w.Z,{html:o})}):(0,e.jsx)(De,{schema:l,children:c,content:o,onChange:g,onBlur:a,value:v})}),pn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),bn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),Qn=(0,H.Pi)(function(t){var n,l=t.schema,o=t.seqNo,a=o===void 0?0:o,g=(0,I.Rk)(),m=g.props.correctAnswerVisible,c=g.props.questionScore,s=(n=l.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!m||!c||s==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",a,"\u9898"]}),c[l.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",c[l.id],"\u5206"]}),bn]}):pn]})}),ea=h(71194),Nn=h(50146);function _e(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var In=function(n){var l=n.onChange,o=n.value,a=n.mapMove,g=a===void 0?!1:a,m=n.optionId,c=(0,B.useRef)(null),s=(0,B.useRef)(),v=(0,B.useRef)(),i=(0,B.useRef)(),r=(0,B.useState)(function(){if(!!o){var p=o.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(p&&p.length>2)return[parseFloat(p[1]),parseFloat(p[2])]}}),d=(0,k.Z)(r,2),u=d[0],x=d[1],f=(0,B.useState)(function(){return _e(o)}),j=(0,k.Z)(f,2),A=j[0],C=j[1],E=(0,B.useState)(!1),y=(0,k.Z)(E,2),Q=y[0],b=y[1],N=(0,B.useCallback)(function(p){v.current.getLocation(p,function(M,D){if(M==="complete"&&D.geocodes.length){var F=D.geocodes[0].location;i.current.start(F)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,B.useEffect)(function(){if(!!Q){window["localMap".concat(m)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(T){var O=new AMap.Map("map-".concat(m),{zoom:16,center:u,dragEnable:g,zoomEnable:g});if(s.current=O,g){var z=new T({mode:"dragMarker",map:O});z.on("success",function($){C($.address),x([$.position.lng,$.position.lat])}),u?z.start(u):z.start(),O.panBy(0,1),i.current=z}var _=new AMap.Geocoder({city:"010"});v.current=_;var Y=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});Y.getCurrentPosition(function($,re){$=="complete"?(O.setCenter(re.position),C(re.formattedAddress),x([re.position.lng,re.position.lat])):console.error(re)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var p="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(m,"&plugin=AMap.Geocoder,AMap.Geolocation"),M=document.createElement("script");M.src=p,document.head.appendChild(M);var D="https://webapi.amap.com/ui/1.1/main-async.js",F=document.createElement("script");F.src=D,document.head.appendChild(F)}},[Q]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(ee.Z.TextArea,{readOnly:!0,value:_e(o),onClick:function(){return b(!0)}}),(0,e.jsxs)(Nn.Z,{open:Q,onCancel:function(){b(!1)},onOk:function(){u&&l("".concat(A,"[").concat(u[0],", ").concat(u[1],"]")),b(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:g&&(0,e.jsx)(ee.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(M){return N(M)}})}),(0,e.jsx)("div",{ref:c,id:"map-".concat(m),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:A})]})]})},Sn=(0,H.Pi)(function(t){var n,l,o=t.qId,a=t.schema,g=(0,I.Rk)(),m=g.reviewAnswer[o],c=(n=a.children)===null||n===void 0?void 0:n.map(function(r){var d;return(d=r.attribute)===null||d===void 0?void 0:d.examCorrectAnswer}).filter(function(r){return r}).join(";"),s=c&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(a.type),v=function(){return s?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:c})]}):(0,e.jsx)(e.Fragment,{})},i=function(){var d;if((d=a.attribute)!==null&&d!==void 0&&d.examAnalysis){var u;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(w.Z,{html:(u=a.attribute)===null||u===void 0?void 0:u.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return m&&m.visible&&((l=a.attribute)!==null&&l!==void 0&&l.examAnalysis||s)?(0,e.jsxs)("div",{className:"answer-analysis",children:[v(),i()]}):(0,e.jsx)(e.Fragment,{})}),Ke=h(76898),en=h(28991),wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"},Pn=wn,Rn=h(27029),Mn=function(n,l){return B.createElement(Rn.Z,(0,en.Z)((0,en.Z)({},n),{},{ref:l,icon:Pn}))},Fn=B.forwardRef(Mn),Dn=Fn,Tn=qe.Z.Paragraph,On=(0,H.Pi)(function(t){var n=t.qId,l=t.schema,o=(0,I.Rk)(),a=o.lazy,g=(0,H.cI)(),m=g.getFieldState(n,function(c){var s;return(s=c.componentProps)===null||s===void 0?void 0:s.note});return a?(0,e.jsx)("div",{className:"answer-note",children:(0,e.jsx)(Tn,{title:"\u6DFB\u52A0\u7B14\u8BB0",editable:{icon:(0,e.jsx)(Dn,{}),triggerType:["icon","text"],tooltip:"\u70B9\u51FB\u7F16\u8F91\u7B14\u8BB0",onChange:function(s){var v,i;(v=o.props)===null||v===void 0||(i=v.onNote)===null||i===void 0||i.call(v,n,s),g.setFieldState(n,function(r){return r.componentProps.note=s})}},children:m})}):(0,e.jsx)(e.Fragment,{})});function kn(t){var n=t.schema,l=t.required,o=t.error,a=t.replaceTitle,g=t.seqNo,m=t.onBlur,c=t.onChange,s=t.onFocus,v=(0,B.useContext)(L.ZX),i=v.questionNumber,r=v.requiredVisible,d=(0,I.AK)("-body-question"),u=(0,B.useState)(),x=(0,k.Z)(u,2),f=x[0],j=x[1],A=n.description,C=(0,I.Rk)(),E=C.answerSheet.find(function(b){return b.id===n.id}),y=E==null?void 0:E.marked;(0,B.useEffect)(function(){if(f){var b,N;(b=document.querySelector("[data-id='".concat(n.id,"']")))===null||b===void 0||b.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(n.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(z){z.classList.remove("ant-form-item-has-error")})}if(o.length>0){var p,M=o[0].split("^"),D=(0,k.Z)(M,2),F=D[0],T=D[1],O;T?(O=document.querySelector("[data-id='".concat(F,"']")),j(T)):(O=document.querySelector("[data-id='".concat(n.id,"']")),j(F)),(p=O)===null||p===void 0||p.classList.add("ant-form-item-has-error")}else f&&j(void 0)},[o]);var Q=function(){return f?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:f})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:d,children:[(0,e.jsx)("div",{className:"".concat(d,"-head"),children:(0,e.jsxs)("span",{className:d+"-header",children:[(0,e.jsx)(Qn,{schema:n,seqNo:g}),(0,e.jsxs)("h2",{className:d+"-header-title",children:[i&&(0,e.jsx)("span",{className:d+"-header-title-seq",children:(0,e.jsx)("b",{children:i&&g?g:""})}),l&&r&&(0,e.jsx)("span",{className:d+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:d+"-header-title-text",children:(0,e.jsx)(Zn,{schema:n,title:a||n.title,onBlur:m,onChange:c,onFocus:s})}),Q(),g&&(0,e.jsx)(Ke.M2,{marked:y,onClick:function(){C.markQuestion(n.id,!y)}}),(0,e.jsx)(Ke.rF,{id:n.id,name:n.title})]}),A&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(w.Z,{html:A})})]})}),(0,e.jsxs)("div",{className:"".concat(d,"-body"),children:[t.children,(0,e.jsx)(hn,{qId:n.id}),(0,e.jsx)(Sn,{qId:n.id,schema:n}),(0,e.jsx)(On,{qId:n.id,schema:n})]})]})}(0,P.eC)("Question",(0,H.Pi)(kn),"antd");function zn(t){var n=t.schema,l=t.index,o=t.seqNo,a=(0,I.AK)("-body-questionSet"),g=(0,B.useContext)(L.ZX),m=g.questionNumber;return(0,e.jsxs)("div",{className:a,children:[(0,e.jsxs)("div",{className:a+"-title",children:[m&&(0,e.jsx)("span",{className:a+"-title-seq",children:(0,e.jsx)("b",{children:m?o:""})}),(0,e.jsx)(w.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:a+"-splitLine"})]})}(0,P.eC)("QuestionSet",zn,"antd");var na=h(84305),Ln=h(88182),Hn=h(82925);R().locale("zh-cn");function Kn(t){var n=t.headerVisible,l=t.footerVisible,o=t.schema,a=(0,I.AK)(),g=(0,I.Al)(),m=function(){var s,v=(s=o.attribute)===null||s===void 0?void 0:s.headerImage;if(v)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(v),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Be()(a,{preview:g.isPreview}),children:[(0,e.jsx)(Ie,{}),(0,e.jsx)("div",{className:a+"-banner",children:m()}),n&&(0,e.jsx)(W,{}),(0,e.jsx)(Ln.ZP,{locale:Hn.Z,children:(0,e.jsx)(K,{children:t.children})}),l&&(0,e.jsx)(de,{}),(0,e.jsx)(Ke.Ff,{})]})}(0,P.eC)("Survey",Kn,"antd");var ta=h(13062),ue=h(71230),aa=h(89032),se=h(15746),te=h(32059);function Un(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children;function m(c,s){l((0,te.Z)({},s,c))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(c){var s=c.id,v=c.title,i=c.attribute,r=i===void 0?{}:i,d=r.mapMove;return(0,e.jsxs)(ue.Z,{gutter:[10,0],"data-id":s,children:[v&&(0,e.jsx)(se.Z,{span:24},c.id),(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(In,{optionId:s,onChange:function(x){return m(x,s)},value:a[s],mapMove:d})})]},s)})})}(0,P.RM)("Address",Un,"antd");var ra=h(43185),ke=h(32620),ia=h(34792),nn=h(48086),ze=h(39428),tn=h(3182),Jn=h(81473);function Yn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.readOnly,m=n.children,c=m===void 0?[]:m,s=(0,I.Al)(),v=function(){var i=(0,tn.Z)((0,ze.Z)().mark(function r(d){var u,x,f,j;return(0,ze.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:u=d.onSuccess,x=d.onError,f=d.file,j=d.onProgress,s.onUpload&&s.onUpload({file:f,fileType:6},function(E){j&&j({percent:E.loaded/E.total*100})}).then(function(E){if(E.success&&u&&(u(E.data),E.data.content&&l((0,te.Z)({},c[0].id,E.data.content))),!E.success&&x){var y=new Error("Some error");x({event:y})}});case 2:case"end":return C.stop()}},r)}));return function(d){return i.apply(this,arguments)}}();return(0,e.jsx)("div",{children:c==null?void 0:c.map(function(i){var r=i.id,d=i.attribute,u=d===void 0?{}:d,x=u.cameraOnly;return(0,e.jsx)(ue.Z,{style:{marginBottom:10},"data-id":r,children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(ee.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:a[r],addonAfter:(0,e.jsx)(ke.Z,{accept:"image/*",capture:x?"environment":void 0,disabled:g,maxCount:1,beforeUpload:function(j){return u!=null&&u.maxFileSize&&j.size>u.maxFileSize*1024*1024?(nn.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(u.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:v,showUploadList:!1,children:(0,e.jsx)(Jn.Z,{})},r)})})},r)})})}(0,P.RM)("Barcode",Yn,"antd");var la=h(36877),$n=h(18480);function Wn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function c(s){var v={};s.forEach(function(i,r){var d=m[r].id;v[d]=i}),l(v)}return(0,e.jsx)(ue.Z,{children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)($n.Z,{value:m.map(function(s){return a[s.id]}).filter(function(s){return s}),style:{width:260},options:n.dataSource,onChange:c,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,P.RM)("Cascader",Wn,"antd");function Gn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,c=n.attribute,s=24/((c==null?void 0:c.columns)||1),v=(0,I.AK)("-body-question"),i=!!(c!=null&&c.statEnabled),r=(0,I.Al)(),d=(0,I.Rk)(),u=d.hiddenOption[n.id]||[];(0,B.useEffect)(function(){var f=Object.keys(a),j=!1;f.forEach(function(A){u.includes(A)&&(j=!0,delete a[A])}),j&&l((0,Z.Z)({},a))},[u]);function x(f,j,A){return j?a[f]=A||!0:delete a[f],(0,Z.Z)({},a)}return(0,B.useEffect)(function(){m==null||m.forEach(function(f){var j;(j=f.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},f.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ue.Z,{children:m==null?void 0:m.filter(function(f){return!u.includes(f.id)}).map(function(f){var j,A,C,E,y=f.id,Q=(j=f.attribute)===null||j===void 0?void 0:j.dataType,b=(A=f.attribute)===null||A===void 0?void 0:A.suffix,N=(C=f.attribute)===null||C===void 0?void 0:C.readOnly,p=(E=f.attribute)===null||E===void 0?void 0:E.quota,M=!1;if(p!==void 0){var D,F=r.statistics,T=F==null?void 0:F.questionStatistics[n.id],O=(T==null||(D=T.optionStatistics.find(function(_){return _.optionId===y}))===null||D===void 0?void 0:D.count)||0,z=p-O;z<=0&&(M=!0)}return(0,e.jsxs)(se.Z,{span:s,className:v+"-option","data-id":y,children:[(0,e.jsx)(jn,{disabled:M,qId:n.id,schema:f,checked:a.hasOwnProperty(y),onChange:function(Y,$){M||l(x(y,Y,$))},value:typeof a[y]=="boolean"?{}:a[y],onBlur:g}),(0,e.jsx)($e,{statEnabled:i,quota:p,checked:!!a[y],optionId:y,questionId:n.id,checkedCount:Object.keys(a).length}),Q&&(0,e.jsx)(le,{value:typeof a[y]=="boolean"?"":a[y],style:{maxWidth:200},type:Q,onChange:function(Y){return l(x(y,!0,Y))},onBlur:function(Y){return g(x(y,!0,Y))},readOnly:N,suffix:b&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(w.Z,{html:b})})})]},y)})})})}(0,P.RM)("Checkbox",(0,H.Pi)(Gn),"antd");var sa=h(71153),an=h(60331),oa=h(62999),Vn=h(54680),xe=h(3980),Xn=h(60780),qn=h.n(Xn);function _n(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=m[0].id,s=(0,B.useState)([]),v=(0,k.Z)(s,2),i=v[0],r=v[1];function d(x){c&&((x==null?void 0:x.length)===0?l(void 0):l((0,te.Z)({},c,x==null?void 0:x.map(function(f){return f.value}))))}var u=(0,B.useMemo)(function(){return qn()(i.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[i]);return(0,B.useEffect)(function(){xe.hi.selectDept({}).then(function(x){x.success&&r(x.data)})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(Vn.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[c]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:u,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:d,showSearch:!1})})})}var et=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,c=m[0].id,s=(0,B.useState)([]),v=(0,k.Z)(s,2),i=v[0],r=v[1];return(0,B.useEffect)(function(){xe.hi.selectDept({selected:a[c]||[],name:"^_^"}).then(function(d){d.success&&r(d.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(fe.Z,{children:i.map(function(d){return(0,e.jsx)(an.Z,{color:"blue",children:d.name},d.id)})})})};(0,P.RM)("Dept",_n,"antd"),(0,P.cf)("Dept",et,"antd");function rn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,c=(0,I.AK)("-body-question");function s(i,r){a[i]=r,r===""&&delete a[i],l((0,Z.Z)({},a),i)}function v(i,r){a[i]=r,r===""&&delete a[i],g((0,Z.Z)({},a),i)}return(0,e.jsx)("div",{children:m==null?void 0:m.map(function(i){var r=i.id,d=i.title;return(0,e.jsxs)(ue.Z,{style:{marginBottom:10},"data-id":r,children:[d&&(0,e.jsx)(se.Z,{className:c+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:c+"-option-title",children:(0,e.jsx)(w.Z,{html:i.title})})},i.id),(0,e.jsxs)(se.Z,{span:12,className:c+"-option",children:[(0,e.jsx)(yn,{qId:n.id,schema:i,value:a,onChange:function(x){return s(r,x)},onBlur:function(x){return v(r,x)}}),(0,e.jsx)(He,{schema:i,type:n.type})]})]},r)})})}(0,P.RM)("FillBlank",rn,"antd"),(0,P.RM)("MultipleBlank",rn,"antd");function nt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,c=n.attribute,s=c===void 0?{}:c,v=s.content;return!v||!m?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(De,{schema:n,children:m.filter(function(i){var r;return!((r=i.attribute)!==null&&r!==void 0&&r.fieldInTitle)}),content:v,onBlur:g,onChange:l,value:a})}var tt=function(n){var l=n.schema,o=n.value,a=l.children,g=l.attribute,m=g===void 0?{}:g,c=m.content;return(0,e.jsx)("div",{className:"preview pe-view",children:(0,e.jsx)(w.Z,{html:Ge(c,a,o),replaceP:!1},Math.random())})};(0,P.RM)("HorzBlank",nt,"antd"),(0,P.cf)("HorzBlank",tt,"antd");var Ue=h(83279),Ae=h(79521),at=h(54121),rt=function(n){var l=(0,xe.XI)(200),o=(0,k.Z)(l,2),a=o[0],g=o[1],m=(0,xe.XI)(200),c=(0,k.Z)(m,2),s=c[0],v=c[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:a,children:[n.cells.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(i.column.id),children:i.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:s,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(at.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:g||v?"visible":"hidden"}})})]}))};function ln(t){var n=t.columns,l=t.data,o=t.onAdd,a=t.onDelete,g=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),m=(0,Ae.useTable)({columns:n,data:l,defaultColumn:g},Ae.useBlockLayout),c=m.getTableProps,s=m.getTableBodyProps,v=m.headerGroups,i=m.rows,r=m.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},c()),{},{className:"table",children:[(0,e.jsx)("div",{children:v.map(function(d){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},d.getHeaderGroupProps()),{},{className:"tr",children:d.headers.map(function(u){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},s()),{},{children:i.map(function(d,u){return r(d),(0,B.createElement)(rt,(0,Z.Z)((0,Z.Z)({},d),{},{key:u,i:u,onDelete:a?function(){return a(u)}:void 0}))})})),o&&(0,e.jsx)("div",{className:"footer",onClick:o,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function it(t){var n,l=t.schema,o=t.onChange,a=t.value||[{}],g=l.children,m=g===void 0?[]:g,c=(0,L.Ck)((n=l.attribute)===null||n===void 0?void 0:n.scope,[1,999]),s=(0,B.useMemo)(function(){return m.map(function(v){var i;return{Header:(0,e.jsx)(w.Z,{html:v.title}),width:(i=v.attribute)===null||i===void 0?void 0:i.width,accessor:v.id,Cell:function(d){var u,x=d.value,f=d.row,j=d.data;if(((u=v.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var A;return(0,e.jsx)(ce.Z,{placeholder:"\u8BF7\u9009\u62E9",value:x,style:{width:"100%"},onChange:function(Q){j[f.index][v.id]=Q},options:((A=v.dataSource)===null||A===void 0?void 0:A.map(function(y){return{label:y.label,value:y.value}}))||[]})}else{var C,E;return(0,e.jsx)(le,{schema:v,type:(C=v.attribute)===null||C===void 0?void 0:C.dataType,dictCode:(E=v.attribute)===null||E===void 0?void 0:E.dictCode,onBlur:function(){},value:x,onChange:function(Q){j[f.index][v.id]=Q,o((0,Ue.Z)(j))}})}}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(ln,{columns:s,data:a,onAdd:a.length<c[2]?function(){a.push({}),o((0,Ue.Z)(a))}:void 0,onDelete:function(i){a.splice(i,1),o((0,Ue.Z)(a))}})})}var lt=function(n){var l=n.schema,o=n.value||[{},{}],a=l.children,g=a===void 0?[]:a,m=(0,B.useMemo)(function(){return g.map(function(c){var s;return{Header:(0,e.jsx)(w.Z,{html:c.title}),width:(s=c.attribute)===null||s===void 0?void 0:s.width,accessor:c.id,Cell:function(i){var r,d=i.value,u=i.row,x=i.data;if(((r=c.attribute)===null||r===void 0?void 0:r.dataType)==="select"){var f,j,A=((f=c.dataSource)===null||f===void 0||(j=f.find(function(C){return C.value===d}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:A})}else return(0,e.jsx)("span",{children:d})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(ln,{columns:m,data:o})})};(0,P.RM)("MatrixAuto",it,"antd"),(0,P.cf)("MatrixAuto",lt,"antd");var Se=h(93224),st=["title","rowId"],ot=["title","rowId"];function sn(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,c=a.headerGroups,s=a.rows,v=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function dt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=n.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A,C=j.value,E=j.row,y=j.data,Q=(A=u.attribute)===null||A===void 0?void 0:A.dataType;return(0,e.jsxs)("div",{onClick:function(N){var p=!C,M={};y.forEach(function(D,F){var T=D.title,O=D.rowId,z=(0,Se.Z)(D,st);E.index===F&&(p?z[u.id]=!0:delete z[u.id]),M[O]=z}),l(M)},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(Fe.Z,{checked:!!C}),Q?(0,e.jsx)(le,{type:Q,style:{width:120,marginLeft:5},value:C===!0?"":C,onChange:function(N){var p={};y.forEach(function(M,D){var F=M.title,T=M.rowId,O=(0,Se.Z)(M,ot);E.index===D&&(O[u.id]=N),p[T]=O}),l(p)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(sn,{columns:v,data:i})})}var ut=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,c=l.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return A?(0,e.jsx)("div",{children:(0,e.jsx)(Fe.Z,{checked:!!A,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=l.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(sn,{columns:v,data:i})})};(0,P.RM)("MatrixCheckbox",dt,"antd"),(0,P.cf)("MatrixCheckbox",ut,"antd");var ct=["title","rowId"];function on(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,c=a.headerGroups,s=a.rows,v=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td","data-id":"".concat(i.original.rowId,"-").concat(r.column.id),children:r.render("Cell")}))})}))})}))]}))}function vt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=n.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(w.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return(0,e.jsx)(le,{value:A,onChange:function(Q){var b={};E.forEach(function(N,p){var M=N.title,D=N.rowId,F=(0,Se.Z)(N,ct);C.index===p&&(F[u.id]=Q),b[D]=F}),l(b)}})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(on,{columns:v,data:i})})}var ht=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,c=l.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:function(){return(0,e.jsx)(w.Z,{html:u.title})},width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value;return(0,e.jsx)("span",{children:A})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(r=l.attribute)===null||r===void 0?void 0:r.width,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:r.title,rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(on,{columns:v,data:i})})};(0,P.RM)("MatrixFillBlank",vt,"antd"),(0,P.cf)("MatrixFillBlank",ht,"antd");var ft=["title","rowId"],mt=["title","rowId"];function dn(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,c=a.headerGroups,s=a.rows,v=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return v(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function gt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=n.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var d;return((d=n.children)===null||d===void 0?void 0:d.filter(function(u){var x;return(x=u.attribute)===null||x===void 0?void 0:x.exclusiveFillBlankInMatrix}).map(function(u){return u.id}))||[]},[n]),i=(0,B.useMemo)(function(){var d,u,x=m.map(function(f){var j;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(j=f.attribute)===null||j===void 0?void 0:j.width,accessor:f.id,Cell:function(C){var E,y,Q=C.value,b=C.row,N=C.data,p=(E=f.attribute)===null||E===void 0?void 0:E.exclusiveFillBlankInMatrix,M=(y=f.attribute)===null||y===void 0?void 0:y.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!p){var F={};N.forEach(function(T,O){var z=T.title,_=T.rowId,Y=(0,Se.Z)(T,ft);b.index===O?(F[_]={},v.forEach(function($){F[_][$]=Y[$]}),F[_][f.id]=!0):F[_]=Y}),l(F)}},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[!p&&(0,e.jsx)(Te.ZP,{checked:!!Q}),M?(0,e.jsx)(le,{type:M,style:{width:120},value:Q===!0?"":Q,onChange:function(F){var T={};N.forEach(function(O,z){var _=O.title,Y=O.rowId,$=(0,Se.Z)(O,mt);b.index===z?(p?T[Y]=$:(T[Y]={},v.forEach(function(re){T[Y][re]=$[re]})),T[Y][f.id]=F):T[Y]=$}),l(T)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return x.splice(0,0,{Header:(0,e.jsx)(w.Z,{html:(d=n.attribute)===null||d===void 0?void 0:d.cornerText}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),x},[]),r=s.map(function(d,u){var x=d.id,f=a[x]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:d.title}),rowId:x},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(dn,{columns:i,data:r})})}var xt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,c=l.row,s=c===void 0?[]:c,v=(0,B.useMemo)(function(){var r,d,u=m.map(function(x){var f;return{Header:(0,e.jsx)(w.Z,{html:x.title}),width:(f=x.attribute)===null||f===void 0?void 0:f.width,accessor:x.id,Cell:function(A){var C=A.value,E=A.row,y=A.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(Te.ZP,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return u.splice(0,0,{Header:(0,e.jsx)(w.Z,{html:(r=l.attribute)===null||r===void 0?void 0:r.cornerText}),width:((d=l.attribute)===null||d===void 0?void 0:d.width)||150,accessor:"title"}),u},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(w.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(dn,{columns:v,data:i})})};(0,P.RM)("MatrixRadio",gt,"antd"),(0,P.cf)("MatrixRadio",xt,"antd");function At(t){for(var n=[],l=2;l<t+2;l++)n.push(l/(t+2));return n}function jt(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=[],a=t;a<=n;a++)o.push(a);return l&&o.reverse(),o}function Ct(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=m[0].id,s=(0,B.useState)(function(){return a[c]||-1}),v=(0,k.Z)(s,2),i=v[0],r=v[1];function d(x){l((0,te.Z)({},c,x))}(0,B.useEffect)(function(){Object.keys(a).length>0&&r(a[c])},[a,c]);var u=function(f){var j=a[f.id],A=f.attribute||{},C=A.scope,E=C===void 0?"[0,10]":C,y=A.npsInvertSort,Q=A.npsStart,b=Q===void 0?"\u4E0D\u53EF\u80FD":Q,N=A.npsEnd,p=N===void 0?"\u6781\u6709\u53EF\u80FD":N,M=E.replace("[","").replace("]","").split(","),D=(0,k.Z)(M,2),F=D[0],T=D[1],O=At(i||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){r(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:jt(parseInt(F),parseInt(T),y).map(function(z){var _={background:"#2672ff",opacity:O[z]};return(0,e.jsx)("div",{className:"nps-item",style:i>=z?_:void 0,onMouseOver:function(){r(z)},onClick:function(){return d(z)},children:z},z)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:y?p:b}),(0,e.jsx)("div",{children:y?b:p})]})]},f.id)};return(0,e.jsx)(ue.Z,{children:m.map(function(x){return u(x)})})}(0,P.RM)("Nps",Ct,"antd");var Et=Te.ZP.Group;function un(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,c=n.attribute,s=24/((c==null?void 0:c.columns)||1),v=(0,I.AK)("-body-question"),i=!!(c!=null&&c.statEnabled),r=(0,I.Rk)(),d=r.hiddenOption[n.id]||[],u=(0,I.Al)();function x(A){var C,E=A.target.value,y=(C=n.children)===null||C===void 0?void 0:C.find(function(b){return b.id===E});if(y){var Q=y.id;l((0,te.Z)({},A.target.value,a[Q]||!0))}}(0,B.useEffect)(function(){var A=Object.keys(a)[0];d.includes(A)&&l(void 0)},[d]);function f(A,C){l((0,te.Z)({},A,C||!0),A)}function j(A,C){g((0,te.Z)({},A,C||!0),A)}return(0,B.useEffect)(function(){var A;(A=n.children)===null||A===void 0||A.forEach(function(C){var E,y=C.id,Q=C.attribute,b=Q==null?void 0:Q.dataType;(E=C.attribute)!==null&&E!==void 0&&E.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},y,b?a[y]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Et,{onChange:x,value:Object.keys(a)[0],style:{width:"100%"},children:(0,e.jsx)(ue.Z,{children:m==null?void 0:m.filter(function(A){return!d.includes(A.id)}).map(function(A){var C,E,y,Q,b=A.id,N=(C=A.attribute)===null||C===void 0?void 0:C.dataType,p=(E=A.attribute)===null||E===void 0?void 0:E.suffix,M=(y=A.attribute)===null||y===void 0?void 0:y.readOnly,D=(Q=A.attribute)===null||Q===void 0?void 0:Q.quota,F=!1;if(D!==void 0){var T,O=u.statistics,z=O==null?void 0:O.questionStatistics[n.id],_=(z==null||(T=z.optionStatistics.find(function($){return $.optionId===b}))===null||T===void 0?void 0:T.count)||0,Y=D-_;Y<=0&&(F=!0)}return(0,e.jsxs)(se.Z,{span:s,className:v+"-option","data-id":b,children:[(0,e.jsx)(En,{qId:n.id,schema:A,disabled:F,value:a[b],onChange:function(re){return f(b,re)},onBlur:function(re){return j(b,re)}}),(0,e.jsx)($e,{statEnabled:i,quota:D,checked:!!a[b],optionId:b,questionId:n.id,checkedCount:Object.keys(a).length}),N&&(0,e.jsx)(le,{value:a[b]===!0?"":a[b],type:N,schema:A,readOnly:M,style:{maxWidth:200},onChange:function(re){return f(b,re)},onBlur:function(re){return j(b,re)},suffix:p&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(w.Z,{html:p})})})]},b)})})})})}(0,P.RM)("Radio",(0,H.Pi)(un),"antd"),(0,P.RM)("Judge",(0,H.Pi)(un),"antd");function yt(t){var n=(0,I.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(w.Z,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}var Bt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(w.Z,{html:"".concat(n.replaceTitle||n.schema.title||"")})})};(0,P.RM)("Remark",yt,"antd"),(0,P.cf)("Remark",Bt,"antd");var da=h(96433),Je=h(2864),cn=h(41687),Zt=h(46870),vn=h(18613),pt=h(57206),bt={1:(0,e.jsx)(cn.Z,{}),2:(0,e.jsx)(cn.Z,{}),3:(0,e.jsx)(Zt.Z,{}),4:(0,e.jsx)(vn.Z,{}),5:(0,e.jsx)(vn.Z,{})};function Qt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function c(v,i){l((0,te.Z)({},v,i))}var s=function(i){var r=i.attribute||{},d=i.id,u=r.scope,x=u===void 0?"[0,5]":u,f=r.scoreStyle,j=x.replace("[","").replace("]","").split(","),A=(0,k.Z)(j,2),C=A[0],E=A[1];return f==="heart"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),character:(0,e.jsx)(pt.Z,{}),style:{color:"#ea7463"},value:a[d],count:parseInt(E),onChange:function(Q){return c(d,Q)}},d):f==="smile"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),character:function(Q){var b=Q.index;return bt[b+1]},count:parseInt(E),onChange:function(Q){return c(d,Q)},value:a[d]},d):(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),count:parseInt(E),value:a[d],onChange:function(Q){return c(d,Q)}},d)};return(0,e.jsx)(ue.Z,{children:m.map(function(v){return s(v)})})}(0,P.RM)("Score",Qt,"antd");function Nt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function c(s){var v,i=(v=n.children)===null||v===void 0?void 0:v.find(function(r){return r.id===s});i&&l((0,te.Z)({},s,!0))}return(0,B.useEffect)(function(){var s;(s=n.children)===null||s===void 0||s.forEach(function(v){var i,r=v.id;(i=v.attribute)!==null&&i!==void 0&&i.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},r,!0))})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(ce.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){l(void 0)},showSearch:!0,value:Object.keys(a)[0],filterOption:function(v,i){return(i==null?void 0:i.label).toLowerCase().indexOf(v.toLowerCase())!==-1},onChange:c,style:{width:260},options:m.map(function(s){return{label:s.title,value:s.id}})})})})}(0,P.RM)("Select",Nt,"antd");var ua=h(34669),It=h(82833);function St(t){var n=t.schema,l=t.onChange,o=n.children,a=(0,I.Al)(),g=(0,B.useState)(0),m=(0,k.Z)(g,2),c=m[0],s=m[1];function v(i,r){var d="signature-".concat(r,"-").concat((0,L.kb)(6),".png");if(!a.onUpload){l((0,te.Z)({},r,[d]));return}fetch(i).then(function(u){return u.blob()}).then(function(u){var x=new File([u],d,{type:"image/png"});a.onUpload({file:x},function(f){s(f.loaded/f.total*100)}).then(function(f){f.success&&f.data.id&&l((0,te.Z)({},r,[f.data.id]))})})}return(0,e.jsx)("div",{children:o==null?void 0:o.map(function(i){var r=i.id,d=i.title;return(0,e.jsxs)(ue.Z,{gutter:[10,0],"data-id":r,children:[d&&(0,e.jsx)(se.Z,{span:24},i.id),(0,e.jsxs)(se.Z,{span:24,children:[(0,e.jsx)(ge,{onChange:function(x){return v(x,r)}}),c>0&&c!==100&&(0,e.jsx)(It.Z,{percent:c,size:"small",showInfo:!1})]})]},r)})})}var wt=function(n){var l=n.value,o;return l&&(o=Object.values(l)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:o&&(0,e.jsx)("img",{src:"/api/file?id=".concat(o)})})};(0,P.RM)("Signature",St,"antd"),(0,P.cf)("Signature",wt,"antd");var Ye=h(27049);function Pt(t){var n=(0,I.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(Ye.Z,{plain:!0})})}var Rt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(Ye.Z,{plain:!0})})};(0,P.RM)("SplitLine",Pt,"antd"),(0,P.cf)("SplitLine",Rt,"antd");function Mt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=(0,I.AK)("-body-question");function c(s,v){a[s]=v,v===""&&delete a[s],l((0,Z.Z)({},a))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(s){var v=s.id,i=s.attribute,r=s.title,d=(0,L.Ck)(i==null?void 0:i.autoSize,[2,4]);return(0,e.jsxs)(ue.Z,{style:{marginBottom:10},"data-id":v,children:[r&&(0,e.jsx)(se.Z,{className:m+"-option",span:4,children:s.title&&(0,e.jsx)("span",{className:m+"-option-title",children:s.title})},s.id),(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(ee.Z.TextArea,{autoSize:{minRows:d[1],maxRows:d[2]},value:a[v]||"",onChange:function(x){return c(v,x.target.value)}})})]},v)})})}(0,P.RM)("Textarea",Mt,"antd");var Ft=h(43347),Dt=ke.Z.Dragger;function Tt(t){var n=t.schema,l=t.onChange,o=t.value,a=t.readOnly,g=n.children,m=(0,I.Al)(),c=(0,B.useState)(),s=(0,k.Z)(c,2),v=s[0],i=s[1];(0,B.useEffect)(function(){var u=n.children[0].id,x=o&&o[u]||[];v==null&&x.length>0&&xe.hi.loadFiles({ids:x}).then(function(f){i(f==null?void 0:f.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[o]);var r=function(){var u=(0,tn.Z)((0,ze.Z)().mark(function x(f){var j,A,C,E;return(0,ze.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:j=f.onSuccess,A=f.onError,C=f.file,E=f.onProgress,m.onUpload&&m.onUpload({file:C,questionId:n.id,projectId:m.schema.id},function(b){E&&E({percent:b.loaded/b.total*100})}).then(function(b){if(b.success&&j&&j(b.data),!b.success&&A){var N=new Error("Some error");A({event:N})}});case 2:case"end":return Q.stop()}},x)}));return function(f){return u.apply(this,arguments)}}(),d=function(x,f){if(i(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(A){return A.status!=="done"})){var j=x.fileList.filter(function(A){return A.status==="done"}).map(function(A){var C;return((C=A.response)===null||C===void 0?void 0:C.id)||A.uid});j.length===0?l(void 0):l((0,te.Z)({},f,j))}};return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(u){var x=u.id,f=u.attribute,j=[];if(f){var A=f.maxFileCount,C=f.maxFileSize,E=f.fileAccept;A&&j.push("\u6700\u591A\u4E0A\u4F20".concat(A,"\u4E2A")),C&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(C,"M\u4EE5\u5185")),E&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(E))}return(0,e.jsxs)(Dt,{multiple:!0,disabled:a,maxCount:(f==null?void 0:f.maxFileCount)||20,accept:f==null?void 0:f.fileAccept,beforeUpload:function(Q){return f!=null&&f.maxFileSize&&Q.size>f.maxFileSize*1024*1024?(nn.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(f.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:r,onChange:function(Q){return d(Q,x)},fileList:v,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Ft.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}(0,P.RM)("Upload",Tt,"antd");var Ot=h(55686),kt=ce.Z.Option;function zt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,c=m[0].id,s=(0,B.useState)([]),v=(0,k.Z)(s,2),i=v[0],r=v[1];function d(f){c&&l((0,te.Z)({},c,f))}var u=(0,xe.zE)(function(f){xe.hi.selectUser({name:f,selected:a[c]||[]}).then(function(j){j.success&&r(j.data)})},5),x=function(j){d(j?i.map(function(A){return A.userId}):void 0)};return(0,B.useEffect)(function(){var f;u(""),(f=n.children)===null||f===void 0||f.forEach(function(j){var A,C=j.id;(A=j.attribute)!==null&&A!==void 0&&A.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},C,!0))})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(ce.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){l(void 0)},style:{width:"100%"},value:a[c]||[],onSearch:u,showSearch:!0,onChange:d,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Fe.Z,{onChange:function(C){x(C.target.checked)},children:"\u5168\u9009"})})]})},children:i.map(function(f){return(0,e.jsx)(kt,{value:f.userId,label:f.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Ot.Z,{user:f,size:20})}),f.name," ",f.deptName&&"(".concat(f.deptName,")")]})},f.userId)})})})})}var Lt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,c=m[0].id,s=(0,B.useState)([]),v=(0,k.Z)(s,2),i=v[0],r=v[1];return(0,B.useEffect)(function(){xe.hi.selectUser({selected:a[c]||[],name:"^_^"}).then(function(d){d.success&&r(d.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(fe.Z,{children:i.map(function(d){return(0,e.jsx)(an.Z,{color:"blue",children:d.name},d.userId)})})})};(0,P.RM)("User",zt,"antd"),(0,P.cf)("User",Lt,"antd");var Ht=h(73328),Kt=function(n){var l=(0,B.useRef)(null),o=(0,B.useState)(!1),a=(0,k.Z)(o,2),g=a[0],m=a[1];return(0,Ht.Z)(l,function(){m(!1)}),(0,e.jsx)("div",{className:Be()("preview",{active:g}),ref:l,onClick:function(){m(!0)},children:(0,e.jsx)(w.Z,{html:Object.values(n.value||{})[0]})})};(0,L.cf)("RichText",Kt,"antd");var Ut=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Jt=Ut;(0,L.RM)("RichText",(0,B.lazy)(function(){return Promise.all([h.e(9548),h.e(5190),h.e(4025),h.e(2664),h.e(5051),h.e(1157),h.e(9936),h.e(811),h.e(8253)]).then(h.bind(h,27321))}),"antd"),(0,L.cf)("Upload",(0,B.lazy)(function(){return Promise.all([h.e(9548),h.e(6432),h.e(3e3)]).then(h.bind(h,43640))}),"antd")},55686:function(Ze,ve,h){"use strict";var k=h(11849),L=h(94233),w=h(51890),H=h(93224),B=h(89366),I=h(85893),P=["user"],he=function(W){var K=W.user,G=(0,H.Z)(W,P);return!K||!K.avatar?(0,I.jsx)(w.C,(0,k.Z)({icon:(0,I.jsx)(B.Z,{}),size:G.size||"small"},G)):(0,I.jsx)(w.C,(0,k.Z)({src:"/api/public/preview/".concat(K.avatar),size:G.size||"small"},G))};ve.Z=he},78210:function(Ze,ve,h){"use strict";var k=h(12968),L=h(20352),w=h(27856),H=h.n(w),B=h(15020),I=h(85893),P=function(e){var W=e.html,K=W===void 0?"":W,G=e.replaceP,oe=G===void 0?!0:G;return oe?(0,I.jsx)("div",{className:"pe-view",children:typeof K=="string"&&(0,B.ZP)(H().sanitize(K,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"),{replace:function(q){if((q==null?void 0:q.name)==="img"){var de=q.attribs.width;return(0,I.jsx)(L.Z,{width:de?parseFloat(de):void 0,src:q.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}return q}})}):(0,I.jsx)(I.Fragment,{children:typeof K=="string"&&(0,B.ZP)(H().sanitize(K))})};ve.Z=P},27049:function(Ze,ve,h){"use strict";var k=h(22122),L=h(96156),w=h(94184),H=h.n(w),B=h(67294),I=h(53124),P=function(e,W){var K={};for(var G in e)Object.prototype.hasOwnProperty.call(e,G)&&W.indexOf(G)<0&&(K[G]=e[G]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var oe=0,G=Object.getOwnPropertySymbols(e);oe<G.length;oe++)W.indexOf(G[oe])<0&&Object.prototype.propertyIsEnumerable.call(e,G[oe])&&(K[G[oe]]=e[G[oe]]);return K},he=function(W){var K=B.useContext(I.E_),G=K.getPrefixCls,oe=K.direction,pe=W.prefixCls,q=W.type,de=q===void 0?"horizontal":q,S=W.orientation,ee=S===void 0?"center":S,Z=W.orientationMargin,we=W.className,je=W.children,Pe=W.dashed,be=W.plain,Re=P(W,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),ae=G("divider",pe),Me=ee.length>0?"-".concat(ee):ee,ce=!!je,Ce=ee==="left"&&Z!=null,Ee=ee==="right"&&Z!=null,Qe=H()(ae,"".concat(ae,"-").concat(de),(0,L.Z)((0,L.Z)((0,L.Z)((0,L.Z)((0,L.Z)((0,L.Z)((0,L.Z)({},"".concat(ae,"-with-text"),ce),"".concat(ae,"-with-text").concat(Me),ce),"".concat(ae,"-dashed"),!!Pe),"".concat(ae,"-plain"),!!be),"".concat(ae,"-rtl"),oe==="rtl"),"".concat(ae,"-no-default-orientation-margin-left"),Ce),"".concat(ae,"-no-default-orientation-margin-right"),Ee),we),Ne=(0,k.Z)((0,k.Z)({},Ce&&{marginLeft:Z}),Ee&&{marginRight:Z});return B.createElement("div",(0,k.Z)({className:Qe},Re,{role:"separator"}),je&&de!=="vertical"&&B.createElement("span",{className:"".concat(ae,"-inner-text"),style:Ne},je))};ve.Z=he},39002:function(Ze,ve,h){"use strict";var k=h(38663),L=h.n(k),w=h(92801),H=h.n(w),B=h(14965)}}]);
