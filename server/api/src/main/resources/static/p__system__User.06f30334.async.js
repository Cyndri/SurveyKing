(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[7915],{86468:function(ge,_,e){"use strict";e.d(_,{lq:function(){return de},FQ:function(){return le},fl:function(){return B}});var Ce=e(43358),ne=e(34041),re=e(20228),A=e(11382),m=e(11849),G=e(94657),ve=e(93224),Y=e(3980),ee=e(75291),U=e(67294),C=e(85893),ae=["fps","fetcher","width","className","defaultOptions","readonly","value"],de=function(o){var K=o.fps,te=K===void 0?30:K,y=o.fetcher,j=o.width,h=o.className,u=o.defaultOptions,z=o.readonly,M=o.value,p=(0,ve.Z)(o,ae),Z=(0,U.useState)(!1),n=(0,G.Z)(Z,2),F=n[0],L=n[1],D=(0,U.useState)(u||[]),s=(0,G.Z)(D,2),$=s[0],I=s[1],S=U.useRef(0),x=B(j),R=(0,Y.zE)(function(E){L(!0),I([]),S.current+=1;var d=S.current;o.fetcher(E).then(function(a){d===S.current&&(I(a),L(!1))})},te);if(z){var f;return(0,C.jsx)(ee.ZP.Item,(0,m.Z)((0,m.Z)({},p),{},{children:(0,C.jsx)("span",{children:(f=$.find(function(E){return E.value===M}))===null||f===void 0?void 0:f.label})}))}return(0,C.jsx)(ee.ZP.Item,(0,m.Z)((0,m.Z)({},p),{},{children:(0,C.jsx)(ne.Z,(0,m.Z)({showSearch:!0,placeholder:o.placeholder,filterOption:!1,onSearch:R,allowClear:!0,onFocus:function(){return R("")},onClear:function(){return R("")},loading:F,notFoundContent:F?(0,C.jsx)(A.Z,{size:"small"}):null,options:$},x))}))},V=e(62999),ie=e(54680),ue=["width","className","treeData","placeholder","readonly","value"],le=function(o){var K=o.width,te=o.className,y=o.treeData,j=o.placeholder,h=o.readonly,u=o.value,z=(0,ve.Z)(o,ue),M=B(K);if(h){var p;return(0,C.jsx)(ee.ZP.Item,(0,m.Z)((0,m.Z)({},z),{},{children:(0,C.jsx)("span",{children:(p=(0,Y.hE)(y,u,"key"))===null||p===void 0?void 0:p.title})}))}return(0,C.jsx)(ee.ZP.Item,(0,m.Z)((0,m.Z)({},z),{},{children:(0,C.jsx)(ie.Z,(0,m.Z)({dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:y,placeholder:j,treeDefaultExpandAll:!0},M))}))};function B(P){if(!P)return{};if(typeof P=="number")return{style:{width:P}};if(typeof P=="string")return{className:"pro-field ".concat(typeof P=="string"?"pro-field-".concat(P):"")}}},79871:function(ge,_,e){"use strict";e.d(_,{G:function(){return p},y:function(){return M}});var Ce=e(57663),ne=e(71577),re=e(39428),A=e(3182),m=e(71194),G=e(50146),ve=e(34792),Y=e(48086),ee=e(94657),U=e(83279),C=e(3980),ae=e(57119),de=e(51042),V=e(16894),ie=e(9761),ue=e(60780),le=e.n(ue),B=e(67294),P=e(11849),o=e(86468),K=e(75291),te=e(92956),y=e(5966),j=e(90672),h=e(80582),u=e(85893),z=(0,h.Pi)(function(Z){var n=Z.dept,F=Z.onClose,L=Z.onOk,D=(0,C.m2)(),s=(0,B.useRef)(),$=!!(n!=null&&n.id),I=D.depts,S=(0,B.useMemo)(function(){return le()(I.map(function(x){return{value:x.id,title:x.name,key:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"value"})},[I]);return(0,u.jsxs)(te.a,{title:$?"\u4FEE\u6539\u7EC4\u7EC7\u673A\u6784":"\u65B0\u5EFA\u7EC4\u7EC7\u673A\u6784",formRef:s,initialValues:(0,P.Z)({},n),visible:!0,drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){F()}},onFinish:function(){var x=(0,A.Z)((0,re.Z)().mark(function R(f){var E;return(0,re.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.saveOrUpdateDept((0,P.Z)((0,P.Z)({},n),f));case 2:E=a.sent,E.success?L():Y.default.error("\u4FDD\u5B58\u5931\u8D25");case 4:case"end":return a.stop()}},R)}));return function(R){return x.apply(this,arguments)}}(),children:[(0,u.jsxs)(K.ZP.Group,{children:[(!n||n&&n.id!=="1")&&I.length>0&&(0,u.jsx)(o.FQ,{name:"parentId",width:"md",treeData:S,label:"\u4E0A\u7EA7\u90E8\u95E8",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",required:!0,value:n==null?void 0:n.id,rules:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,u.jsx)(y.Z,{name:"code",width:"md",label:"\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u7F16\u7801",required:!0,rules:[{required:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]})]}),(0,u.jsxs)(K.ZP.Group,{children:[(0,u.jsx)(y.Z,{name:"name",width:"md",label:"\u5168\u79F0",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u5168\u79F0",required:!0,rules:[{required:!0,message:"\u5168\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,u.jsx)(y.Z,{name:"shortName",width:"md",label:"\u7B80\u79F0",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u7B80\u79F0",required:!0})]}),(0,u.jsx)(K.ZP.Group,{children:(0,u.jsx)(o.lq,{fps:2,name:"managerId",width:"md",label:"\u8D1F\u8D23\u4EBA",placeholder:"\u8F93\u5165\u59D3\u540D\u68C0\u7D22",value:n==null?void 0:n.managerId,defaultOptions:$?[{label:n.managerName,value:n.managerId}]:void 0,fetcher:function(R){return C.hi.loadUsers({name:R}).then(function(f){return f.list.map(function(E){return{label:E.name,value:E.id}})})}})}),(0,u.jsx)(K.ZP.Group,{children:(0,u.jsx)(j.Z,{name:"remark",width:690,label:"\u5907\u6CE8",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})});function M(Z,n){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"id",L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!n)return Z;for(var D=(0,U.Z)(Z);D.length;){var s=D[L?"pop":"shift"]();if(s&&s[F]===n)return[s];s!=null&&s.children&&D.push.apply(D,(0,U.Z)(s.children))}return null}var p=(0,ie.Pi)(function(Z){var n=Z.selectedDept,F=(0,C.m2)(),L=F.loading,D=(0,B.useRef)(),s=(0,B.useState)({visible:!1}),$=(0,ee.Z)(s,2),I=$[0],S=$[1],x=M(le()(F.depts,{customID:"id",parentProperty:"parentId"}),n),R=[{title:"\u673A\u6784\u540D\u79F0",dataIndex:"name"},{title:"\u673A\u6784\u7B80\u79F0",dataIndex:"shortName",search:!1,width:200},{title:"\u8D1F\u8D23\u4EBA",dataIndex:"managerName",search:!1,width:150},{title:"\u64CD\u4F5C",valueType:"option",render:function(E,d){return[(0,u.jsx)("a",{onClick:function(){return S({visible:!0,current:d})},children:"\u7F16\u8F91"},"edit"),(0,u.jsx)("a",{onClick:function(){if(d.children&&d.children.length>0){Y.default.error("\u8BF7\u5148\u5220\u9664\u5B50\u673A\u6784\uFF01");return}G.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u673A\u6784?",icon:(0,u.jsx)(ae.Z,{}),onOk:function(){F.deleteDept(d.id)}})},children:"\u5220\u9664"},"delte")]}}];return(0,u.jsxs)("div",{children:[(0,u.jsx)(V.ZP,{columns:R,actionRef:D,loading:L,bordered:!0,dataSource:x,request:(0,A.Z)((0,re.Z)().mark(function f(){return(0,re.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",F.loadDepts());case 1:case"end":return d.stop()}},f)})),columnsState:{persistenceKey:"pro-table-dept",persistenceType:"localStorage"},rowKey:"id",search:!1,scroll:{x:650},pagination:!1,dateFormatter:"string",headerTitle:"\u673A\u6784\u7BA1\u7406",toolBarRender:function(){return[(0,u.jsx)(ne.Z,{icon:(0,u.jsx)(de.Z,{}),type:"primary",onClick:function(){S({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),I.visible&&(0,u.jsx)(z,{onOk:function(){S({visible:!1})},dept:I.current,readonly:I.readonly,onClose:function(){return S({visible:!1})}})]})})},40017:function(ge,_,e){"use strict";e.d(_,{A:function(){return z}});var Ce=e(58024),ne=e(91894),re=e(32157),A=e(32138),m=e(34792),G=e(48086),ve=e(49111),Y=e(19650),ee=e(22385),U=e(94199),C=e(94657),ae=e(83279),de=e(3980),V=e(19339),ie=e(82665),ue=e(43471),le=e(91816),B=e(86504),P=e(63258),o=e(9761),K=e(60780),te=e.n(K),y=e(67294),j=e(79871),h=e(85893);function u(M){var p=[];return M.forEach(function(Z){Z.children&&(p.push(Z.key),p.push.apply(p,(0,ae.Z)(u(Z.children))))}),p}var z=(0,o.Pi)(function(M){var p=(0,de.m2)(),Z=p.depts;(0,y.useEffect)(function(){p.loadDepts()},[p]);var n=(0,y.useMemo)(function(){return te()(Z.map(function(d){return{title:d.name,key:d.id,parentId:d.parentId}}),{parentProperty:"parentId",customID:"key"})},[Z]),F=(0,y.useState)([]),L=(0,C.Z)(F,2),D=L[0],s=L[1],$=(0,y.useState)(!0),I=(0,C.Z)($,2),S=I[0],x=I[1],R=(0,y.useMemo)(function(){return u(n)},[n]),f=function(a){s(a),x(!1)},E=function(a){a.length>0?M.onSelect(a[0]):M.onSelect(void 0)};return(0,h.jsx)(ne.Z,{title:"\u7EC4\u7EC7\u673A\u6784",extra:(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(Y.Z,{children:[D.length>0?(0,h.jsx)(U.Z,{title:"\u6298\u53E0\u6240\u6709",children:(0,h.jsx)(V.Z,{style:{cursor:"pointer"},onClick:function(){return s([])}})}):(0,h.jsx)(U.Z,{title:"\u5C55\u5F00\u6240\u6709",children:(0,h.jsx)(ie.Z,{style:{cursor:"pointer"},onClick:function(){return s(R)}})}),(0,h.jsx)(U.Z,{title:"\u5237\u65B0",children:(0,h.jsx)(ue.Z,{style:{cursor:"pointer"},onClick:function(){return p.loadDepts()}})})]})}),children:(0,h.jsx)(A.Z,{expandedKeys:D,onExpand:f,draggable:!0,autoExpandParent:S,onSelect:E,showIcon:!0,treeData:n,onDrop:function(a){if(a.dragNode.pos!=="".concat(a.node.pos,"-0")){if(a.node.parentId!==a.dragNode.parentId&&a.dragNode.parentId!==a.node.key){G.default.error("\u53EA\u80FD\u6539\u53D8\u540C\u7EA7\u673A\u6784\u7684\u987A\u5E8F");return}var ce=a.dragNode.parentId,t=(0,j.y)(n,ce,"key");if(t){var fe,me=(fe=t[0].children)===null||fe===void 0?void 0:fe.map(function(he){return he.key}),Ze=a.dragNode.key,De=me.indexOf(Ze);me.splice(De,1,""),me.splice(a.dropPosition,0,Ze),p.sortDept(me.filter(function(he){return he}))}}},icon:function(a){var ce=a.expanded;return ce?(0,h.jsx)(le.Z,{}):!a.data.children||a.data.children.length===0?(0,h.jsx)(B.Z,{}):(0,h.jsx)(P.Z,{})}})})})},87113:function(ge,_,e){"use strict";e.r(_),e.d(_,{default:function(){return Be}});var Ce=e(13062),ne=e(71230),re=e(57663),A=e(71577),m=e(39428),G=e(3182),ve=e(89032),Y=e(15746),ee=e(59250),U=e(13013),C=e(30887),ae=e(28682),de=e(34792),V=e(48086),ie=e(47673),ue=e(28166),le=e(71194),B=e(50146),P=e(49111),o=e(19650),K=e(71153),te=e(60331),y=e(94657),j=e(3980),h=e(34804),u=e(51042),z=e(84391),M=e(2048),p=e(16894),Z=e(80582),n=e(67294),F=e(40017),L=e(43358),D=e(34041),s=e(11849),$=e(62999),I=e(54680),S=e(86468),x=e(75291),R=e(92956),f=e(5966),E=e(64317),d=e(44294),a=e(60780),ce=e.n(a),t=e(85893),fe=(0,Z.Pi)(function(Q){var H,c=Q.user,pe=Q.onClose,se=Q.onOk,J=(0,j.m2)(),w=(0,n.useRef)(),xe=c==null||(H=c.roles)===null||H===void 0?void 0:H.map(function(r){return r.id}),W=!!(c!=null&&c.id),oe=J.depts,k=J.positions,ye=(0,n.useState)(function(){var r;return(c==null||(r=c.userPositions)===null||r===void 0?void 0:r.map(function(v){return v.id}))||[]}),b=(0,y.Z)(ye,2),q=b[0],Pe=b[1],Ee=(0,n.useMemo)(function(){return ce()(oe.map(function(r){return{value:r.id,title:r.name,key:r.id,parentId:r.parentId}}),{parentProperty:"parentId",customID:"value"})},[oe]);(0,n.useEffect)(function(){k.length===0&&J.loadPositions({pageSize:1024})},[]);var N=[{title:"\u673A\u6784\u540D\u79F0",dataIndex:"deptId",width:"30%",renderFormItem:function(v,l,i){var g=l.type,O=l.defaultRender,X=l.fieldProps;return g==="form"?(0,t.jsx)(I.Z,(0,s.Z)((0,s.Z)({allowClear:!0,treeData:Ee},X),{},{placeholder:"\u8BF7\u9009\u62E9\u673A\u6784"})):O(v)}},{title:"\u5C97\u4F4D\u540D\u79F0",dataIndex:"positionId",width:"50%",renderFormItem:function(v,l,i){var g=l.type,O=l.defaultRender;return g==="form"?(0,t.jsx)(D.Z,{options:k.map(function(X){return{label:X.name,value:X.id}}),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"}):O(v)}},{title:"\u64CD\u4F5C",valueType:"option",width:200}];return(0,t.jsxs)(R.a,{title:W?"\u4FEE\u6539\u7528\u6237":"\u65B0\u5EFA\u7528\u6237",formRef:w,open:!0,initialValues:(0,s.Z)((0,s.Z)({},c),{},{roles:xe}),drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){pe()}},onFinish:function(){var r=(0,G.Z)((0,m.Z)().mark(function v(l){var i;return(0,m.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,J.saveOrUpdateUser((0,s.Z)((0,s.Z)({},c),l));case 2:i=O.sent,i.success&&se();case 4:case"end":return O.stop()}},v)}));return function(v){return r.apply(this,arguments)}}(),children:[(0,t.jsxs)(x.ZP.Group,{children:[(0,t.jsx)(f.Z,{name:"name",width:"md",label:"\u7528\u6237\u540D",tooltip:"\u6700\u957F\u4E3A 24 \u4F4D",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",required:!0,rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(f.Z,{width:"md",name:"username",label:"\u767B\u5F55\u540D",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u6237\u540D\u79F0",rules:[{required:!0,message:"\u767B\u5F55\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{validator:function(){var r=(0,G.Z)((0,m.Z)().mark(function l(i,g){var O;return(0,m.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(g!==(c==null?void 0:c.username)){T.next=2;break}return T.abrupt("return");case 2:return T.next=4,j.hi.checkUsernameExist(g);case 4:if(O=T.sent,!O){T.next=7;break}throw new Error("\u767B\u5F55\u540D\u5DF2\u5B58\u5728!");case 7:case"end":return T.stop()}},l)}));function v(l,i){return r.apply(this,arguments)}return v}()}],required:!0})]}),!W&&(0,t.jsxs)(x.ZP.Group,{children:[(0,t.jsx)(f.Z.Password,{width:"md",name:"password",label:"\u8F93\u5165\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!W,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],required:!W}),(0,t.jsx)(f.Z.Password,{width:"md",name:"rePassword",label:"\u786E\u8BA4\u5BC6\u7801",placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!W,message:"\u786E\u8BA4\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A!"},function(r){var v=r.getFieldValue;return{validator:function(i,g){return!g||v("password")===g?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"))}}}],required:!W})]}),(0,t.jsxs)(x.ZP.Group,{children:[(0,t.jsx)(E.Z,{options:[{value:"M",label:"\u7537"},{value:"F",label:"\u5973"}],width:"md",name:"gender",label:"\u6027\u522B"}),(0,t.jsx)(E.Z,{required:!0,options:[{value:1,label:"\u6FC0\u6D3B"},{value:0,label:"\u5931\u6D3B"}],width:"md",name:"status",label:"\u72B6\u6001"})]}),(0,t.jsxs)(x.ZP.Group,{children:[(0,t.jsx)(f.Z,{name:"phone",width:"md",label:"\u624B\u673A",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}),(0,t.jsx)(f.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{type:"email",message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"}]}),(0,t.jsx)(S.FQ,{name:"deptId",width:"md",treeData:Ee,label:"\u7EC4\u7EC7\u673A\u6784",placeholder:"\u8BF7\u9009\u62E9\u7EC4\u7EC7\u673A\u6784",value:c==null?void 0:c.deptId}),(0,t.jsx)(E.Z,{mode:"tags",request:(0,G.Z)((0,m.Z)().mark(function r(){return(0,m.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",j.hi.loadRoles({current:1,pageSize:1024}).then(function(i){return i.list.map(function(g){return{label:g.name,value:g.id}})}));case 1:case"end":return l.stop()}},r)})),width:"md",name:"roles",label:"\u89D2\u8272\u5217\u8868"})]}),(0,t.jsx)(x.ZP.Group,{children:(0,t.jsx)(x.ZP.Item,{label:"\u9009\u62E9\u5C97\u4F4D",name:"userPositions",trigger:"onValuesChange",children:(0,t.jsx)(d.Z,{rowKey:"id",toolBarRender:!1,columns:N,recordCreatorProps:{newRecordType:"dataSource",position:"top",record:function(){return{id:"".concat(Date.now())}}},editable:{type:"multiple",editableKeys:q,onChange:Pe,actionRender:function(v,l,i){return[i.delete]}}})})})]})}),me=e(43185),Ze=e(32620),De=e(90631),he=e(43347),je=Ze.Z.Dragger;function Fe(Q){var H=Q.onCancel,c=Q.onOk,pe=(0,n.useState)(!1),se=(0,y.Z)(pe,2),J=se[0],w=se[1],xe=(0,n.useState)([]),W=(0,y.Z)(xe,2),oe=W[0],k=W[1],ye={multiple:!1,accept:".xlsx",beforeUpload:function(q){return k([q]),!1},onRemove:function(){k([])},maxCount:1};return(0,t.jsx)(B.Z,{title:"\u6279\u91CF\u5BFC\u5165\u7528\u6237",onCancel:H,open:!0,maskClosable:!1,footer:[(0,t.jsx)(A.Z,{onClick:H,children:"\u53D6\u6D88"},"cancel"),(0,t.jsx)(A.Z,{icon:(0,t.jsx)(De.Z,{}),onClick:function(){j.hi.download("/api/file/downloadTemplate?name=\u5377\u738B\u7528\u6237\u5BFC\u5165\u6A21\u677F")},children:"\u4E0B\u8F7D\u6A21\u677F"},"downloadTemplate"),(0,t.jsx)(A.Z,{icon:(0,t.jsx)(z.Z,{}),type:"primary",loading:J,onClick:function(){if(oe.length===0){V.default.error("\u8BF7\u9009\u62E9\u6587\u4EF6");return}w(!0),j.hi.upload("/api/importUser",{file:oe[0]},function(q){}).then(function(q){w(!1),q.success?(V.default.success("\u5BFC\u5165\u6210\u529F"),c()):V.default.error(q.message)})},children:"\u5BFC\u5165"},"importTemplate")],children:(0,t.jsxs)(je,(0,s.Z)((0,s.Z)({},ye),{},{children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(he.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FDExcel\u6587\u4EF6\u5230\u6B64\u5904"})]}))})}var Ie=["magenta","volcano","cyan","blue","geekblue","purple"],Oe=(0,Z.Pi)(function(){var Q=(0,j.m2)(),H=(0,n.useRef)(),c=(0,n.useRef)(),pe=(0,n.useState)(),se=(0,y.Z)(pe,2),J=se[0],w=se[1],xe=(0,n.useState)(!1),W=(0,y.Z)(xe,2),oe=W[0],k=W[1],ye=(0,n.useState)(),b=(0,y.Z)(ye,2),q=b[0],Pe=b[1];(0,n.useEffect)(function(){Q.loadPermissions()},[Q]);var Ee=[{title:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"deptName",hideInSearch:!0,width:150},{title:"\u59D3\u540D",dataIndex:"name",ellipsis:!0,width:120},{title:"\u89D2\u8272",dataIndex:"role",hideInSearch:!0,width:150,renderFormItem:function(r,v){var l=v.defaultRender;return l(r)},render:function(r,v){var l;return(0,t.jsx)(o.Z,{children:(l=v.roles)===null||l===void 0?void 0:l.filter(function(i){return i}).map(function(i,g){return(0,t.jsx)(te.Z,{color:Ie[g],children:i.name},i.id)})})}},{title:"\u624B\u673A",dataIndex:"phone",width:150,search:!1},{title:"\u72B6\u6001",dataIndex:"status",search:!1,width:100,valueEnum:{0:{text:"\u5931\u6D3B",status:"Default"},1:{text:"\u6FC0\u6D3B",status:"Processing"}}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"createAt",width:150,valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",width:140,fixed:"right",render:function(r,v){return[(0,t.jsx)("a",{onClick:function(){w({visible:!0,current:v})},children:"\u7F16\u8F91"},"editable"),(0,t.jsx)(U.Z,{overlay:(0,t.jsx)(ae.Z,{onClick:function(i){var g=i.key;g==="resetPwd"?B.Z.confirm({title:"\u91CD\u7F6E\u5BC6\u7801",content:(0,t.jsx)(ue.Z.Password,{placeholder:"\u8F93\u5165\u5BC6\u7801",onChange:function(X){return c.current=X.target.value}}),okType:"primary",okText:"\u4FEE\u6539",cancelText:"\u53D6\u6D88",onOk:function(X){return c.current?(j.hi.updateUser({id:v.id,password:c.current}).then(function(T){T.success&&(V.default.success("\u4FEE\u6539\u6210\u529F"),c.current=void 0,X())}),!1):(V.default.error("\u8BF7\u8F93\u5165\u5BC6\u7801"),!1)}}):g==="delete"&&B.Z.confirm({title:"\u5220\u9664\u7528\u6237",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u7528\u6237\u5417\uFF1F",okType:"danger",okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",onOk:function(){Q.deleteUser(v.id).then(function(X){if(X.success){var T;V.default.success("\u5220\u9664\u6210\u529F"),(T=H.current)===null||T===void 0||T.reload()}})}})},items:[{label:"\u91CD\u7F6E\u5BC6\u7801",key:"resetPwd"},{label:"\u5220\u9664\u7528\u6237",key:"delete"}]}),children:(0,t.jsxs)("a",{className:"ant-dropdown-link",onClick:function(i){return i.preventDefault()},children:["\u66F4\u591A",(0,t.jsx)(h.Z,{})]})},"action")]}}];return(0,t.jsxs)(M._z,{title:!1,children:[(0,t.jsxs)(ne.Z,{gutter:20,children:[(0,t.jsx)(Y.Z,{xs:0,md:6,children:(0,t.jsx)(F.A,{onSelect:function(r){return Pe(r)}})}),(0,t.jsxs)(Y.Z,{xs:24,md:18,children:[(0,t.jsx)(p.ZP,{columns:Ee,bordered:!0,actionRef:H,params:{deptId:q},request:function(){var N=(0,G.Z)((0,m.Z)().mark(function r(v){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Q.loadUsers(v));case 1:case"end":return i.stop()}},r)}));return function(r){return N.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},scroll:{x:900},dateFormatter:"string",headerTitle:"\u7CFB\u7EDF\u7528\u6237\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(A.Z,{icon:(0,t.jsx)(u.Z,{}),type:"primary",onClick:function(){w({visible:!0})},children:"\u65B0\u5EFA"},"button"),(0,t.jsx)(A.Z,{icon:(0,t.jsx)(z.Z,{}),type:"primary",onClick:function(){k(!0)},children:"\u6279\u91CF\u5BFC\u5165"},"import")]}}),(J==null?void 0:J.visible)&&(0,t.jsx)(fe,{onClose:function(){w(void 0)},onOk:function(){var r;w(void 0),(r=H.current)===null||r===void 0||r.reload()},user:J.current})]})]}),oe&&(0,t.jsx)(Fe,{onCancel:function(){return k(!1)},onOk:function(){var r;k(!1),(r=H.current)===null||r===void 0||r.reload()}})]})}),Be=Oe}}]);
