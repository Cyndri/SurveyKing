(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[6997],{31930:function(){},92801:function(){},76898:function(je,oe,c){"use strict";c.d(oe,{Ff:function(){return Le},rF:function(){return Se},M2:function(){return Ce}});var O=c(22385),L=c(94199),Q=c(11849),z=c(93224),B=c(77883),S=c(85986),w=c(34792),ve=c(48086),e=c(54707),H=c(49914),K=c(9761),q=c(94184),V=c.n(q),re=c(94657),ee=c(78338),ue=c(67294),P=c(85893);function de(R){if(R=Number(R),R<=0)return"0:0:0";var $=Math.floor(R/3600),J=Math.floor(R%3600/60),ne=Math.floor(R%3600%60),X="".concat($).padStart(2,"0"),G="".concat(J).padStart(2,"0"),ie="".concat(ne).padStart(2,"0");return"".concat(X,":").concat(G,":").concat(ie)}function Z(R){return R<=60?"#ff4d4f":R<=180?"#faad14":"#52c41a"}var pe=(0,K.Pi)(function(){var R,$,J=(0,H.H)(),ne=(0,e.Rk)(),X=J.startTime,G=((R=J.project)===null||R===void 0||($=R.setting.examSetting)===null||$===void 0?void 0:$.maxSubmitMinutes)||0,ie=(0,ue.useState)(0),le=(0,re.Z)(ie,2),me=le[0],fe=le[1],Be=X+G*60*1e3,ge=(0,ue.useRef)();return(0,ue.useEffect)(function(){if(G!==0)return ge.current=window.setInterval(function(){fe((Be-new Date().getTime())/1e3)},1e3),function(){clearInterval(ge.current)}},[Be]),(0,ue.useEffect)(function(){me<0&&(ne.submit(),clearInterval(ge.current))},[me]),G===0?(0,P.jsx)(P.Fragment,{}):(0,P.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,P.jsx)(ee.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,P.jsx)("span",{style:{marginLeft:3,color:Z(me)},children:de(me)})]})}),be=c(27400),Ie=c(3980),Qe=["size","marked"],Ne=(0,K.Pi)(function(){var R=(0,e.Rk)(),$=R.lazy,J=(0,be.a)().user;return!$||!J?(0,P.jsx)(P.Fragment,{}):(0,P.jsxs)("div",{style:{marginTop:10,textWrap:"wrap",lineHeight:"24px",fontSize:12,color:"#707070"},children:["\u8FDE\u7EED\u505A\u5BF9",(0,P.jsx)(S.Z,{size:"small",style:{width:60,marginInline:4},defaultValue:J.correctTimes,min:0,max:100,onChange:function(X){X!==null&&Ie.hi.updateUserInfo({correctTimes:X}).then(function(G){G.success&&ve.default.success("\u66F4\u65B0\u6210\u529F")})}}),"\u2003\u6B21\uFF0C\u81EA\u52A8\u79FB\u51FA\u9519\u9898/0\u4EE3\u8868\u6C38\u4E0D\u79FB\u51FA"]})}),Ce=(0,K.Pi)(function(R){var $=(0,e.Rk)(),J=$.props.answerSheetVisible,ne=R.size,X=R.marked,G=X===void 0?!0:X,ie=(0,z.Z)(R,Qe);return J?(0,P.jsx)(L.Z,{title:"\u6807\u8BB0",children:(0,P.jsx)("svg",(0,Q.Z)((0,Q.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:R.size||24,height:R.size||24,className:"marked"},ie),{},{children:(0,P.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:G?"#EA4942":"#d8d8d8"})}))}):(0,P.jsx)(P.Fragment,{})}),Se=(0,K.Pi)(function(R){var $,J,ne,X=R.id,G=R.name,ie=(0,e.Rk)(),le=ie.answerSheet,me=le.find(function(we){return we.id===X}),fe=(0,H.H)(),Be=fe==null||($=fe.project)===null||$===void 0?void 0:$.isAuthenticated,ge=(J=fe.project)===null||J===void 0||(ne=J.setting.examSetting)===null||ne===void 0?void 0:ne.randomSurveyWrong,ze=ie.exerciseMode;return(!ze||!Be||X.length<=10)&&!ge?(0,P.jsx)(P.Fragment,{}):me!=null&&me.favorite?(0,P.jsx)(L.Z,{title:ge?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,P.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){ie.favoriteQuestion({templateId:X,name:G},!1)},children:(0,P.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,P.jsx)(L.Z,{title:ge?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,P.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){ie.favoriteQuestion({templateId:X,name:G})},children:(0,P.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),he=(0,K.Pi)(function(R){var $=(0,e.Rk)(),J=R.finished,ne=R.id,X=R.marked,G=R.seqNo,ie=R.isCorrect;return(0,P.jsxs)("div",{className:V()("answer-sheet-item",{marked:X,finished:J,correct:ie===!0,wrong:ie===!1}),onClick:function(){return $.changePageIndex(ne)},children:[G,X&&(0,P.jsx)(Ce,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),Ee=(0,K.Pi)(function(){var R=(0,e.Rk)(),$=R.answerSheet;return(0,P.jsx)(P.Fragment,{children:$.filter(function(J){return J.display!=="none"}).map(function(J,ne){return(0,ue.createElement)(he,(0,Q.Z)((0,Q.Z)({},J),{},{seqNo:ne+1,key:J.id}))})})}),ye=(0,K.Pi)(function(){var R=(0,e.Rk)(),$=R.answerSheet,J=$.filter(function(G){return G.finished}).length,ne=$.filter(function(G){return!G.finished}).length,X=$.filter(function(G){return G.marked}).length;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,P.jsx)("span",{style:{marginLeft:4},children:J})]}),(0,P.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,P.jsx)("span",{style:{marginLeft:4},children:ne})]}),(0,P.jsxs)("div",{className:"marked",children:[(0,P.jsx)(Ce,{size:18}),"\u6807\u8BB0",(0,P.jsx)("span",{style:{marginLeft:4},children:X})]})]})}),Pe=(0,K.Pi)(function(){return(0,P.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,P.jsx)(pe,{})]})}),Le=(0,K.Pi)(function(){var R=(0,e.Rk)(),$=R.props.answerSheetVisible;return $?(0,P.jsxs)("div",{className:"answer-sheet",children:[(0,P.jsx)(Pe,{}),(0,P.jsx)("div",{className:"answer-sheet-content",children:(0,P.jsx)(Ee,{})}),(0,P.jsx)("div",{className:"answer-sheet-footer",children:(0,P.jsx)(ye,{})}),(0,P.jsx)(Ne,{})]}):(0,P.jsx)(P.Fragment,{})})},95771:function(je,oe,c){"use strict";c.r(oe),c.d(oe,{default:function(){return Ut}});var O=c(94657),L=c(40807),Q=c(78210),z=c(9761),B=c(67294),S=c(54707),w=c(48187),ve=c(13525),e=c(85893),H=function(){var n=(0,S.AK)(),l=(0,B.useContext)(L.ZX),o=l.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(ve.hl,{html:o.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(ve.hl,{html:o.description})})]})},K=function(n){var l=(0,S.AK)();return(0,e.jsx)("div",{className:l+"-body",children:n.children})},q=c(77576),V=c(12028),re=c(57663),ee=c(71577),ue=(0,z.Pi)(function(){var t,n,l=(0,S.AK)("-footer"),o=(0,B.useContext)(L.ZX),a=o.schema,g=o.loading,m=(0,S.Rk)(),v=m.pagination,s=v.current,h=v.pageSize,i=h>1,r=s===1,d=s===h;return(0,e.jsxs)("div",{className:l,children:[d&&(0,e.jsx)("div",{className:l+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(ve.hl,{html:a==null||(t=a.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:l+"-pagination",children:[i&&!r&&(0,e.jsx)("div",{children:(0,e.jsx)(ee.Z,{type:"primary",block:!0,onClick:function(){return m.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!d&&(0,e.jsx)("div",{children:(0,e.jsx)(ee.Z,{type:"primary",block:!0,onClick:function(){return m.handleNext()},children:"\u4E0B\u4E00\u9875"})}),d&&(0,e.jsx)("div",{children:(0,e.jsx)(ee.Z,{type:"primary",block:!0,onClick:function(){return m.submit()},loading:g,children:(0,e.jsx)(ve.hl,{html:((n=a.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:l+"-pagination-info",children:["\u7B2C",s,"\u9875/\u5171",h,"\u9875"]}),m.autoNextPage>0&&(0,e.jsxs)("div",{style:{color:"#999",display:"flex",alignItems:"center",justifyContent:"center",width:200},children:["\u7B54\u5BF9\u81EA\u52A8\u8DF3\u8F6C\u4E0B\u4E00\u9875",(0,e.jsx)(V.Z,{style:{marginLeft:5},checked:m.autoNextPage===1,onChange:function(x){x?m.autoNextPage=1:m.autoNextPage=2}})]})]})]})}),P=c(47673),de=c(4107),Z=c(11849),pe=c(77883),be=c(85986),Ie=c(14965),Qe=c(68318),Ne=c(39002),Ce=c(68351),Se=c(43358),he=c(34041),Ee=c(29985),ye=c(46842),Pe=c(64302),Le=c(27484),R=c.n(Le),$=c(33852);R().locale("zh-cn");function J(t,n){if(!!t)return R()(t,n)}var ne=function(n){var l=n.dictCode,o=n.value,a=n.onChange,g=n.style,m=n.bordered,v=n.className,s=n.parentValue,h=n.cascaderLevel,i=h===void 0?1:h,r=(0,S.Al)(),d=(0,B.useState)([]),u=(0,O.Z)(d,2),x=u[0],f=u[1],j=(0,S.zE)(function(A){i&&i>1&&!s||r.onDictSearch&&r.onDictSearch({dictCode:l,searchValue:A,parentValue:s==null?void 0:s.split("|")[0],cascaderLevel:i}).then(function(C){f(C||[])})},2);return(0,B.useEffect)(function(){i&&i>1&&(s?j(void 0):f([]))},[s,i]),(0,B.useEffect)(function(){!o&&i<=1&&l&&j(void 0),o&&x.length===0&&j(o)},[o]),(0,e.jsx)(he.Z,{options:x,showSearch:!0,filterOption:function(C,E){var y;return((y=E==null?void 0:E.label)!==null&&y!==void 0?y:"").includes(C)},value:o==null?void 0:o.split("|")[0],onChange:function(C){if(C===void 0)a(void 0);else{var E;a("".concat(C,"|").concat((E=x.find(function(y){return y.value===C}))===null||E===void 0?void 0:E.label))}},style:g,bordered:m,dropdownClassName:v,allowClear:!0})};function X(t,n){return n||(t==="date"?"YYYY-MM-DD":t==="dateTime"?"YYYY-MM-DD HH:mm:ss":t==="time"?"HH:mm:ss":"YYYY-MM-DD")}function G(t){return t?t==="YYYY"?"year":t==="YYYY-MM"?"month":"date":"date"}var ie=function(n){var l=n.onChange,o=n.type,a=n.value,g=n.style,m=g===void 0?{width:"100%"}:g,v=n.className,s=n.readOnly,h=n.bordered,i=X(o,n.dateTimeFormat);return i.startsWith("HH")?(0,e.jsx)(Ce.Z,{value:J(a,i),format:i,onChange:function(d,u){return l(u)},style:m,className:v,disabled:s,bordered:h}):(0,e.jsx)(Qe.Z,{onChange:function(d,u){l(u)},disabled:s,format:i,picker:G(i),showTime:i.includes("HH")||i.includes("mm")||i.includes("ss"),showSecond:i.includes("ss"),showMinute:i.includes("mm"),showHour:i.includes("HH"),value:J(a,i),style:m,className:v,bordered:h})},le=function(n){var l,o=n.onChange,a=n.type,g=n.value,m=n.suffix,v=n.style,s=v===void 0?{width:"100%"}:v,h=n.className,i=n.dictCode,r=n.onBlur,d=r===void 0?function(){}:r,u=n.bordered,x=n.parentValue,f=n.cascaderLevel,j=n.icon,A=j===void 0?!0:j,C=n.readOnly,E=C===void 0?!1:C,y=n.schema,I=n.placeholder,b=I===void 0?y==null||(l=y.attribute)===null||l===void 0?void 0:l.placeholder:I;return a==="horzBlank"?(0,e.jsx)(e.Fragment,{}):a==="selectDict"&&i?(0,e.jsx)(ne,{value:g,onChange:o,dictCode:i,style:s,bordered:u,className:h,parentValue:x,cascaderLevel:f}):a==="select"&&y!==null&&y!==void 0&&y.dataSource?(0,e.jsx)(he.Z,{options:y.dataSource,style:{width:200},bordered:u,onChange:o,placeholder:b}):a==="number"?(0,e.jsx)(be.Z,{className:h,onChange:o,onBlur:function(p){var M=p.target.value;d(M===""?void 0:parseFloat(M))},value:g,style:s,addonAfter:m,readOnly:E,bordered:u,placeholder:b}):a==="date"||a==="dateTime"||a==="time"?(0,e.jsx)(ie,(0,Z.Z)({},n)):a==="mobile"?(0,e.jsx)(de.Z,{prefix:A?(0,e.jsx)(Ee.Z,{}):void 0,onChange:function(p){return o(p.target.value)},value:g,className:h,onBlur:function(p){return d(p.target.value)},bordered:u,readOnly:E,placeholder:b}):a==="idCard"?(0,e.jsx)(de.Z,{prefix:A?(0,e.jsx)(ye.Z,{}):void 0,onChange:function(p){return o(p.target.value)},value:g,style:s,className:h,onBlur:function(p){return d(p.target.value)},bordered:u,readOnly:E,placeholder:b}):a==="email"?(0,e.jsx)(de.Z,{prefix:A?(0,e.jsx)(Pe.Z,{}):void 0,onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,style:s,className:h,bordered:u,readOnly:E,placeholder:b}):a==="password"?(0,e.jsx)(de.Z.Password,{onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,suffix:m,style:s,className:h,bordered:u,readOnly:E,placeholder:b||"\u8BF7\u8F93\u5165\u5BC6\u7801"}):(0,e.jsx)(de.Z,{onChange:function(p){return o(p.target.value)},onBlur:function(p){return d(p.target.value)},value:g,suffix:m,style:s,className:h,bordered:u,readOnly:E,placeholder:b})},me=c(49111),fe=c(19650),Be=c(17672),ge=function(n){var l=n.onChange,o=(0,B.useRef)(null),a=(0,B.useRef)(),g=(0,B.useRef)(),m=(0,B.useState)(0),v=(0,O.Z)(m,2),s=v[0],h=v[1];return(0,B.useEffect)(function(){var i=o.current;if(i){var r,d=new Be.Z(o.current);d.addEventListener("beginStroke",function(){h(1)}),a.current=d;var u=Math.max(window.devicePixelRatio||1,1);i.width=i.offsetWidth*u,i.height=i.offsetHeight*u,(r=i.getContext("2d"))===null||r===void 0||r.scale(u,u)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:g.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:o,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:s!==2?"block":"none"}}),s===2&&(0,e.jsx)("img",{src:g.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(fe.Z,{children:[s===1&&(0,e.jsx)(ee.Z,{type:"link",onClick:function(){var r;(r=a.current)===null||r===void 0||r.clear(),h(0)},children:"\u6E05\u7A7A"}),(s===0||s===1)&&(0,e.jsx)(ee.Z,{type:"primary",disabled:s!==1,ghost:!0,size:"small",onClick:function(){var r;l(a.current.toDataURL()),g.current=(r=a.current)===null||r===void 0?void 0:r.toDataURL(),h(2)},children:"\u5B8C\u6210"}),s===2&&(0,e.jsx)(ee.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var r;h(0),(r=a.current)===null||r===void 0||r.clear()},children:"\u91CD\u7B7E"})]})})]})]})},ze=c(3024),we=(0,z.Pi)(function(){var t=(0,B.useContext)(L.ZX),n=t.progressBar,l=(0,S.AK)(),o=(0,S.Rk)(),a=o.progress;return n?(0,e.jsx)(ze.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:l+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),Ye=function(n){var l,o=n.optionId,a=n.questionId,g=n.checked,m=n.checkedCount,v=n.quota,s=n.statEnabled,h=(0,S.Al)(),i=h.statistics,r=i==null?void 0:i.questionStatistics[a],d=((r==null?void 0:r.optionStatistics.reduce(function(j,A){return j+A.count},0))||0)+m,u=(r==null||(l=r.optionStatistics.find(function(j){return j.optionId===o}))===null||l===void 0?void 0:l.count)||0,x=g?u+1:u,f="".concat(Math.floor(x/d*1e3)/10,"%");return!s&&v===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[v&&(0,e.jsxs)("span",{className:"vote-info-cnt",style:{color:v-u>0?"#1890ff":"#949aae"},children:["(\u4F59",v-u,")"]}),s&&m>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[x,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:f}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:f}})})]})]})},He=function(n){var l=n.schema,o=n.type,a=l.attribute,g=a===void 0?{}:a,m=g.examCorrectAnswer,v=(0,S.Al)(),s=v.correctAnswerVisible,h=v.mode;return m&&s&&h==="exam"?o==="FillBlank"||o==="HorzBlank"||o==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:m}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Jt=function(n){var l=n.schema,o=l.attribute,a=o===void 0?{}:o,g=a.examScore,m=useSurvey(),v=m.mode,s=m.examScoreVisible;return g&&v==="exam"&&s?_jsxs("span",{className:"question-score",children:["\uFF08",g,"\u5206\uFF09"]}):_jsx(_Fragment,{})},fn=(0,z.Pi)(function(t){var n=(0,S.Rk)(),l=n.reviewAnswer[t.qId];return l&&!l.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){l.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),$t=c(63185),Me=c(9676),mn=c(36862),gn=c(46533),xn=c(94184),Ze=c.n(xn),Yt=c(12968),An=c(62462),jn=c(91220),We=c(15020);function Ge(t,n,l,o){if(!t)return"";var a=RegExp("_{3,}","g"),g=t.matchAll(a),m=[],v=(0,jn.Z)(g),s;try{for(v.s();!(s=v.n()).done;){var h=s.value,i=h.index,r=h.index+h[0].length;m.push([i,r])}}catch(f){v.e(f)}finally{v.f()}if(m.length===0)return t;for(var d=m[0][0]===0?"":t.substring(0,m[0][0]),u=function(j){var A,C,E=m[j],y=m[j+1],I=t.substring(E[0],E[1]),b=t.substring(E[1],y?y[0]:t.length),N=n[j],p=l?l[N.id]:"";if(((A=N.attribute)===null||A===void 0?void 0:A.dataType)==="select"){var M,D;p=(M=N.dataSource)===null||M===void 0||(D=M.find(function(k){return k.value===p}))===null||D===void 0?void 0:D.label}else if(((C=N.attribute)===null||C===void 0?void 0:C.dataType)==="selectDict"){var F,T;p=(F=p)===null||F===void 0||(T=F.split("|"))===null||T===void 0?void 0:T[1]}d+='<input data-id="'.concat(n[j].id,`" value='`).concat(p||"",`'  class="horz-blank" style="width:`).concat(12*I.length,'px">'),d+=b},x=0;x<m.length;x++)u(x);return d}var Fe=(0,z.Pi)(function(t){var n=t.content,l=t.children,o=t.value,a=o===void 0?{}:o,g=t.onChange,m=t.onBlur,v=t.schema,s=(0,S.Rk)(),h=s.reviewAnswer[v.id];function i(r,d){var u,x;if(a[r]!==d){a[r]=d;var f=l.find(function(E){return E.id===r}),j=f==null||(u=f.attribute)===null||u===void 0?void 0:u.cascaderLevel,A=f==null||(x=f.attribute)===null||x===void 0?void 0:x.dictCode;A&&j&&l.filter(function(E){var y;return((y=E.attribute)===null||y===void 0?void 0:y.dictCode)===A&&E.attribute.cascaderLevel&&E.attribute.cascaderLevel>j}).forEach(function(E){delete a[E.id]}),(d===""||d===void 0)&&delete a[r];var C=(0,Z.Z)({},a);if(Object.keys(C).length!==0)return C}}return(0,e.jsx)("div",{className:"pe-view",onClick:function(d){d.preventDefault(),d.stopPropagation()},children:(0,We.ZP)(Ge(n,l),{replace:function(d){if((d==null?void 0:d.name)==="img"){var u=d.attribs.width;return(0,e.jsx)(An.Z,{width:u?parseFloat(u):void 0,src:d.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}var x=d.attribs;if(!!x){var f=x["data-id"];if(f){var j,A,C,E,y,I=(0,We.e_)(x),b=l.findIndex(function(Y){return Y.id===f}),N=l[b],p=(j=l[b-1])===null||j===void 0?void 0:j.id,M=a[p],D=(N==null||(A=N.attribute)===null||A===void 0?void 0:A.dataType)||"text",F=N==null||(C=N.attribute)===null||C===void 0?void 0:C.dictCode,T=N==null||(E=N.attribute)===null||E===void 0?void 0:E.dateTimeFormat,k=(y=N.attribute)===null||y===void 0?void 0:y.cascaderLevel,U=h==null?void 0:h[f].isCorrect,_=Ze()(I.className,{selected:h&&h.visible,"is-correct":h&&h.visible&&U});return(0,e.jsx)(le,(0,Z.Z)((0,Z.Z)({type:D,value:a[f],parentValue:M,schema:N,cascaderLevel:k,onChange:function(W){return g(i(f,W))},onBlur:function(W){return m(i(f,W))},dictCode:F,dateTimeFormat:T,bordered:!1,icon:!1},I),{},{className:_}))}}}})})}),Cn=(0,z.Pi)(function(t){var n=t.qId,l=t.schema,o=t.checked,a=t.onChange,g=t.value,m=t.onBlur,v=t.disabled,s=l.id,h=l.title,i=l.attribute,r=i===void 0?{}:i,d=(0,S.Rk)(),u=d.reviewAnswer[n],x=u==null?void 0:u[s].selected,f=u==null?void 0:u[s].isCorrect,j=r.dataType;return u&&u.visible&&(x||f)?(0,e.jsxs)("label",{className:Ze()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:x,"is-correct":f}),onClick:function(){return a(!o)},children:[(0,e.jsxs)("span",{children:[!f&&(0,e.jsx)(mn.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),f&&(0,e.jsx)(gn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(Q.Z,{html:h})})]}):(0,e.jsxs)(Me.Z,{value:s,checked:o,onChange:function(C){return a(C.target.checked)},disabled:v,children:[j==="horzBlank"&&l.children?(0,e.jsx)(Fe,{content:h,children:l.children,value:g,schema:l,onBlur:m,onChange:function(C){return a(!0,C)}}):(0,e.jsx)(Q.Z,{html:h}),(0,e.jsx)(He,{schema:t.schema})]})}),Wt=c(88983),De=c(66253),Ve=c(43061),Xe=c(38819),En=c(91508),yn=(0,z.Pi)(function(t){var n=t.qId,l=t.schema,o=t.onBlur,a=t.onChange,g=t.value,m=t.disabled,v=l.id,s=l.title,h=l.attribute,i=(0,S.Rk)(),r=i.reviewAnswer[n],d=r==null?void 0:r[v].selected,u=r==null?void 0:r[v].isCorrect,x=B.useContext(En.ZP),f=h==null?void 0:h.dataType;return r&&r.visible&&(d||u)?(0,e.jsxs)("label",{className:Ze()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:d,"is-correct":u}),onClick:function(){var A;m||x==null||(A=x.onChange)===null||A===void 0||A.call(x,{target:{value:v}})},children:[(0,e.jsxs)("span",{children:[!u&&(0,e.jsx)(Ve.Z,{style:{color:"#ff6d56",marginRight:10}}),u&&(0,e.jsx)(Xe.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(Q.Z,{html:s})})]}):(0,e.jsxs)(De.ZP,{value:v,className:"radio-item",disabled:m,children:[f==="horzBlank"&&l.children?(0,e.jsx)(Fe,{schema:l,content:s,children:l.children,value:typeof g=="boolean"?{}:g,onBlur:o,onChange:a}):(0,e.jsx)(Q.Z,{html:s}),(0,e.jsx)(He,{schema:t.schema})]})}),Bn=(0,z.Pi)(function(t){var n=t.schema,l=t.value,o=t.onChange,a=t.qId,g=t.onBlur,m=(0,S.AK)("-body-question"),v=n.id,s=n.attribute,h=s==null?void 0:s.suffix,i=s==null?void 0:s.dataType,r=s==null?void 0:s.dictCode,d=s==null?void 0:s.dateTimeFormat,u=s==null?void 0:s.readOnly,x=(0,S.Rk)(),f=x.reviewAnswer[a],j=f==null?void 0:f[v].isCorrect;return f&&f.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!j&&(0,e.jsx)(Ve.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),j&&(0,e.jsx)(Xe.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(le,{type:i,value:l[v],readOnly:u,schema:n,className:Ze()("selected",{"is-correct":j}),onChange:function(C){return o(C)},onBlur:g,style:{paddingLeft:20},suffix:h&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(Q.Z,{html:h})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le,{type:i,value:l[v],onChange:function(C){return o(C)},onBlur:g,schema:n,readOnly:u,dictCode:r,dateTimeFormat:d,suffix:h&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(Q.Z,{html:h})})})})}),Gt=c(65011),Vt=c(48736),Xt=c(402),qe=c(20294),Zn=he.Z.Option,Te=qe.Z.Text,qt=function(n){var l=n.onChange,o=n.form,a=n.record,g=useState(n.value),m=_slicedToArray(g,2),v=m[0],s=m[1],h=useState(n.value),i=_slicedToArray(h,2),r=i[0],d=i[1];useEffect(function(){d(n.value)},[n.value]);var u=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),x=_slicedToArray(u,2),f=x[0],j=x[1],A=useThrottleCallback(function(C){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:r,dropdownMatchSelectWidth:!1,onBlur:function(){d(v),v?l==null||l(v):l==null||l(void 0)},onSelect:function(E){s(E),d(E)},allowClear:!0,onClear:function(){s(void 0),d(void 0),l==null||l(void 0)},onSearch:function(E){d(E),A(E)},dropdownRender:function(E){return _jsxs(_Fragment,{children:[E,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(Te,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(Te,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:f.map(function(C){return _jsxs(Zn,{value:C.drugName,children:[_jsxs(Te,{children:[" ",C.drugName]}),_jsxs(Te,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",C.chemicalName,"-",C.stCompName,")"]})]},C.id)})})},pn=(0,z.Pi)(function(t){var n,l=t.schema,o=t.title,a=t.onBlur,g=t.onChange,m=l.type,v=((n=l.children)===null||n===void 0?void 0:n.filter(function(i){var r;return(r=i.attribute)===null||r===void 0?void 0:r.fieldInTitle}))||[],s=(0,z.U$)(),h=s.value;return m!=="HorzBlank"||v.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q.Z,{html:o})}):(0,e.jsx)(Fe,{schema:l,children:v,content:o,onChange:g,onBlur:a,value:h})}),bn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),In=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),Qn=(0,z.Pi)(function(t){var n,l=t.schema,o=t.seqNo,a=o===void 0?0:o,g=(0,S.Rk)(),m=g.props.correctAnswerVisible,v=g.props.questionScore,s=(n=l.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!m||!v||s==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",a,"\u9898"]}),v[l.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",v[l.id],"\u5206"]}),In]}):bn]})}),_t=c(71194),Nn=c(50146);function _e(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var Sn=function(n){var l=n.onChange,o=n.value,a=n.mapMove,g=a===void 0?!1:a,m=n.optionId,v=(0,B.useRef)(null),s=(0,B.useRef)(),h=(0,B.useRef)(),i=(0,B.useRef)(),r=(0,B.useState)(function(){if(!!o){var p=o.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(p&&p.length>2)return[parseFloat(p[1]),parseFloat(p[2])]}}),d=(0,O.Z)(r,2),u=d[0],x=d[1],f=(0,B.useState)(function(){return _e(o)}),j=(0,O.Z)(f,2),A=j[0],C=j[1],E=(0,B.useState)(!1),y=(0,O.Z)(E,2),I=y[0],b=y[1],N=(0,B.useCallback)(function(p){h.current.getLocation(p,function(M,D){if(M==="complete"&&D.geocodes.length){var F=D.geocodes[0].location;i.current.start(F)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,B.useEffect)(function(){if(!!I){window["localMap".concat(m)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(T){var k=new AMap.Map("map-".concat(m),{zoom:16,center:u,dragEnable:g,zoomEnable:g});if(s.current=k,g){var U=new T({mode:"dragMarker",map:k});U.on("success",function(W){C(W.address),x([W.position.lng,W.position.lat])}),u?U.start(u):U.start(),k.panBy(0,1),i.current=U}var _=new AMap.Geocoder({city:"010"});h.current=_;var Y=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});Y.getCurrentPosition(function(W,ae){W=="complete"?(k.setCenter(ae.position),C(ae.formattedAddress),x([ae.position.lng,ae.position.lat])):console.error(ae)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var p="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(m,"&plugin=AMap.Geocoder,AMap.Geolocation"),M=document.createElement("script");M.src=p,document.head.appendChild(M);var D="https://webapi.amap.com/ui/1.1/main-async.js",F=document.createElement("script");F.src=D,document.head.appendChild(F)}},[I]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(de.Z.TextArea,{readOnly:!0,value:_e(o),onClick:function(){return b(!0)}}),(0,e.jsxs)(Nn.Z,{open:I,onCancel:function(){b(!1)},onOk:function(){u&&l("".concat(A,"[").concat(u[0],", ").concat(u[1],"]")),b(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:g&&(0,e.jsx)(de.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(M){return N(M)}})}),(0,e.jsx)("div",{ref:v,id:"map-".concat(m),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:A})]})]})},Pn=(0,z.Pi)(function(t){var n,l,o=t.qId,a=t.schema,g=(0,S.Rk)(),m=g.reviewAnswer[o],v=(n=a.children)===null||n===void 0?void 0:n.map(function(r){var d;return(d=r.attribute)===null||d===void 0?void 0:d.examCorrectAnswer}).filter(function(r){return r}).join(";"),s=v&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(a.type),h=function(){return s?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:v})]}):(0,e.jsx)(e.Fragment,{})},i=function(){var d;if((d=a.attribute)!==null&&d!==void 0&&d.examAnalysis){var u;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(Q.Z,{html:(u=a.attribute)===null||u===void 0?void 0:u.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return m&&m.visible&&((l=a.attribute)!==null&&l!==void 0&&l.examAnalysis||s)?(0,e.jsxs)("div",{className:"answer-analysis",children:[h(),i()]}):(0,e.jsx)(e.Fragment,{})}),Ke=c(76898),en=c(28991),wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"},Rn=wn,Mn=c(27029),nn=function(n,l){return B.createElement(Mn.Z,(0,en.Z)((0,en.Z)({},n),{},{ref:l,icon:Rn}))};nn.displayName="HighlightOutlined";var Fn=B.forwardRef(nn),Dn=qe.Z.Paragraph,Tn=(0,z.Pi)(function(t){var n=t.qId,l=t.schema,o=(0,S.Rk)(),a=o.lazy,g=(0,z.cI)(),m=g.getFieldState(n,function(v){var s;return(s=v.componentProps)===null||s===void 0?void 0:s.note});return a?(0,e.jsx)("div",{className:"answer-note",children:(0,e.jsx)(Dn,{title:"\u6DFB\u52A0\u7B14\u8BB0",editable:{icon:(0,e.jsx)(Fn,{}),triggerType:["icon","text"],tooltip:"\u70B9\u51FB\u7F16\u8F91\u7B14\u8BB0",onChange:function(s){var h,i;(h=o.props)===null||h===void 0||(i=h.onNote)===null||i===void 0||i.call(h,n,s),g.setFieldState(n,function(r){return r.componentProps.note=s})}},children:m})}):(0,e.jsx)(e.Fragment,{})});function On(t){var n=t.schema,l=t.required,o=t.error,a=t.replaceTitle,g=t.seqNo,m=t.onBlur,v=t.onChange,s=t.onFocus,h=(0,B.useContext)(L.ZX),i=h.questionNumber,r=h.requiredVisible,d=(0,S.AK)("-body-question"),u=(0,B.useState)(),x=(0,O.Z)(u,2),f=x[0],j=x[1],A=n.description,C=(0,S.Rk)(),E=C.answerSheet.find(function(b){return b.id===n.id}),y=E==null?void 0:E.marked;(0,B.useEffect)(function(){if(f){var b,N;(b=document.querySelector("[data-id='".concat(n.id,"']")))===null||b===void 0||b.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(n.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(U){U.classList.remove("ant-form-item-has-error")})}if(o.length>0){var p,M=o[0].split("^"),D=(0,O.Z)(M,2),F=D[0],T=D[1],k;T?(k=document.querySelector("[data-id='".concat(F,"']")),j(T)):(k=document.querySelector("[data-id='".concat(n.id,"']")),j(F)),(p=k)===null||p===void 0||p.classList.add("ant-form-item-has-error")}else f&&j(void 0)},[o]);var I=function(){return f?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:f})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:d,children:[(0,e.jsx)("div",{className:"".concat(d,"-head"),children:(0,e.jsxs)("span",{className:d+"-header",children:[(0,e.jsx)(Qn,{schema:n,seqNo:g}),(0,e.jsxs)("h2",{className:d+"-header-title",children:[i&&(0,e.jsx)("span",{className:d+"-header-title-seq",children:(0,e.jsx)("b",{children:i&&g?g:""})}),l&&r&&(0,e.jsx)("span",{className:d+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:d+"-header-title-text",children:(0,e.jsx)(pn,{schema:n,title:a||n.title,onBlur:m,onChange:v,onFocus:s})}),I(),g&&(0,e.jsx)(Ke.M2,{marked:y,onClick:function(){C.markQuestion(n.id,!y)}}),(0,e.jsx)(Ke.rF,{id:n.id,name:n.title})]}),A&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(Q.Z,{html:A})})]})}),(0,e.jsxs)("div",{className:"".concat(d,"-body"),children:[t.children,(0,e.jsx)(fn,{qId:n.id}),(0,e.jsx)(Pn,{qId:n.id,schema:n}),(0,e.jsx)(Tn,{qId:n.id,schema:n})]})]})}(0,w.eC)("Question",(0,z.Pi)(On),"antd");function kn(t){var n=t.schema,l=t.index,o=t.seqNo,a=(0,S.AK)("-body-questionSet"),g=(0,B.useContext)(L.ZX),m=g.questionNumber;return(0,e.jsxs)("div",{className:a,children:[(0,e.jsxs)("div",{className:a+"-title",children:[m&&(0,e.jsx)("span",{className:a+"-title-seq",children:(0,e.jsx)("b",{children:m?o:""})}),(0,e.jsx)(Q.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:a+"-splitLine"})]})}(0,w.eC)("QuestionSet",kn,"antd");var ea=c(84305),Ln=c(88182),zn=c(82925);R().locale("zh-cn");function Hn(t){var n=t.headerVisible,l=t.footerVisible,o=t.schema,a=(0,S.AK)(),g=(0,S.Al)(),m=function(){var s,h=(s=o.attribute)===null||s===void 0?void 0:s.headerImage;if(h)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(h),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Ze()(a,{preview:g.isPreview}),children:[(0,e.jsx)(we,{}),(0,e.jsx)("div",{className:a+"-banner",children:m()}),n&&(0,e.jsx)(H,{}),(0,e.jsx)(Ln.ZP,{locale:zn.Z,children:(0,e.jsx)(K,{children:t.children})}),l&&(0,e.jsx)(ue,{}),(0,e.jsx)(Ke.Ff,{})]})}(0,w.eC)("Survey",Hn,"antd");var na=c(13062),ce=c(71230),ta=c(89032),se=c(15746),te=c(32059);function Kn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children;function m(v,s){l((0,te.Z)({},s,v))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(v){var s=v.id,h=v.title,i=v.attribute,r=i===void 0?{}:i,d=r.mapMove;return(0,e.jsxs)(ce.Z,{gutter:[10,0],"data-id":s,children:[h&&(0,e.jsx)(se.Z,{span:24},v.id),(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(Sn,{optionId:s,onChange:function(x){return m(x,s)},value:a[s],mapMove:d})})]},s)})})}(0,w.RM)("Address",Kn,"antd");var aa=c(43185),Oe=c(32620),ra=c(34792),tn=c(48086),ke=c(39428),an=c(3182),Un=c(81473);function Jn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.readOnly,m=n.children,v=m===void 0?[]:m,s=(0,S.Al)(),h=function(){var i=(0,an.Z)((0,ke.Z)().mark(function r(d){var u,x,f,j;return(0,ke.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:u=d.onSuccess,x=d.onError,f=d.file,j=d.onProgress,s.onUpload&&s.onUpload({file:f,fileType:6},function(E){j&&j({percent:E.loaded/E.total*100})}).then(function(E){if(E.success&&u&&(u(E.data),E.data.content&&l((0,te.Z)({},v[0].id,E.data.content))),!E.success&&x){var y=new Error("Some error");x({event:y})}});case 2:case"end":return C.stop()}},r)}));return function(d){return i.apply(this,arguments)}}();return(0,e.jsx)("div",{children:v==null?void 0:v.map(function(i){var r=i.id,d=i.attribute,u=d===void 0?{}:d,x=u.cameraOnly;return(0,e.jsx)(ce.Z,{style:{marginBottom:10},"data-id":r,children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(de.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:a[r],addonAfter:(0,e.jsx)(Oe.Z,{accept:"image/*",capture:x?"environment":void 0,disabled:g,maxCount:1,beforeUpload:function(j){return u!=null&&u.maxFileSize&&j.size>u.maxFileSize*1024*1024?(tn.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(u.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Oe.Z.LIST_IGNORE):!0},customRequest:h,showUploadList:!1,children:(0,e.jsx)(Un.Z,{})},r)})})},r)})})}(0,w.RM)("Barcode",Jn,"antd");var ia=c(36877),$n=c(18480);function Yn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function v(s){var h={};s.forEach(function(i,r){var d=m[r].id;h[d]=i}),l(h)}return(0,e.jsx)(ce.Z,{children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)($n.Z,{value:m.map(function(s){return a[s.id]}).filter(function(s){return s}),style:{width:260},options:n.dataSource,onChange:v,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,w.RM)("Cascader",Yn,"antd");function Wn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,v=n.attribute,s=24/((v==null?void 0:v.columns)||1),h=(0,S.AK)("-body-question"),i=!!(v!=null&&v.statEnabled),r=(0,S.Al)(),d=(0,S.Rk)(),u=d.hiddenOption[n.id]||[];(0,B.useEffect)(function(){var f=Object.keys(a),j=!1;f.forEach(function(A){u.includes(A)&&(j=!0,delete a[A])}),j&&l((0,Z.Z)({},a))},[u]);function x(f,j,A){return j?a[f]=A||!0:delete a[f],(0,Z.Z)({},a)}return(0,B.useEffect)(function(){m==null||m.forEach(function(f){var j;(j=f.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},f.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ce.Z,{children:m==null?void 0:m.filter(function(f){return!u.includes(f.id)}).map(function(f){var j,A,C,E,y=f.id,I=(j=f.attribute)===null||j===void 0?void 0:j.dataType,b=(A=f.attribute)===null||A===void 0?void 0:A.suffix,N=(C=f.attribute)===null||C===void 0?void 0:C.readOnly,p=(E=f.attribute)===null||E===void 0?void 0:E.quota,M=!1;if(p!==void 0){var D,F=r.statistics,T=F==null?void 0:F.questionStatistics[n.id],k=(T==null||(D=T.optionStatistics.find(function(_){return _.optionId===y}))===null||D===void 0?void 0:D.count)||0,U=p-k;U<=0&&(M=!0)}return(0,e.jsxs)(se.Z,{span:s,className:h+"-option","data-id":y,children:[(0,e.jsx)(Cn,{disabled:M,qId:n.id,schema:f,checked:a.hasOwnProperty(y),onChange:function(Y,W){M||l(x(y,Y,W))},value:typeof a[y]=="boolean"?{}:a[y],onBlur:g}),(0,e.jsx)(Ye,{statEnabled:i,quota:p,checked:!!a[y],optionId:y,questionId:n.id,checkedCount:Object.keys(a).length}),I&&(0,e.jsx)(le,{value:typeof a[y]=="boolean"?"":a[y],style:{maxWidth:200},type:I,onChange:function(Y){return l(x(y,!0,Y))},onBlur:function(Y){return g(x(y,!0,Y))},readOnly:N,suffix:b&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(Q.Z,{html:b})})})]},y)})})})}(0,w.RM)("Checkbox",(0,z.Pi)(Wn),"antd");var la=c(71153),rn=c(60331),sa=c(62999),Gn=c(54680),xe=c(3980),Vn=c(60780),Xn=c.n(Vn);function qn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=m[0].id,s=(0,B.useState)([]),h=(0,O.Z)(s,2),i=h[0],r=h[1];function d(x){v&&((x==null?void 0:x.length)===0?l(void 0):l((0,te.Z)({},v,x==null?void 0:x.map(function(f){return f.value}))))}var u=(0,B.useMemo)(function(){return Xn()(i.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[i]);return(0,B.useEffect)(function(){xe.hi.selectDept({}).then(function(x){x.success&&r(x.data)})},[]),(0,e.jsx)(ce.Z,{children:(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(Gn.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[v]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:u,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:d,showSearch:!1})})})}var _n=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,v=m[0].id,s=(0,B.useState)([]),h=(0,O.Z)(s,2),i=h[0],r=h[1];return(0,B.useEffect)(function(){xe.hi.selectDept({selected:a[v]||[],name:"^_^"}).then(function(d){d.success&&r(d.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(fe.Z,{children:i.map(function(d){return(0,e.jsx)(rn.Z,{color:"blue",children:d.name},d.id)})})})};(0,w.RM)("Dept",qn,"antd"),(0,w.cf)("Dept",_n,"antd");function ln(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,v=(0,S.AK)("-body-question");function s(i,r){a[i]=r,r===""&&delete a[i],l((0,Z.Z)({},a),i)}function h(i,r){a[i]=r,r===""&&delete a[i],g((0,Z.Z)({},a),i)}return(0,e.jsx)("div",{children:m==null?void 0:m.map(function(i){var r=i.id,d=i.title;return(0,e.jsxs)(ce.Z,{style:{marginBottom:10},"data-id":r,children:[d&&(0,e.jsx)(se.Z,{className:v+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:v+"-option-title",children:(0,e.jsx)(Q.Z,{html:i.title})})},i.id),(0,e.jsxs)(se.Z,{span:12,className:v+"-option",children:[(0,e.jsx)(Bn,{qId:n.id,schema:i,value:a,onChange:function(x){return s(r,x)},onBlur:function(x){return h(r,x)}}),(0,e.jsx)(He,{schema:i,type:n.type})]})]},r)})})}(0,w.RM)("FillBlank",ln,"antd"),(0,w.RM)("MultipleBlank",ln,"antd");function et(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,v=n.attribute,s=v===void 0?{}:v,h=s.content;return!h||!m?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Fe,{schema:n,children:m.filter(function(i){var r;return!((r=i.attribute)!==null&&r!==void 0&&r.fieldInTitle)}),content:h,onBlur:g,onChange:l,value:a})}var nt=function(n){var l=n.schema,o=n.value,a=l.children,g=l.attribute,m=g===void 0?{}:g,v=m.content;return(0,e.jsx)("div",{className:"preview pe-view",children:(0,e.jsx)(Q.Z,{html:Ge(v,a,o),replaceP:!1},Math.random())})};(0,w.RM)("HorzBlank",et,"antd"),(0,w.cf)("HorzBlank",nt,"antd");var Ue=c(83279),Ae=c(79521),tt=c(54121),at=function(n){var l=(0,xe.XI)(200),o=(0,O.Z)(l,2),a=o[0],g=o[1],m=(0,xe.XI)(200),v=(0,O.Z)(m,2),s=v[0],h=v[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:a,children:[n.cells.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(i.column.id),children:i.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:s,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(tt.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:g||h?"visible":"hidden"}})})]}))};function sn(t){var n=t.columns,l=t.data,o=t.onAdd,a=t.onDelete,g=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),m=(0,Ae.useTable)({columns:n,data:l,defaultColumn:g},Ae.useBlockLayout),v=m.getTableProps,s=m.getTableBodyProps,h=m.headerGroups,i=m.rows,r=m.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},v()),{},{className:"table",children:[(0,e.jsx)("div",{children:h.map(function(d){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},d.getHeaderGroupProps()),{},{className:"tr",children:d.headers.map(function(u){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},s()),{},{children:i.map(function(d,u){return r(d),(0,B.createElement)(at,(0,Z.Z)((0,Z.Z)({},d),{},{key:u,i:u,onDelete:a?function(){return a(u)}:void 0}))})})),o&&(0,e.jsx)("div",{className:"footer",onClick:o,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function rt(t){var n,l=t.schema,o=t.onChange,a=t.value||[{}],g=l.children,m=g===void 0?[]:g,v=(0,L.Ck)((n=l.attribute)===null||n===void 0?void 0:n.scope,[1,999]),s=(0,B.useMemo)(function(){return m.map(function(h){var i;return{Header:(0,e.jsx)(Q.Z,{html:h.title}),width:(i=h.attribute)===null||i===void 0?void 0:i.width,accessor:h.id,Cell:function(d){var u,x=d.value,f=d.row,j=d.data;if(((u=h.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var A;return(0,e.jsx)(he.Z,{placeholder:"\u8BF7\u9009\u62E9",value:x,style:{width:"100%"},onChange:function(I){j[f.index][h.id]=I},options:((A=h.dataSource)===null||A===void 0?void 0:A.map(function(y){return{label:y.label,value:y.value}}))||[]})}else{var C,E;return(0,e.jsx)(le,{schema:h,type:(C=h.attribute)===null||C===void 0?void 0:C.dataType,dictCode:(E=h.attribute)===null||E===void 0?void 0:E.dictCode,onBlur:function(){},value:x,onChange:function(I){j[f.index][h.id]=I,o((0,Ue.Z)(j))}})}}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(sn,{columns:s,data:a,onAdd:a.length<v[2]?function(){a.push({}),o((0,Ue.Z)(a))}:void 0,onDelete:function(i){a.splice(i,1),o((0,Ue.Z)(a))}})})}var it=function(n){var l=n.schema,o=n.value||[{},{}],a=l.children,g=a===void 0?[]:a,m=(0,B.useMemo)(function(){return g.map(function(v){var s;return{Header:(0,e.jsx)(Q.Z,{html:v.title}),width:(s=v.attribute)===null||s===void 0?void 0:s.width,accessor:v.id,Cell:function(i){var r,d=i.value,u=i.row,x=i.data;if(((r=v.attribute)===null||r===void 0?void 0:r.dataType)==="select"){var f,j,A=((f=v.dataSource)===null||f===void 0||(j=f.find(function(C){return C.value===d}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:A})}else return(0,e.jsx)("span",{children:d})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(sn,{columns:m,data:o})})};(0,w.RM)("MatrixAuto",rt,"antd"),(0,w.cf)("MatrixAuto",it,"antd");var Re=c(93224),lt=["title","rowId"],st=["title","rowId"];function on(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,v=a.headerGroups,s=a.rows,h=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:v.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return h(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function ot(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=n.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(Q.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A,C=j.value,E=j.row,y=j.data,I=(A=u.attribute)===null||A===void 0?void 0:A.dataType;return(0,e.jsxs)("div",{onClick:function(N){var p=!C,M={};y.forEach(function(D,F){var T=D.title,k=D.rowId,U=(0,Re.Z)(D,lt);E.index===F&&(p?U[u.id]=!0:delete U[u.id]),M[k]=U}),l(M)},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(Me.Z,{checked:!!C}),I?(0,e.jsx)(le,{type:I,style:{width:120,marginLeft:5},value:C===!0?"":C,onChange:function(N){var p={};y.forEach(function(M,D){var F=M.title,T=M.rowId,k=(0,Re.Z)(M,st);E.index===D&&(k[u.id]=N),p[T]=k}),l(p)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(Q.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(on,{columns:h,data:i})})}var dt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,v=l.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(Q.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return A?(0,e.jsx)("div",{children:(0,e.jsx)(Me.Z,{checked:!!A,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=l.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(Q.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(on,{columns:h,data:i})})};(0,w.RM)("MatrixCheckbox",ot,"antd"),(0,w.cf)("MatrixCheckbox",dt,"antd");var ut=["title","rowId"];function dn(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,v=a.headerGroups,s=a.rows,h=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:v.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return h(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td","data-id":"".concat(i.original.rowId,"-").concat(r.column.id),children:r.render("Cell")}))})}))})}))]}))}function ct(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=n.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:(0,e.jsx)(Q.Z,{html:u.title}),width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value,C=j.row,E=j.data;return(0,e.jsx)(le,{value:A,onChange:function(I){var b={};E.forEach(function(N,p){var M=N.title,D=N.rowId,F=(0,Re.Z)(N,ut);C.index===p&&(F[u.id]=I),b[D]=F}),l(b)}})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((r=n.attribute)===null||r===void 0?void 0:r.width)||150,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(Q.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(dn,{columns:h,data:i})})}var vt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,v=l.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var r,d=m.map(function(u){var x;return{Header:function(){return(0,e.jsx)(Q.Z,{html:u.title})},width:(x=u.attribute)===null||x===void 0?void 0:x.width,accessor:u.id,Cell:function(j){var A=j.value;return(0,e.jsx)("span",{children:A})}}});return d.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(r=l.attribute)===null||r===void 0?void 0:r.width,accessor:"title"}),d},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:r.title,rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(dn,{columns:h,data:i})})};(0,w.RM)("MatrixFillBlank",ct,"antd"),(0,w.cf)("MatrixFillBlank",vt,"antd");var ht=["title","rowId"],ft=["title","rowId"];function un(t){var n=t.columns,l=t.data,o=B.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,Ae.useTable)({columns:n,data:l,defaultColumn:o},Ae.useBlockLayout),g=a.getTableProps,m=a.getTableBodyProps,v=a.headerGroups,s=a.rows,h=a.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:v.map(function(i){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getHeaderGroupProps()),{},{className:"tr",children:i.headers.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getHeaderProps()),{},{className:"th",children:r.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},m()),{},{children:s.map(function(i){return h(i),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i.getRowProps()),{},{className:"tr",children:i.cells.map(function(r){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},r.getCellProps()),{},{className:"td",children:r.render("Cell")}))})}))})}))]}))}function mt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=n.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var d;return((d=n.children)===null||d===void 0?void 0:d.filter(function(u){var x;return(x=u.attribute)===null||x===void 0?void 0:x.exclusiveFillBlankInMatrix}).map(function(u){return u.id}))||[]},[n]),i=(0,B.useMemo)(function(){var d,u,x=m.map(function(f){var j;return{Header:(0,e.jsx)(Q.Z,{html:f.title}),width:(j=f.attribute)===null||j===void 0?void 0:j.width,accessor:f.id,Cell:function(C){var E,y,I=C.value,b=C.row,N=C.data,p=(E=f.attribute)===null||E===void 0?void 0:E.exclusiveFillBlankInMatrix,M=(y=f.attribute)===null||y===void 0?void 0:y.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!p){var F={};N.forEach(function(T,k){var U=T.title,_=T.rowId,Y=(0,Re.Z)(T,ht);b.index===k?(F[_]={},h.forEach(function(W){F[_][W]=Y[W]}),F[_][f.id]=!0):F[_]=Y}),l(F)}},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[!p&&(0,e.jsx)(De.ZP,{checked:!!I}),M?(0,e.jsx)(le,{type:M,style:{width:120},value:I===!0?"":I,onChange:function(F){var T={};N.forEach(function(k,U){var _=k.title,Y=k.rowId,W=(0,Re.Z)(k,ft);b.index===U?(p?T[Y]=W:(T[Y]={},h.forEach(function(ae){T[Y][ae]=W[ae]})),T[Y][f.id]=F):T[Y]=W}),l(T)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return x.splice(0,0,{Header:(0,e.jsx)(Q.Z,{html:(d=n.attribute)===null||d===void 0?void 0:d.cornerText}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),x},[]),r=s.map(function(d,u){var x=d.id,f=a[x]||{};return(0,Z.Z)({title:(0,e.jsx)(Q.Z,{html:d.title}),rowId:x},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(un,{columns:i,data:r})})}var gt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,v=l.row,s=v===void 0?[]:v,h=(0,B.useMemo)(function(){var r,d,u=m.map(function(x){var f;return{Header:(0,e.jsx)(Q.Z,{html:x.title}),width:(f=x.attribute)===null||f===void 0?void 0:f.width,accessor:x.id,Cell:function(A){var C=A.value,E=A.row,y=A.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(De.ZP,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return u.splice(0,0,{Header:(0,e.jsx)(Q.Z,{html:(r=l.attribute)===null||r===void 0?void 0:r.cornerText}),width:((d=l.attribute)===null||d===void 0?void 0:d.width)||150,accessor:"title"}),u},[]),i=s.map(function(r,d){var u=r.id,x=a[u]||{};return(0,Z.Z)({title:(0,e.jsx)(Q.Z,{html:r.title}),rowId:u},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(un,{columns:h,data:i})})};(0,w.RM)("MatrixRadio",mt,"antd"),(0,w.cf)("MatrixRadio",gt,"antd");function xt(t){for(var n=[],l=2;l<t+2;l++)n.push(l/(t+2));return n}function At(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=[],a=t;a<=n;a++)o.push(a);return l&&o.reverse(),o}function jt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=m[0].id,s=(0,B.useState)(function(){return a[v]||-1}),h=(0,O.Z)(s,2),i=h[0],r=h[1];function d(x){l((0,te.Z)({},v,x))}(0,B.useEffect)(function(){Object.keys(a).length>0&&r(a[v])},[a,v]);var u=function(f){var j=a[f.id],A=f.attribute||{},C=A.scope,E=C===void 0?"[0,10]":C,y=A.npsInvertSort,I=A.npsStart,b=I===void 0?"\u4E0D\u53EF\u80FD":I,N=A.npsEnd,p=N===void 0?"\u6781\u6709\u53EF\u80FD":N,M=E.replace("[","").replace("]","").split(","),D=(0,O.Z)(M,2),F=D[0],T=D[1],k=xt(i||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){r(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:At(parseInt(F),parseInt(T),y).map(function(U){var _={background:"#2672ff",opacity:k[U]};return(0,e.jsx)("div",{className:"nps-item",style:i>=U?_:void 0,onMouseOver:function(){r(U)},onClick:function(){return d(U)},children:U},U)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:y?p:b}),(0,e.jsx)("div",{children:y?b:p})]})]},f.id)};return(0,e.jsx)(ce.Z,{children:m.map(function(x){return u(x)})})}(0,w.RM)("Nps",jt,"antd");var Ct=De.ZP.Group;function cn(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=t.onBlur,m=n.children,v=n.attribute,s=24/((v==null?void 0:v.columns)||1),h=(0,S.AK)("-body-question"),i=!!(v!=null&&v.statEnabled),r=(0,S.Rk)(),d=r.hiddenOption[n.id]||[],u=(0,S.Al)();function x(A){var C,E=A.target.value,y=(C=n.children)===null||C===void 0?void 0:C.find(function(b){return b.id===E});if(y){var I=y.id;l((0,te.Z)({},A.target.value,a[I]||!0))}}(0,B.useEffect)(function(){var A=Object.keys(a)[0];d.includes(A)&&l(void 0)},[d]);function f(A,C){l((0,te.Z)({},A,C||!0),A)}function j(A,C){g((0,te.Z)({},A,C||!0),A)}return(0,B.useEffect)(function(){var A;(A=n.children)===null||A===void 0||A.forEach(function(C){var E,y=C.id,I=C.attribute,b=I==null?void 0:I.dataType;(E=C.attribute)!==null&&E!==void 0&&E.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},y,b?a[y]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Ct,{onChange:x,value:Object.keys(a)[0],style:{width:"100%"},children:(0,e.jsx)(ce.Z,{children:m==null?void 0:m.filter(function(A){return!d.includes(A.id)}).map(function(A){var C,E,y,I,b=A.id,N=(C=A.attribute)===null||C===void 0?void 0:C.dataType,p=(E=A.attribute)===null||E===void 0?void 0:E.suffix,M=(y=A.attribute)===null||y===void 0?void 0:y.readOnly,D=(I=A.attribute)===null||I===void 0?void 0:I.quota,F=!1;if(D!==void 0){var T,k=u.statistics,U=k==null?void 0:k.questionStatistics[n.id],_=(U==null||(T=U.optionStatistics.find(function(W){return W.optionId===b}))===null||T===void 0?void 0:T.count)||0,Y=D-_;Y<=0&&(F=!0)}return(0,e.jsxs)(se.Z,{span:s,className:h+"-option","data-id":b,children:[(0,e.jsx)(yn,{qId:n.id,schema:A,disabled:F,value:a[b],onChange:function(ae){return f(b,ae)},onBlur:function(ae){return j(b,ae)}}),(0,e.jsx)(Ye,{statEnabled:i,quota:D,checked:!!a[b],optionId:b,questionId:n.id,checkedCount:Object.keys(a).length}),N&&(0,e.jsx)(le,{value:a[b]===!0?"":a[b],type:N,schema:A,readOnly:M,style:{maxWidth:200},onChange:function(ae){return f(b,ae)},onBlur:function(ae){return j(b,ae)},suffix:p&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(Q.Z,{html:p})})})]},b)})})})})}(0,w.RM)("Radio",(0,z.Pi)(cn),"antd"),(0,w.RM)("Judge",(0,z.Pi)(cn),"antd");function Et(t){var n=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(Q.Z,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}var yt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(Q.Z,{html:"".concat(n.replaceTitle||n.schema.title||"")})})};(0,w.RM)("Remark",Et,"antd"),(0,w.cf)("Remark",yt,"antd");var oa=c(96433),Je=c(2864),vn=c(41687),Bt=c(46870),hn=c(18613),Zt=c(57206),pt={1:(0,e.jsx)(vn.Z,{}),2:(0,e.jsx)(vn.Z,{}),3:(0,e.jsx)(Bt.Z,{}),4:(0,e.jsx)(hn.Z,{}),5:(0,e.jsx)(hn.Z,{})};function bt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function v(h,i){l((0,te.Z)({},h,i))}var s=function(i){var r=i.attribute||{},d=i.id,u=r.scope,x=u===void 0?"[0,5]":u,f=r.scoreStyle,j=x.replace("[","").replace("]","").split(","),A=(0,O.Z)(j,2),C=A[0],E=A[1];return f==="heart"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),character:(0,e.jsx)(Zt.Z,{}),style:{color:"#ea7463"},value:a[d],count:parseInt(E),onChange:function(I){return v(d,I)}},d):f==="smile"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),character:function(I){var b=I.index;return pt[b+1]},count:parseInt(E),onChange:function(I){return v(d,I)},value:a[d]},d):(0,e.jsx)(Je.Z,{defaultValue:parseInt(C),count:parseInt(E),value:a[d],onChange:function(I){return v(d,I)}},d)};return(0,e.jsx)(ce.Z,{children:m.map(function(h){return s(h)})})}(0,w.RM)("Score",bt,"antd");function It(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g;function v(s){var h,i=(h=n.children)===null||h===void 0?void 0:h.find(function(r){return r.id===s});i&&l((0,te.Z)({},s,!0))}return(0,B.useEffect)(function(){var s;(s=n.children)===null||s===void 0||s.forEach(function(h){var i,r=h.id;(i=h.attribute)!==null&&i!==void 0&&i.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},r,!0))})},[]),(0,e.jsx)(ce.Z,{children:(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(he.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){l(void 0)},showSearch:!0,value:Object.keys(a)[0],filterOption:function(h,i){return(i==null?void 0:i.label).toLowerCase().indexOf(h.toLowerCase())!==-1},onChange:v,style:{width:260},options:m.map(function(s){return{label:s.title,value:s.id}})})})})}(0,w.RM)("Select",It,"antd");var da=c(34669),Qt=c(82833);function Nt(t){var n=t.schema,l=t.onChange,o=n.children,a=(0,S.Al)(),g=(0,B.useState)(0),m=(0,O.Z)(g,2),v=m[0],s=m[1];function h(i,r){var d="signature-".concat(r,"-").concat((0,L.kb)(6),".png");if(!a.onUpload){l((0,te.Z)({},r,[d]));return}fetch(i).then(function(u){return u.blob()}).then(function(u){var x=new File([u],d,{type:"image/png"});a.onUpload({file:x,questionId:n.id,projectId:a.schema.id},function(f){s(f.loaded/f.total*100)}).then(function(f){f.success&&f.data.id&&l((0,te.Z)({},r,[f.data.id]))})})}return(0,e.jsx)("div",{children:o==null?void 0:o.map(function(i){var r=i.id,d=i.title;return(0,e.jsxs)(ce.Z,{gutter:[10,0],"data-id":r,children:[d&&(0,e.jsx)(se.Z,{span:24},i.id),(0,e.jsxs)(se.Z,{span:24,children:[(0,e.jsx)(ge,{onChange:function(x){return h(x,r)}}),v>0&&v!==100&&(0,e.jsx)(Qt.Z,{percent:v,size:"small",showInfo:!1})]})]},r)})})}var St=function(n){var l=n.value,o;return l&&(o=Object.values(l)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:o&&(0,e.jsx)("img",{src:"/api/file?id=".concat(o)})})};(0,w.RM)("Signature",Nt,"antd"),(0,w.cf)("Signature",St,"antd");var $e=c(27049);function Pt(t){var n=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)($e.Z,{plain:!0})})}var wt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)($e.Z,{plain:!0})})};(0,w.RM)("SplitLine",Pt,"antd"),(0,w.cf)("SplitLine",wt,"antd");function Rt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=(0,S.AK)("-body-question");function v(s,h){a[s]=h,h===""&&delete a[s],l((0,Z.Z)({},a))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(s){var h=s.id,i=s.attribute,r=s.title,d=(0,L.Ck)(i==null?void 0:i.autoSize,[2,4]);return(0,e.jsxs)(ce.Z,{style:{marginBottom:10},"data-id":h,children:[r&&(0,e.jsx)(se.Z,{className:m+"-option",span:4,children:s.title&&(0,e.jsx)("span",{className:m+"-option-title",children:s.title})},s.id),(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(de.Z.TextArea,{autoSize:{minRows:d[1],maxRows:d[2]},value:a[h]||"",onChange:function(x){return v(h,x.target.value)}})})]},h)})})}(0,w.RM)("Textarea",Rt,"antd");var Mt=c(43347),Ft=Oe.Z.Dragger;function Dt(t){var n=t.schema,l=t.onChange,o=t.value,a=t.readOnly,g=n.children,m=(0,S.Al)(),v=(0,B.useState)(),s=(0,O.Z)(v,2),h=s[0],i=s[1];(0,B.useEffect)(function(){var u=n.children[0].id,x=o&&o[u]||[];h==null&&x.length>0&&xe.hi.loadFiles({ids:x}).then(function(f){i(f==null?void 0:f.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[o]);var r=function(){var u=(0,an.Z)((0,ke.Z)().mark(function x(f){var j,A,C,E;return(0,ke.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:j=f.onSuccess,A=f.onError,C=f.file,E=f.onProgress,m.onUpload&&m.onUpload({file:C,questionId:n.id,projectId:m.schema.id},function(b){E&&E({percent:b.loaded/b.total*100})}).then(function(b){if(b.success&&j&&j(b.data),!b.success&&A){var N=new Error("Some error");A({event:N})}});case 2:case"end":return I.stop()}},x)}));return function(f){return u.apply(this,arguments)}}(),d=function(x,f){if(i(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(A){return A.status!=="done"})){var j=x.fileList.filter(function(A){return A.status==="done"}).map(function(A){var C;return((C=A.response)===null||C===void 0?void 0:C.id)||A.uid});j.length===0?l(void 0):l((0,te.Z)({},f,j))}};return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(u){var x=u.id,f=u.attribute,j=[];if(f){var A=f.maxFileCount,C=f.maxFileSize,E=f.fileAccept;A&&j.push("\u6700\u591A\u4E0A\u4F20".concat(A,"\u4E2A")),C&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(C,"M\u4EE5\u5185")),E&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(E))}return(0,e.jsxs)(Ft,{multiple:!0,disabled:a,maxCount:(f==null?void 0:f.maxFileCount)||20,accept:f==null?void 0:f.fileAccept,beforeUpload:function(I){return f!=null&&f.maxFileSize&&I.size>f.maxFileSize*1024*1024?(tn.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(f.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Oe.Z.LIST_IGNORE):!0},customRequest:r,onChange:function(I){return d(I,x)},fileList:h,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Mt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}(0,w.RM)("Upload",Dt,"antd");var Tt=c(55686),Ot=he.Z.Option;function kt(t){var n=t.schema,l=t.onChange,o=t.value,a=o===void 0?{}:o,g=n.children,m=g===void 0?[]:g,v=m[0].id,s=(0,B.useState)([]),h=(0,O.Z)(s,2),i=h[0],r=h[1];function d(f){v&&l((0,te.Z)({},v,f))}var u=(0,xe.zE)(function(f){xe.hi.selectUser({name:f,selected:a[v]||[]}).then(function(j){j.success&&r(j.data)})},5),x=function(j){d(j?i.map(function(A){return A.userId}):void 0)};return(0,B.useEffect)(function(){var f;u(""),(f=n.children)===null||f===void 0||f.forEach(function(j){var A,C=j.id;(A=j.attribute)!==null&&A!==void 0&&A.defaultChecked&&Object.keys(a).length===0&&l((0,te.Z)({},C,!0))})},[]),(0,e.jsx)(ce.Z,{children:(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(he.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){l(void 0)},style:{width:"100%"},value:a[v]||[],onSearch:u,showSearch:!0,onChange:d,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)($e.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Me.Z,{onChange:function(C){x(C.target.checked)},children:"\u5168\u9009"})})]})},children:i.map(function(f){return(0,e.jsx)(Ot,{value:f.userId,label:f.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Tt.Z,{user:f,size:20})}),f.name," ",f.deptName&&"(".concat(f.deptName,")")]})},f.userId)})})})})}var Lt=function(n){var l=n.schema,o=n.value,a=o===void 0?{}:o,g=l.children,m=g===void 0?[]:g,v=m[0].id,s=(0,B.useState)([]),h=(0,O.Z)(s,2),i=h[0],r=h[1];return(0,B.useEffect)(function(){xe.hi.selectUser({selected:a[v]||[],name:"^_^"}).then(function(d){d.success&&r(d.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(fe.Z,{children:i.map(function(d){return(0,e.jsx)(rn.Z,{color:"blue",children:d.name},d.userId)})})})};(0,w.RM)("User",kt,"antd"),(0,w.cf)("User",Lt,"antd");var zt=c(73328),Ht=function(n){var l=(0,B.useRef)(null),o=(0,B.useState)(!1),a=(0,O.Z)(o,2),g=a[0],m=a[1];return(0,zt.Z)(l,function(){m(!1)}),(0,e.jsx)("div",{className:Ze()("preview",{active:g}),ref:l,onClick:function(){m(!0)},children:(0,e.jsx)(Q.Z,{html:Object.values(n.value||{})[0]})})};(0,L.cf)("RichText",Ht,"antd");var Kt=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Ut=Kt;(0,L.RM)("RichText",(0,B.lazy)(function(){return Promise.all([c.e(9548),c.e(4257),c.e(9778),c.e(2684),c.e(1031),c.e(3761),c.e(7800),c.e(811),c.e(5601)]).then(c.bind(c,27321))}),"antd"),(0,L.cf)("Upload",(0,B.lazy)(function(){return Promise.all([c.e(9548),c.e(9778),c.e(4502),c.e(3640)]).then(c.bind(c,43640))}),"antd")},55686:function(je,oe,c){"use strict";var O=c(11849),L=c(94233),Q=c(51890),z=c(93224),B=c(89366),S=c(85893),w=["user"],ve=function(H){var K=H.user,q=(0,z.Z)(H,w);return!K||!K.avatar?(0,S.jsx)(Q.C,(0,O.Z)({icon:(0,S.jsx)(B.Z,{}),size:q.size||"small"},q)):(0,S.jsx)(Q.C,(0,O.Z)({src:"/api/public/preview/".concat(K.avatar),size:q.size||"small"},q))};oe.Z=ve},78210:function(je,oe,c){"use strict";var O=c(12968),L=c(62462),Q=c(27856),z=c.n(Q),B=c(15020),S=c(85893),w=function(e){var H=e.html,K=H===void 0?"":H,q=e.replaceP,V=q===void 0?!0:q;return V?(0,S.jsx)("div",{className:"pe-view",children:typeof K=="string"&&(0,B.ZP)(z().sanitize(K,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"),{replace:function(ee){if((ee==null?void 0:ee.name)==="img"){var ue=ee.attribs.width;return(0,S.jsx)(L.Z,{width:ue?parseFloat(ue):void 0,src:ee.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}return ee}})}):(0,S.jsx)(S.Fragment,{children:typeof K=="string"&&(0,B.ZP)(z().sanitize(K))})};oe.Z=w},81643:function(je,oe,c){"use strict";c.d(oe,{Z:function(){return O}});var O=function(Q){if(!Q)return null;var z=typeof Q=="function";return z?Q():Q}},55241:function(je,oe,c){"use strict";var O=c(22122),L=c(67294),Q=c(53124),z=c(94199),B=c(81643),S=c(33603),w=function(H,K){var q={};for(var V in H)Object.prototype.hasOwnProperty.call(H,V)&&K.indexOf(V)<0&&(q[V]=H[V]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,V=Object.getOwnPropertySymbols(H);re<V.length;re++)K.indexOf(V[re])<0&&Object.prototype.propertyIsEnumerable.call(H,V[re])&&(q[V[re]]=H[V[re]]);return q},ve=function(K){var q=K.title,V=K.content,re=K.prefixCls;return!q&&!V?null:L.createElement(L.Fragment,null,q&&L.createElement("div",{className:"".concat(re,"-title")},(0,B.Z)(q)),L.createElement("div",{className:"".concat(re,"-inner-content")},(0,B.Z)(V)))},e=L.forwardRef(function(H,K){var q=H.prefixCls,V=H.title,re=H.content,ee=H._overlay,ue=H.placement,P=ue===void 0?"top":ue,de=H.trigger,Z=de===void 0?"hover":de,pe=H.mouseEnterDelay,be=pe===void 0?.1:pe,Ie=H.mouseLeaveDelay,Qe=Ie===void 0?.1:Ie,Ne=H.overlayStyle,Ce=Ne===void 0?{}:Ne,Se=w(H,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),he=L.useContext(Q.E_),Ee=he.getPrefixCls,ye=Ee("popover",q),Pe=Ee();return L.createElement(z.Z,(0,O.Z)({placement:P,trigger:Z,mouseEnterDelay:be,mouseLeaveDelay:Qe,overlayStyle:Ce},Se,{prefixCls:ye,ref:K,overlay:ee||L.createElement(ve,{prefixCls:ye,title:V,content:re}),transitionName:(0,S.mL)(Pe,"zoom-big",Se.transitionName)}))});oe.Z=e},20136:function(je,oe,c){"use strict";var O=c(38663),L=c.n(O),Q=c(31930),z=c.n(Q)},39002:function(je,oe,c){"use strict";var O=c(38663),L=c.n(O),Q=c(92801),z=c.n(Q),B=c(14965)}}]);
