(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[7617],{95357:function(k,p,a){"use strict";a.d(p,{Z:function(){return y}});var v=a(28991),d=a(67294),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},g=Q,c=a(27029),h=function(r,m){return d.createElement(c.Z,(0,v.Z)((0,v.Z)({},r),{},{ref:m,icon:g}))};h.displayName="EyeOutlined";var y=d.forwardRef(h)},78210:function(k,p,a){"use strict";var v=a(12968),d=a(62462),Q=a(27856),g=a.n(Q),c=a(15020),h=a(85893),y=function(r){var m=r.html,f=m===void 0?"":m,C=r.replaceP,O=C===void 0?!0:C;return O?(0,h.jsx)("div",{className:"pe-view",children:typeof f=="string"&&(0,c.ZP)(g().sanitize(f,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"),{replace:function(e){if((e==null?void 0:e.name)==="img"){var t=e.attribs.width;return(0,h.jsx)(d.Z,{width:t?parseFloat(t):void 0,src:e.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}return e}})}):(0,h.jsx)(h.Fragment,{children:typeof f=="string"&&(0,c.ZP)(g().sanitize(f))})};p.Z=y},32235:function(k,p,a){"use strict";a.d(p,{b:function(){return O}});var v=a(11849),d=a(39428),Q=a(34792),g=a(48086),c=a(3182),h=a(69610),y=a(54941),E=a(3980),r=a(54531),m=a(36855),f=a(42238),C=a.n(f),O=function(){function i(e){var t;(0,h.Z)(this,i),this.id=void 0,this.project=void 0,this.survey=void 0,this.loading=void 0,this.verifying=!1,this.saving=!1,this.isPC=void 0,this.errorCode=void 0,this.errorMessage=void 0,this.progress=0,this.confirmTempAnswerType=0,this.statistics=void 0,this.answerUrl=void 0,this.answerQrCodeUrl=void 0,this.loginRequired=void 0,this.whitelistName=void 0,this.success=void 0,this.answerId=void 0,this.repoId=void 0,this.examExerciseType=void 0,this.answerView=void 0,this.values=void 0,this.initialQuestionScore=void 0,this.openId=void 0,this.token=void 0,this.surveyRef=void 0,this.id=e.id,this.answerId=e.answerId,this.surveyRef=e.surveyRef,this.repoId=e.repoId,this.examExerciseType=e.examExerciseType;var n=m.parse(window.location.search);n&&(this.openId=n.openId,this.token=n["sk-token"]),this.makeObservable(),this.loadProject(),this.confirmTempAnswerType=(t=this.savedAnswer)!==null&&t!==void 0&&t.progress?1:0}return(0,y.Z)(i,[{key:"makeObservable",value:function(){(0,r.Ou)(this,{id:r.LO.ref,answerId:r.LO.ref,survey:r.LO.ref,loading:r.LO.ref,saving:r.LO.ref,verifying:r.LO.ref,project:r.LO.ref,errorCode:r.LO.ref,errorMessage:r.LO.ref,progress:r.LO.ref,confirmTempAnswerType:r.LO.ref,statistics:r.LO.ref,answerUrl:r.LO.ref,answerQrCodeUrl:r.LO.ref,success:r.LO.ref,answerView:r.LO.ref,values:r.LO.ref,loginRequired:r.LO.ref,whitelistName:r.LO.ref,openId:r.LO.ref,token:r.LO.ref,passwordRequired:r.LO.computed,mode:r.LO.computed,tempSaveId:r.LO.computed,status:r.LO.computed,setting:r.LO.computed,tempSave:r.aD,saveData:r.aD,loadProject:r.aD,changeProgress:r.aD,validate:r.aD})}},{key:"setting",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.setting}},{key:"status",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.status}},{key:"passwordRequired",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.passwordRequired}},{key:"mode",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.mode}},{key:"tempSaveId",get:function(){return"savedAnswer-"+this.id}},{key:"savedAnswer",get:function(){var t=localStorage.getItem(this.tempSaveId);return t&&JSON.parse(t)}},{key:"startTime",get:function(){var t,n,s;return((t=this.savedAnswer)===null||t===void 0||(n=t.metaInfo)===null||n===void 0||(s=n.answerInfo)===null||s===void 0?void 0:s.startTime)||new Date().getTime()}},{key:"tempSave",value:function(t){var n=localStorage.getItem(this.tempSaveId),s;n?(s=JSON.parse(n),s.answer=t,s.progress=this.progress):s={answer:t,metaInfo:{answerInfo:{startTime:new Date().getTime()}},progress:this.progress},localStorage.setItem(this.tempSaveId,JSON.stringify(s))}},{key:"saveData",value:function(){var e=(0,c.Z)((0,d.Z)().mark(function n(s,o){var A,u,l=this,I,S,T,B,P,b,D,L,w;return(0,d.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(I=o||{},S=I.answerId,T=I.forceSubmit,this.saving=!0,B=new(C())().getResult(),P={answer:s,projectId:this.id,metaInfo:{answerInfo:{startTime:this.startTime,endTime:new Date().getTime()},clientInfo:{browser:B.browser.name||"",browserVersion:B.browser.version||"",deviceType:B.device.type||"",platform:B.os.name||"",platformVersion:B.os.version||""}},id:S||this.answerId,whitelistName:this.whitelistName},b=this.startTime,D=((A=this.project)===null||A===void 0||(u=A.setting.examSetting)===null||u===void 0?void 0:u.minSubmitMinutes)||0,L=b+D*60*1e3,!(D>0&&new Date().getTime()<L&&T!==!0)){_.next=11;break}return g.default.error("\u672A\u5230\u4EA4\u5377\u65F6\u95F4"),this.saving=!1,_.abrupt("return");case 11:return _.next=13,E.hi.post(this.getUrlWithToken("/api/public/saveAnswer"),P);case 13:return w=_.sent,(0,r.aD)(function(){w.success&&(w.data.answerId?l.answerId=w.data.answerId:w.data.examScore!==void 0,l.answerView=w.data,l.values=s,l.success=!0,localStorage.removeItem(l.tempSaveId)),l.saving=!1}),_.abrupt("return",w);case 16:case"end":return _.stop()}},n,this)}));function t(n,s){return e.apply(this,arguments)}return t}()},{key:"loadStatistics",value:function(){var e=(0,c.Z)((0,d.Z)().mark(function n(){var s=this,o;return(0,d.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.loading){u.next=2;break}return u.abrupt("return");case 2:return this.loading=!0,u.next=5,E.hi.post(this.getUrlWithToken("/api/public/statistics"),{id:this.id});case 5:o=u.sent,(0,r.aD)(function(){o.success&&(s.statistics=o.data),s.loading=!1});case 7:case"end":return u.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadProject",value:function(){var e=(0,c.Z)((0,d.Z)().mark(function n(){var s=this,o;return(0,d.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.loading=!0,u.next=3,E.hi.post(this.getUrlWithToken("/api/public/loadProject"),{id:this.id,answerId:this.answerId,repoId:this.repoId,examExerciseType:this.examExerciseType});case 3:o=u.sent,(0,r.aD)(function(){if(o.success){var l;s.project=o.data,s.loginRequired=o.data.loginRequired,s.initialQuestionScore=(l=o.data.examInfo)===null||l===void 0?void 0:l.questionScore,s.survey=o.data.survey,s.values=o.data.answer,o.data.answerId&&(s.answerId=o.data.answerId)}else s.errorMessage=o.message;s.errorCode=o.code,s.loading=!1});case 5:case"end":return u.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"validate",value:function(){var e=(0,c.Z)((0,d.Z)().mark(function n(s){var o=this,A;return(0,d.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifying=!0,l.next=3,E.hi.post(this.getUrlWithToken("/api/public/validateProject"),{id:this.id,answer:s,answerId:this.answerId});case 3:A=l.sent,(0,r.aD)(function(){if(A.success){var I;o.project=A.data,o.loginRequired=!1,o.survey=A.data.survey,o.whitelistName=(I=s.whitelistName)===null||I===void 0?void 0:I.whitelistName}else g.default.error(A.message);o.verifying=!1});case 5:case"end":return l.stop()}},n,this)}));function t(n){return e.apply(this,arguments)}return t}()},{key:"upload",value:function(){var e=(0,c.Z)((0,d.Z)().mark(function n(s,o){return(0,d.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",E.hi.upload("/api/public/upload",(0,v.Z)({fileType:4,basePath:this.id},s),o));case 1:case"end":return u.stop()}},n,this)}));function t(n,s){return e.apply(this,arguments)}return t}()},{key:"changeProgress",value:function(t){this.progress=t}},{key:"getUrlWithToken",value:function(t){return m.stringifyUrl({url:t,query:{"sk-token":this.token}})}}]),i}()},27678:function(k,p,a){"use strict";a.d(p,{g1:function(){return f},os:function(){return O}});var v=/margin|padding|width|height|max|min|offset/,d={left:!0,top:!0},Q={cssFloat:1,styleFloat:1,float:1};function g(i){return i.nodeType===1?i.ownerDocument.defaultView.getComputedStyle(i,null):{}}function c(i,e,t){if(e=e.toLowerCase(),t==="auto"){if(e==="height")return i.offsetHeight;if(e==="width")return i.offsetWidth}return e in d||(d[e]=v.test(e)),d[e]?parseFloat(t)||0:t}function h(i,e){var t=arguments.length,n=g(i);return e=Q[e]?"cssFloat"in i.style?"cssFloat":"styleFloat":e,t===1?n:c(i,e,n[e]||i.style[e])}function y(i,e,t){var n=arguments.length;if(e=Q[e]?"cssFloat"in i.style?"cssFloat":"styleFloat":e,n===3)return typeof t=="number"&&v.test(e)&&(t="".concat(t,"px")),i.style[e]=t,t;for(var s in e)e.hasOwnProperty(s)&&y(i,s,e[s]);return g(i)}function E(i){return i===document.body?document.documentElement.clientWidth:i.offsetWidth}function r(i){return i===document.body?window.innerHeight||document.documentElement.clientHeight:i.offsetHeight}function m(){var i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:i,height:e}}function f(){var i=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:i,height:e}}function C(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function O(i){var e=i.getBoundingClientRect(),t=document.documentElement;return{left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}}}]);
