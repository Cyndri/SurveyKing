(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[3717],{42110:function(y,g){"use strict";var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};g.Z=e},64317:function(y,g,e){"use strict";var r=e(28991),d=e(81253),E=e(22270),P=e(67294),c=e(66758),K=e(8932),T=e(85893),O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],o=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=function(_,I){var A=_.fieldProps,l=_.children,t=_.params,n=_.proFieldProps,s=_.mode,a=_.valueEnum,u=_.request,f=_.showSearch,m=_.options,h=(0,d.Z)(_,O),B=(0,P.useContext)(c.Z);return(0,T.jsx)(K.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,E.h)(a),request:u,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:m,mode:s,showSearch:f,getPopupContainer:B.getPopupContainer},A),ref:I,proFieldProps:n},h),{},{children:l}))},Z=P.forwardRef(function(v,_){var I=v.fieldProps,A=v.children,l=v.params,t=v.proFieldProps,n=v.mode,s=v.valueEnum,a=v.request,u=v.options,f=(0,d.Z)(v,o),m=(0,r.Z)({options:u,mode:n||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),h=(0,P.useContext)(c.Z);return(0,T.jsx)(K.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,E.h)(s),request:a,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:h.getPopupContainer},m),ref:_,proFieldProps:t},f),{},{children:A}))}),x=P.forwardRef(i),R=Z,j=x;j.SearchSelect=R,j.displayName="ProFormComponent",g.Z=j},5966:function(y,g,e){"use strict";var r=e(28481),d=e(28991),E=e(81253),P=e(21770),c=e(55843),K=e(55241),T=e(97435),O=e(67294),o=e(8932),i=e(85893),Z=["fieldProps","proFieldProps"],x=["fieldProps","proFieldProps"],R="text",j=function(l){var t=l.fieldProps,n=l.proFieldProps,s=(0,E.Z)(l,Z);return(0,i.jsx)(o.Z,(0,d.Z)({valueType:R,fieldProps:t,filedConfig:{valueType:R},proFieldProps:n},s))},v=function(l){var t=(0,P.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),n=(0,r.Z)(t,2),s=n[0],a=n[1];return(0,i.jsx)(c.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(f){var m,h=f.getFieldValue(l.name||[]);return(0,i.jsx)(K.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:a,content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(m=l.statusRender)===null||m===void 0?void 0:m.call(l,h),l.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:s,children:l.children}))}})},_=function(l){var t=l.fieldProps,n=l.proFieldProps,s=(0,E.Z)(l,x),a=(0,O.useState)(!1),u=(0,r.Z)(a,2),f=u[0],m=u[1];return t!=null&&t.statusRender&&s.name?(0,i.jsx)(v,{name:s.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:f,onOpenChange:m,children:(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,T.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var p;t==null||(p=t.onBlur)===null||p===void 0||p.call(t,B),m(!1)},onClick:function(B){var p;t==null||(p=t.onClick)===null||p===void 0||p.call(t,B),m(!0)}}),proFieldProps:n,filedConfig:{valueType:R}},s))})}):(0,i.jsx)(o.Z,(0,d.Z)({valueType:"password",fieldProps:t,proFieldProps:n,filedConfig:{valueType:R}},s))},I=j;I.Password=_,I.displayName="ProFormComponent",g.Z=I},95101:function(y){y.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",top:"top___1x2PK",header:"header___3Kw-q",logo:"logo___2aK9c",title:"title___1Izp8",desc:"desc___vFX8U",main:"main___19HXK",icon:"icon___14_b2",other:"other____-JZS",register:"register___3QsXc",prefixIcon:"prefixIcon___2x9jr"}},3178:function(){},955:function(){},29791:function(y,g,e){"use strict";var r=e(27400),d=e(23096),E=e(85893);g.Z=function(){var P,c,K=(0,r.a)(),T=K.system,O=(P=T.setting)===null||P===void 0?void 0:P.copyright,o=[];if((c=T.setting)!==null&&c!==void 0&&c.recordNum){var i;o.push({key:"recordNumber",title:(i=T.setting)===null||i===void 0?void 0:i.recordNum,href:"https://beian.miit.gov.cn/",blankTarget:!0})}return(0,E.jsx)(d.q,{copyright:O||!1,links:o})}},29552:function(y,g,e){"use strict";e.r(g);var r=e(39428),d=e(34792),E=e(48086),P=e(3182),c=e(94657),K=e(17462),T=e(76772),O=e(67294),o=e(75291),i=e(5966),Z=e(64317),x=e(42285),R=e(73727),j=e(29791),v=e(95101),_=e.n(v),I=e(27400),A=e(80582),l=e(5481),t=e.n(l),n=e(3980),s=e(85893),a=function(m){var h=m.content;return(0,s.jsx)(T.Z,{style:{marginBottom:24},message:h,type:"error",showIcon:!0})},u=function(){var m=(0,O.useState)(!1),h=(0,c.Z)(m,2),B=h[0],p=h[1],Y=(0,O.useState)(),w=(0,c.Z)(Y,2),V=w[0],k=w[1],H=(0,I.a)(),M=H.system,N=(0,O.useState)(""),X=(0,c.Z)(N,2),G=X[0],q=X[1],S=(0,O.useState)([]),F=(0,c.Z)(S,2),b=F[0],ee=F[1],z=(0,x.YB)(),J=function(){var D=(0,P.Z)((0,r.Z)().mark(function U(W){var $;return(0,r.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,b.length===1&&(W.role=b[0].id),C.next=4,H.register(W);case 4:if($=C.sent,!$.success){C.next=9;break}return E.default.success("\u6CE8\u518C\u6210\u529F"),x.m8.push("/user/login"),C.abrupt("return");case 9:k($.message),C.next=15;break;case 12:C.prev=12,C.t0=C.catch(0),E.default.error("\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 15:p(!1);case 16:case"end":return C.stop()}},U,null,[[0,12]])}));return function(W){return D.apply(this,arguments)}}();return(0,O.useEffect)(function(){n.hi.getRegisterRoles().then(function(D){D&&ee(D)})},[]),(0,s.jsxs)("div",{className:_().container,children:[(0,s.jsx)("div",{className:_().lang,"data-lang":!0,children:x.pD&&(0,s.jsx)(x.pD,{})}),(0,s.jsxs)("div",{className:_().content,children:[(0,s.jsxs)("div",{className:_().top,children:[(0,s.jsx)("div",{className:_().header,children:(0,s.jsxs)(R.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:_().logo,src:M.avatar?"/api/public/preview/".concat(M==null?void 0:M.avatar):t()}),(0,s.jsx)("span",{className:_().title,children:M==null?void 0:M.name})]})}),(0,s.jsx)("div",{className:_().desc,children:M==null?void 0:M.description})]}),(0,s.jsx)("div",{className:_().main,children:(0,s.jsxs)(o.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:z.formatMessage({id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C"})},render:function(U,W){return W.pop()},submitButtonProps:{loading:B,size:"large",style:{width:"100%"},htmlType:"submit"}},onFinish:function(){var D=(0,P.Z)((0,r.Z)().mark(function U(W){return(0,r.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!B){L.next=2;break}return L.abrupt("return");case 2:return p(!0),L.next=5,J(W);case 5:case"end":return L.stop()}},U)}));return function(U){return D.apply(this,arguments)}}(),children:[V&&(0,s.jsx)(a,{content:V}),(0,s.jsx)(i.Z,{label:"\u59D3\u540D",name:"name",fieldProps:{size:"large"},placeholder:z.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:(0,s.jsx)(x._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u59D3\u540D!"})}]}),(0,s.jsx)(i.Z,{label:"\u767B\u5F55\u8D26\u53F7",name:"username",fieldProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7",rules:[{required:!0,message:"\u767B\u5F55\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(i.Z.Password,{label:"\u5BC6\u7801",name:"password",fieldProps:{size:"large",onChange:function(U){q(U.target.value)}},placeholder:z.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(x._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{pattern:M.registerInfo.strongPasswordEnabled?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,16}$/:/.{6,}/,message:M.registerInfo.strongPasswordEnabled?"8-16\u4F4D\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57,\u4E0D\u80FD\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26":"\u5BC6\u7801\u81F3\u5C116\u4F4D"}]}),(0,s.jsx)(i.Z.Password,{name:"rePassword",label:"\u5BC6\u7801\u786E\u8BA4",fieldProps:{size:"large"},placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:function(){var D=(0,P.Z)((0,r.Z)().mark(function W($,L){return(0,r.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!(L&&G&&L!==G)){Q.next=2;break}throw new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4!");case 2:case"end":return Q.stop()}},W)}));function U(W,$){return D.apply(this,arguments)}return U}()}]}),b.length>1&&(0,s.jsx)(Z.Z,{name:"role",label:"\u9009\u62E9\u89D2\u8272",fieldProps:{size:"large"},options:b.map(function(D){return{label:D.name,value:D.id}}),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]}),(0,s.jsx)("div",{style:{marginBottom:24,display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(R.rU,{to:"/user/login",children:"\u8FD4\u56DE\u767B\u5F55"})})]})})]}),(0,s.jsx)(j.Z,{})]})};g.default=(0,A.Pi)(u)},5481:function(y,g,e){y.exports=e.p+"static/logo.efd90f0d.svg"},17462:function(y,g,e){"use strict";var r=e(38663),d=e.n(r),E=e(3178),P=e.n(E)},11382:function(y,g,e){"use strict";var r=e(22122),d=e(96156),E=e(28481),P=e(94184),c=e.n(P),K=e(23279),T=e.n(K),O=e(98423),o=e(67294),i=e(53124),Z=e(96159),x=e(93355),R=function(t,n){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(t);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(s[a[u]]=t[a[u]]);return s},j=(0,x.b)("small","default","large"),v=null;function _(t,n){var s=n.indicator,a="".concat(t,"-dot");return s===null?null:(0,Z.l$)(s)?(0,Z.Tm)(s,{className:c()(s.props.className,a)}):(0,Z.l$)(v)?(0,Z.Tm)(v,{className:c()(v.props.className,a)}):o.createElement("span",{className:c()(a,"".concat(t,"-dot-spin"))},o.createElement("i",{className:"".concat(t,"-dot-item")}),o.createElement("i",{className:"".concat(t,"-dot-item")}),o.createElement("i",{className:"".concat(t,"-dot-item")}),o.createElement("i",{className:"".concat(t,"-dot-item")}))}function I(t,n){return!!t&&!!n&&!isNaN(Number(n))}var A=function(n){var s=n.spinPrefixCls,a=n.spinning,u=a===void 0?!0:a,f=n.delay,m=n.className,h=n.size,B=h===void 0?"default":h,p=n.tip,Y=n.wrapperClassName,w=n.style,V=n.children,k=R(n,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),H=o.useState(function(){return u&&!I(u,f)}),M=(0,E.Z)(H,2),N=M[0],X=M[1];o.useEffect(function(){var S=T()(function(){X(u)},f);return S(),function(){var F;(F=S==null?void 0:S.cancel)===null||F===void 0||F.call(S)}},[f,u]);var G=function(){return typeof V!="undefined"},q=function(F){var b=F.direction,ee=c()(s,(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},"".concat(s,"-sm"),B==="small"),"".concat(s,"-lg"),B==="large"),"".concat(s,"-spinning"),N),"".concat(s,"-show-text"),!!p),"".concat(s,"-rtl"),b==="rtl"),m),z=(0,O.Z)(k,["indicator","prefixCls"]),J=o.createElement("div",(0,r.Z)({},z,{style:w,className:ee,"aria-live":"polite","aria-busy":N}),_(s,n),p?o.createElement("div",{className:"".concat(s,"-text")},p):null);if(G()){var D=c()("".concat(s,"-container"),(0,d.Z)({},"".concat(s,"-blur"),N));return o.createElement("div",(0,r.Z)({},z,{className:c()("".concat(s,"-nested-loading"),Y)}),N&&o.createElement("div",{key:"loading"},J),o.createElement("div",{className:D,key:"container"},V))}return J};return o.createElement(i.C,null,q)},l=function(n){var s=n.prefixCls,a=o.useContext(i.E_),u=a.getPrefixCls,f=u("spin",s),m=(0,r.Z)((0,r.Z)({},n),{spinPrefixCls:f});return o.createElement(A,(0,r.Z)({},m))};l.setDefaultIndicator=function(t){v=t},g.Z=l},20228:function(y,g,e){"use strict";var r=e(38663),d=e.n(r),E=e(955),P=e.n(E)}}]);
