(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[1469],{82061:function(N,M,c){"use strict";var g=c(28991),D=c(67294),R=c(47046),k=c(27029),w=function(U,S){return D.createElement(k.Z,(0,g.Z)((0,g.Z)({},U),{},{ref:S,icon:R.Z}))},y=D.forwardRef(w);M.Z=y},90631:function(N,M,c){"use strict";c.d(M,{Z:function(){return U}});var g=c(28991),D=c(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},k=R,w=c(27029),y=function(I,T){return D.createElement(w.Z,(0,g.Z)((0,g.Z)({},I),{},{ref:T,icon:k}))},A=D.forwardRef(y),U=A},13059:function(N,M,c){"use strict";c.r(M),c.d(M,{default:function(){return oe}});var g=c(22122),D=c(6610),R=c(5991),k=c(10379),w=c(60446),y=c(67294),A=c(96156),U=c(81253),S=c(55507),I=c(90484),T=c(92137),L=c(85061),X=c(94184),x=c.n(X),V=c(64217);function z(o,n){var f="cannot ".concat(o.method," ").concat(o.action," ").concat(n.status,"'"),e=new Error(f);return e.status=n.status,e.method=o.method,e.url=o.action,e}function K(o){var n=o.responseText||o.response;if(!n)return n;try{return JSON.parse(n)}catch(f){return n}}function G(o){var n=new XMLHttpRequest;o.onProgress&&n.upload&&(n.upload.onprogress=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),o.onProgress(a)});var f=new FormData;o.data&&Object.keys(o.data).forEach(function(r){var a=o.data[r];if(Array.isArray(a)){a.forEach(function(s){f.append("".concat(r,"[]"),s)});return}f.append(r,a)}),o.file instanceof Blob?f.append(o.filename,o.file,o.file.name):f.append(o.filename,o.file),n.onerror=function(a){o.onError(a)},n.onload=function(){return n.status<200||n.status>=300?o.onError(z(o,n),K(n)):o.onSuccess(K(n),n)},n.open(o.method,o.action,!0),o.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var e=o.headers||{};return e["X-Requested-With"]!==null&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e).forEach(function(r){e[r]!==null&&n.setRequestHeader(r,e[r])}),n.send(f),{abort:function(){n.abort()}}}var J=+new Date,Q=0;function B(){return"rc-upload-".concat(J,"-").concat(++Q)}var Y=c(80334),W=function(o,n){if(o&&n){var f=Array.isArray(n)?n:n.split(","),e=o.name||"",r=o.type||"",a=r.replace(/\/.*$/,"");return f.some(function(s){var t=s.trim();if(/^\*(\/\*)?$/.test(s))return!0;if(t.charAt(0)==="."){var l=e.toLowerCase(),i=t.toLowerCase(),d=[i];return(i===".jpg"||i===".jpeg")&&(d=[".jpg",".jpeg"]),d.some(function(v){return l.endsWith(v)})}return/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):r===t?!0:/^\w+$/.test(t)?((0,Y.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0):!1})}return!0};function q(o,n){var f=o.createReader(),e=[];function r(){f.readEntries(function(a){var s=Array.prototype.slice.apply(a);e=e.concat(s);var t=!s.length;t?n(e):r()})}r()}var _=function(n,f,e){var r=function a(s,t){!s||(s.path=t||"",s.isFile?s.file(function(l){e(l)&&(s.fullPath&&!l.webkitRelativePath&&(Object.defineProperties(l,{webkitRelativePath:{writable:!0}}),l.webkitRelativePath=s.fullPath.replace(/^\//,""),Object.defineProperties(l,{webkitRelativePath:{writable:!1}})),f([l]))}):s.isDirectory&&q(s,function(l){l.forEach(function(i){a(i,"".concat(t).concat(s.name,"/"))})}))};n.forEach(function(a){r(a.webkitGetAsEntry())})},ee=_,re=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],te=function(o){(0,k.Z)(f,o);var n=(0,w.Z)(f);function f(){var e;(0,D.Z)(this,f);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),e.state={uid:B()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(t){var l=e.props,i=l.accept,d=l.directory,v=t.target.files,p=(0,L.Z)(v).filter(function(h){return!d||W(h,i)});e.uploadFiles(p),e.reset()},e.onClick=function(t){var l=e.fileInput;if(!!l){var i=t.target,d=e.props.onClick;if(i&&i.tagName==="BUTTON"){var v=l.parentNode;v.focus(),i.blur()}l.click(),d&&d(t)}},e.onKeyDown=function(t){t.key==="Enter"&&e.onClick(t)},e.onFileDrop=function(t){var l=e.props.multiple;if(t.preventDefault(),t.type!=="dragover")if(e.props.directory)ee(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,function(d){return W(d,e.props.accept)});else{var i=(0,L.Z)(t.dataTransfer.files).filter(function(d){return W(d,e.props.accept)});l===!1&&(i=i.slice(0,1)),e.uploadFiles(i)}},e.uploadFiles=function(t){var l=(0,L.Z)(t),i=l.map(function(d){return d.uid=B(),e.processFile(d,l)});Promise.all(i).then(function(d){var v=e.props.onBatchStart;v==null||v(d.map(function(p){var h=p.origin,C=p.parsedFile;return{file:h,parsedFile:C}})),d.filter(function(p){return p.parsedFile!==null}).forEach(function(p){e.post(p)})})},e.processFile=function(){var t=(0,T.Z)((0,S.Z)().mark(function l(i,d){var v,p,h,C,b,F,m,P,O;return(0,S.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(v=e.props.beforeUpload,p=i,!v){u.next=14;break}return u.prev=3,u.next=6,v(i,d);case 6:p=u.sent,u.next=12;break;case 9:u.prev=9,u.t0=u.catch(3),p=!1;case 12:if(p!==!1){u.next=14;break}return u.abrupt("return",{origin:i,parsedFile:null,action:null,data:null});case 14:if(h=e.props.action,typeof h!="function"){u.next=21;break}return u.next=18,h(i);case 18:C=u.sent,u.next=22;break;case 21:C=h;case 22:if(b=e.props.data,typeof b!="function"){u.next=29;break}return u.next=26,b(i);case 26:F=u.sent,u.next=30;break;case 29:F=b;case 30:return m=((0,I.Z)(p)==="object"||typeof p=="string")&&p?p:i,m instanceof File?P=m:P=new File([m],i.name,{type:i.type}),O=P,O.uid=i.uid,u.abrupt("return",{origin:i,data:F,parsedFile:O,action:C});case 35:case"end":return u.stop()}},l,null,[[3,9]])}));return function(l,i){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return(0,R.Z)(f,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(r){var a=this,s=r.data,t=r.origin,l=r.action,i=r.parsedFile;if(!!this._isMounted){var d=this.props,v=d.onStart,p=d.customRequest,h=d.name,C=d.headers,b=d.withCredentials,F=d.method,m=t.uid,P=p||G,O={action:l,filename:h,data:s,file:i,headers:C,withCredentials:b,method:F||"post",onProgress:function(u){var E=a.props.onProgress;E==null||E(u,i)},onSuccess:function(u,E){var Z=a.props.onSuccess;Z==null||Z(u,i,E),delete a.reqs[m]},onError:function(u,E){var Z=a.props.onError;Z==null||Z(u,E,i),delete a.reqs[m]}};v(t),this.reqs[m]=P(O)}}},{key:"reset",value:function(){this.setState({uid:B()})}},{key:"abort",value:function(r){var a=this.reqs;if(r){var s=r.uid?r.uid:r;a[s]&&a[s].abort&&a[s].abort(),delete a[s]}else Object.keys(a).forEach(function(t){a[t]&&a[t].abort&&a[t].abort(),delete a[t]})}},{key:"render",value:function(){var r=this.props,a=r.component,s=r.prefixCls,t=r.className,l=r.disabled,i=r.id,d=r.style,v=r.multiple,p=r.accept,h=r.capture,C=r.children,b=r.directory,F=r.openFileDialogOnClick,m=r.onMouseEnter,P=r.onMouseLeave,O=(0,U.Z)(r,re),j=x()((0,A.Z)((0,A.Z)((0,A.Z)({},s,!0),"".concat(s,"-disabled"),l),t,t)),u=b?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},E=l?{}:{onClick:F?this.onClick:function(){},onKeyDown:F?this.onKeyDown:function(){},onMouseEnter:m,onMouseLeave:P,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return y.createElement(a,(0,g.Z)({},E,{className:j,role:"button",style:d}),y.createElement("input",(0,g.Z)({},(0,V.Z)(O,{aria:!0,data:!0}),{id:i,disabled:l,type:"file",ref:this.saveFileInput,onClick:function(se){return se.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:p},u,{multiple:v,onChange:this.onChange},h!=null?{capture:h}:{})),C)}}]),f}(y.Component),ae=te;function $(){}var H=function(o){(0,k.Z)(f,o);var n=(0,w.Z)(f);function f(){var e;(0,D.Z)(this,f);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),e.uploader=void 0,e.saveUploader=function(t){e.uploader=t},e}return(0,R.Z)(f,[{key:"abort",value:function(r){this.uploader.abort(r)}},{key:"render",value:function(){return y.createElement(ae,(0,g.Z)({},this.props,{ref:this.saveUploader}))}}]),f}(y.Component);H.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:$,onError:$,onSuccess:$,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var ne=H,oe=ne}}]);
