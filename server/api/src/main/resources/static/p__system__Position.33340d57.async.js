(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5382],{64317:function(N,O,e){"use strict";var u=e(28991),p=e(81253),c=e(22270),h=e(67294),L=e(66758),y=e(8932),I=e(85893),A=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],S=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],a=function(l,f){var Z=l.fieldProps,o=l.children,r=l.params,d=l.proFieldProps,n=l.mode,F=l.valueEnum,D=l.request,x=l.showSearch,s=l.options,v=(0,p.Z)(l,A),E=(0,h.useContext)(L.Z);return(0,I.jsx)(y.Z,(0,u.Z)((0,u.Z)({valueEnum:(0,c.h)(F),request:D,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({options:s,mode:n,showSearch:x,getPopupContainer:E.getPopupContainer},Z),ref:f,proFieldProps:d},v),{},{children:o}))},W=h.forwardRef(function(i,l){var f=i.fieldProps,Z=i.children,o=i.params,r=i.proFieldProps,d=i.mode,n=i.valueEnum,F=i.request,D=i.options,x=(0,p.Z)(i,S),s=(0,u.Z)({options:D,mode:d||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},f),v=(0,h.useContext)(L.Z);return(0,I.jsx)(y.Z,(0,u.Z)((0,u.Z)({valueEnum:(0,c.h)(n),request:F,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({getPopupContainer:v.getPopupContainer},s),ref:l,proFieldProps:r},x),{},{children:Z}))}),U=h.forwardRef(a),T=W,g=U;g.SearchSelect=T,g.displayName="ProFormComponent",O.Z=g},5966:function(N,O,e){"use strict";var u=e(28481),p=e(28991),c=e(81253),h=e(21770),L=e(55843),y=e(55241),I=e(97435),A=e(67294),S=e(8932),a=e(85893),W=["fieldProps","proFieldProps"],U=["fieldProps","proFieldProps"],T="text",g=function(o){var r=o.fieldProps,d=o.proFieldProps,n=(0,c.Z)(o,W);return(0,a.jsx)(S.Z,(0,p.Z)({valueType:T,fieldProps:r,filedConfig:{valueType:T},proFieldProps:d},n))},i=function(o){var r=(0,h.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),d=(0,u.Z)(r,2),n=d[0],F=d[1];return(0,a.jsx)(L.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(x){var s,v=x.getFieldValue(o.name||[]);return(0,a.jsx)(y.Z,(0,p.Z)((0,p.Z)({getPopupContainer:function(t){return t&&t.parentNode?t.parentNode:t},onOpenChange:F,content:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(s=o.statusRender)===null||s===void 0?void 0:s.call(o,v),o.strengthText?(0,a.jsx)("div",{style:{marginTop:10},children:(0,a.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:n,children:o.children}))}})},l=function(o){var r=o.fieldProps,d=o.proFieldProps,n=(0,c.Z)(o,U),F=(0,A.useState)(!1),D=(0,u.Z)(F,2),x=D[0],s=D[1];return r!=null&&r.statusRender&&n.name?(0,a.jsx)(i,{name:n.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:x,onOpenChange:s,children:(0,a.jsx)("div",{children:(0,a.jsx)(S.Z,(0,p.Z)({valueType:"password",fieldProps:(0,p.Z)((0,p.Z)({},(0,I.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(E){var t;r==null||(t=r.onBlur)===null||t===void 0||t.call(r,E),s(!1)},onClick:function(E){var t;r==null||(t=r.onClick)===null||t===void 0||t.call(r,E),s(!0)}}),proFieldProps:d,filedConfig:{valueType:T}},n))})}):(0,a.jsx)(S.Z,(0,p.Z)({valueType:"password",fieldProps:r,proFieldProps:d,filedConfig:{valueType:T}},n))},f=g;f.Password=l,f.displayName="ProFormComponent",O.Z=f},16894:function(N,O,e){"use strict";var u=e(36863);O.ZP=u.Z},59686:function(N,O,e){"use strict";e.r(O),e.d(O,{default:function(){return x}});var u=e(57663),p=e(71577),c=e(39428),h=e(3182),L=e(34792),y=e(48086),I=e(71194),A=e(50146),S=e(94657),a=e(3980),W=e(57119),U=e(51042),T=e(2048),g=e(16894),i=e(80582),l=e(67294),f=e(11849),Z=e(75291),o=e(92956),r=e(5966),d=e(64317),n=e(85893),F=(0,i.Pi)(function(s){var v=s.onOk,E=s.onClose,t=s.position,j=(0,l.useRef)(),R=!!(t!=null&&t.id),b=(0,a.m2)();return(0,n.jsxs)(o.a,{title:R?t!=null&&t.id?"\u4FEE\u6539\u5C97\u4F4D":"\u65B0\u589E\u5C97\u4F4D":"\u67E5\u770B\u5C97\u4F4D",formRef:j,visible:!0,initialValues:t,drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){E()}},onFinish:function(){var C=(0,h.Z)((0,c.Z)().mark(function P(m){var K;return(0,c.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,b.saveOrUpdatePosition((0,f.Z)((0,f.Z)({},t),m));case 2:K=M.sent,K.success&&v();case 4:case"end":return M.stop()}},P)}));return function(P){return C.apply(this,arguments)}}(),children:[(0,n.jsxs)(Z.ZP.Group,{children:[(0,n.jsx)(r.Z,{name:"name",width:"md",label:"\u5C97\u4F4D\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",required:!0,rules:[{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(r.Z,{width:"md",name:"code",label:"\u5C97\u4F4D\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,n.jsx)(Z.ZP.Group,{children:(0,n.jsx)(d.Z,{width:"md",request:(0,h.Z)((0,c.Z)().mark(function C(){return(0,c.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",[{label:"\u672C\u4EBA",value:"SELF"},{label:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",value:"SELF_AND_SUB"},{label:"\u672C\u90E8\u95E8",value:"DEPT"},{label:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",value:"DEPT_AND_SUB"},{label:"\u5168\u90E8",value:"ALL"}]);case 1:case"end":return m.stop()}},C)})),name:"dataPermissionType",label:"\u6570\u636E\u6743\u9650"})})]})}),D=(0,i.Pi)(function(){var s=(0,a.m2)(),v=(0,l.useRef)(),E=(0,l.useState)(),t=(0,S.Z)(E,2),j=t[0],R=t[1];(0,l.useEffect)(function(){s.loadPermissions()},[s]);var b=[{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0},{title:"\u6570\u636E\u6743\u9650",dataIndex:"dataPermissionType",valueEnum:{SELF:"\u672C\u4EBA",SELF_AND_SUB:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",DEPT:"\u672C\u90E8\u95E8",DEPT_AND_SUB:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",ALL:"\u5168\u90E8"},hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(P,m){return[(0,n.jsx)("a",{onClick:function(){R({visible:!0,current:m})},children:"\u7F16\u8F91"},"edit"),(0,n.jsx)("a",{onClick:function(){A.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?",icon:(0,n.jsx)(W.Z,{}),onOk:function(){s.deletePosition(m.id).then(function(M){if(M.success){var $;y.default.success("\u5220\u9664\u6210\u529F"),($=v.current)===null||$===void 0||$.reload()}})}})},children:"\u5220\u9664"},"delte")]}}];return(0,n.jsxs)(T._z,{title:!1,children:[(0,n.jsx)(g.ZP,{columns:b,actionRef:v,bordered:!0,dataSource:s.positions,request:function(){var C=(0,h.Z)((0,c.Z)().mark(function P(m){return(0,c.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",s.loadPositions(m));case 1:case"end":return B.stop()}},P)}));return function(P){return C.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-position",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},scroll:{x:650},dateFormatter:"string",headerTitle:"\u5C97\u4F4D\u5217\u8868",toolBarRender:function(){return[(0,n.jsx)(p.Z,{icon:(0,n.jsx)(U.Z,{}),type:"primary",onClick:function(){R({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(j==null?void 0:j.visible)&&(0,n.jsx)(F,{onClose:function(){R(void 0)},onOk:function(){var P;R(void 0),(P=v.current)===null||P===void 0||P.reload()},position:j.current})]})}),x=D}}]);
