(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[1271],{31930:function(){},92801:function(){},76898:function(Ee,ie,s){"use strict";s.d(ie,{Ff:function(){return Fe},rF:function(){return oe},M2:function(){return Ze}});var $=s(22385),k=s(94199),B=s(11849),L=s(93224),Z=s(77883),N=s(85986),R=s(34792),e=s(48086),te=s(54707),U=s(49914),H=s(9761),q=s(94184),K=s.n(q),W=s(94657),he=s(78338),fe=s(67294),M=s(85893);function xe(T){if(T=Number(T),T<=0)return"0:0:0";var J=Math.floor(T/3600),Y=Math.floor(T%3600/60),re=Math.floor(T%3600%60),_="".concat(J).padStart(2,"0"),V="".concat(Y).padStart(2,"0"),ue="".concat(re).padStart(2,"0");return"".concat(_,":").concat(V,":").concat(ue)}function se(T){return T<=60?"#ff4d4f":T<=180?"#faad14":"#52c41a"}var P=(0,H.Pi)(function(){var T,J,Y=(0,U.H)(),re=(0,te.Rk)(),_=Y.startTime,V=((T=Y.project)===null||T===void 0||(J=T.setting.examSetting)===null||J===void 0?void 0:J.maxSubmitMinutes)||0,ue=(0,fe.useState)(0),le=(0,W.Z)(ue,2),ye=le[0],je=le[1],Se=_+V*60*1e3,Ae=(0,fe.useRef)();return(0,fe.useEffect)(function(){if(V!==0)return Ae.current=window.setInterval(function(){je((Se-new Date().getTime())/1e3)},1e3),function(){clearInterval(Ae.current)}},[Se]),(0,fe.useEffect)(function(){ye<0&&(re.submit(),clearInterval(Ae.current))},[ye]),V===0?(0,M.jsx)(M.Fragment,{}):(0,M.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,M.jsx)(he.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,M.jsx)("span",{style:{marginLeft:3,color:se(ye)},children:xe(ye)})]})}),pe=s(27400),be=s(3980),Be=["size","marked"],me=(0,H.Pi)(function(){var T=(0,te.Rk)(),J=T.lazy,Y=(0,pe.a)().user;return!J||!Y?(0,M.jsx)(M.Fragment,{}):(0,M.jsxs)("div",{style:{marginTop:10,textWrap:"wrap",lineHeight:"24px",fontSize:12,color:"#707070"},children:["\u8FDE\u7EED\u505A\u5BF9",(0,M.jsx)(N.Z,{size:"small",style:{width:60,marginInline:4},defaultValue:Y.correctTimes,min:0,max:100,onChange:function(_){_!==null&&be.hi.updateUserInfo({correctTimes:_}).then(function(V){V.success&&e.default.success("\u66F4\u65B0\u6210\u529F")})}}),"\u2003\u6B21\uFF0C\u81EA\u52A8\u79FB\u51FA\u9519\u9898/0\u4EE3\u8868\u6C38\u4E0D\u79FB\u51FA"]})}),Ze=(0,H.Pi)(function(T){var J=(0,te.Rk)(),Y=J.props.answerSheetVisible,re=T.size,_=T.marked,V=_===void 0?!0:_,ue=(0,L.Z)(T,Be);return Y?(0,M.jsx)(k.Z,{title:"\u6807\u8BB0",children:(0,M.jsx)("svg",(0,B.Z)((0,B.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:T.size||24,height:T.size||24,className:"marked"},ue),{},{children:(0,M.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:V?"#EA4942":"#d8d8d8"})}))}):(0,M.jsx)(M.Fragment,{})}),oe=(0,H.Pi)(function(T){var J,Y,re,_=T.id,V=T.name,ue=(0,te.Rk)(),le=ue.answerSheet,ye=le.find(function(Pe){return Pe.id===_}),je=(0,U.H)(),Se=je==null||(J=je.project)===null||J===void 0?void 0:J.isAuthenticated,Ae=(Y=je.project)===null||Y===void 0||(re=Y.setting.examSetting)===null||re===void 0?void 0:re.randomSurveyWrong,$e=ue.exerciseMode;return(!$e||!Se||_.length<=10)&&!Ae?(0,M.jsx)(M.Fragment,{}):ye!=null&&ye.favorite?(0,M.jsx)(k.Z,{title:Ae?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,M.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){ue.favoriteQuestion({templateId:_,name:V},!1)},children:(0,M.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,M.jsx)(k.Z,{title:Ae?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,M.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){ue.favoriteQuestion({templateId:_,name:V})},children:(0,M.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),ge=(0,H.Pi)(function(T){var J=(0,te.Rk)(),Y=T.finished,re=T.id,_=T.marked,V=T.seqNo,ue=T.isCorrect;return(0,M.jsxs)("div",{className:K()("answer-sheet-item",{marked:_,finished:Y,correct:ue===!0,wrong:ue===!1}),onClick:function(){return J.changePageIndex(re)},children:[V,_&&(0,M.jsx)(Ze,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),ce=(0,H.Pi)(function(){var T=(0,te.Rk)(),J=T.answerSheet;return(0,M.jsx)(M.Fragment,{children:J.filter(function(Y){return Y.display!=="none"}).map(function(Y,re){return(0,fe.createElement)(ge,(0,B.Z)((0,B.Z)({},Y),{},{seqNo:re+1,key:Y.id}))})})}),Ce=(0,H.Pi)(function(){var T=(0,te.Rk)(),J=T.answerSheet,Y=J.filter(function(V){return V.finished}).length,re=J.filter(function(V){return!V.finished}).length,_=J.filter(function(V){return V.marked}).length;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,M.jsx)("span",{style:{marginLeft:4},children:Y})]}),(0,M.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,M.jsx)("span",{style:{marginLeft:4},children:re})]}),(0,M.jsxs)("div",{className:"marked",children:[(0,M.jsx)(Ze,{size:18}),"\u6807\u8BB0",(0,M.jsx)("span",{style:{marginLeft:4},children:_})]})]})}),Me=(0,H.Pi)(function(){return(0,M.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,M.jsx)(P,{})]})}),Fe=(0,H.Pi)(function(){var T=(0,te.Rk)(),J=T.props.answerSheetVisible;return J?(0,M.jsxs)("div",{className:"answer-sheet",children:[(0,M.jsx)(Me,{}),(0,M.jsx)("div",{className:"answer-sheet-content",children:(0,M.jsx)(ce,{})}),(0,M.jsx)("div",{className:"answer-sheet-footer",children:(0,M.jsx)(Ce,{})}),(0,M.jsx)(me,{})]}):(0,M.jsx)(M.Fragment,{})})},6727:function(Ee,ie,s){"use strict";var $=s(47673),k=s(4107),B=s(11849),L=s(94657),Z=s(93224),N=s(67294),R=s(3980),e=s(40807),te=s(85893),U=["value","onChange","style"],H=function(K){var W=K.value,he=W===void 0?"":W,fe=K.onChange,M=K.style,xe=M===void 0?{}:M,se=(0,Z.Z)(K,U),P=(0,N.useState)(80),pe=(0,L.Z)(P,2),be=pe[0],Be=pe[1],me=(0,N.useRef)(null),Ze=(0,R.dD)();return(0,N.useEffect)(function(){if(me.current){for(var oe=me.current.offsetWidth,ge=oe+34,ce=me.current.parentElement;ce&&!ce.getAttribute("data-id");)ce=ce.parentElement;if(ce){var Ce=ce.offsetWidth;Ze&&(Ce-=40),ge=Math.min(ge,Ce)}xe.width&&(ge=Math.max(ge,parseFloat(xe.width.toString()))),Be(Math.max(ge,100))}},[he,xe.width]),(0,te.jsxs)("div",{style:{display:"inline-block",verticalAlign:(0,e.ob)()?"top":"unset",marginInline:5},children:[(0,te.jsx)("div",{ref:me,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",fontSize:"14px",fontFamily:"Arial, sans-serif",padding:"4px 11px",border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"hidden",height:12,lineHeight:"12px"},children:he||" "}),(0,te.jsx)(k.Z,(0,B.Z)((0,B.Z)({},se),{},{value:he,onChange:fe,style:(0,B.Z)((0,B.Z)({},xe),{},{width:"".concat(be,"px"),margin:0,padding:0})}))]})};ie.Z=H},95771:function(Ee,ie,s){"use strict";s.r(ie),s.d(ie,{default:function(){return Kt}});var $=s(94657),k=s(40807),B=s(78210),L=s(9761),Z=s(67294),N=s(54707),R=s(48187),e=s(85893),te=function(){var n=(0,N.AK)(),i=(0,Z.useContext)(k.ZX),v=i.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(B.Z,{html:v.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(B.Z,{html:v.description})})]})},U=function(n){var i=(0,N.AK)();return(0,e.jsx)("div",{className:i+"-body",children:n.children})},H=s(77576),q=s(12028),K=s(57663),W=s(71577),he=(0,L.Pi)(function(){var t,n,i=(0,N.AK)("-footer"),v=(0,Z.useContext)(k.ZX),r=v.schema,f=v.loading,g=(0,N.Rk)(),c=g.pagination,l=c.current,m=c.pageSize,a=m>1,u=l===1,h=l===m;return(0,e.jsxs)("div",{className:i,children:[h&&(0,e.jsx)("div",{className:i+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(B.Z,{html:r==null||(t=r.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:i+"-pagination",children:[a&&!u&&(0,e.jsx)("div",{children:(0,e.jsx)(W.Z,{type:"primary",block:!0,onClick:function(){return g.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),a&&!h&&(0,e.jsx)("div",{children:(0,e.jsx)(W.Z,{type:"primary",block:!0,onClick:function(){return g.handleNext()},children:"\u4E0B\u4E00\u9875"})}),h&&(0,e.jsx)("div",{children:(0,e.jsx)(W.Z,{type:"primary",block:!0,onClick:function(){return g.submit()},loading:f,children:(0,e.jsx)(B.Z,{html:((n=r.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),a&&(0,e.jsxs)("div",{className:i+"-pagination-info",children:["\u7B2C",l,"\u9875/\u5171",m,"\u9875"]}),g.autoNextPage>0&&(0,e.jsxs)("div",{style:{color:"#999",display:"flex",alignItems:"center",justifyContent:"center",width:200},children:["\u7B54\u5BF9\u81EA\u52A8\u8DF3\u8F6C\u4E0B\u4E00\u9875",(0,e.jsx)(q.Z,{style:{marginLeft:5},checked:g.autoNextPage===1,onChange:function(x){x?g.autoNextPage=1:g.autoNextPage=2}})]})]})]})}),fe=s(77883),M=s(85986),xe=s(47673),se=s(4107),P=s(11849),pe=s(14965),be=s(68318),Be=s(39002),me=s(68351),Ze=s(43358),oe=s(34041),ge=s(29985),ce=s(46842),Ce=s(64302),Me=s(27484),Fe=s.n(Me),T=s(33852),J=s(6727);Fe().locale("zh-cn");function Y(t,n){if(!!t)return Fe()(t,n)}var re=function(n){var i=n.dictCode,v=n.value,r=n.onChange,f=n.style,g=n.bordered,c=n.className,l=n.parentValue,m=n.cascaderLevel,a=m===void 0?1:m,u=n.disabled,h=(0,N.Al)(),d=(0,Z.useState)([]),x=(0,$.Z)(d,2),o=x[0],j=x[1],C=(0,N.zE)(function(y){a&&a>1&&!l||h.onDictSearch&&h.onDictSearch({dictCode:i,searchValue:y,parentValue:l==null?void 0:l.split("|")[0],cascaderLevel:a}).then(function(A){j(A||[])})},2);return(0,Z.useEffect)(function(){a&&a>1&&(l?C(void 0):j([]))},[l,a]),(0,Z.useEffect)(function(){!v&&a<=1&&i&&C(void 0),v&&o.length===0&&C(v)},[v]),(0,e.jsx)(oe.Z,{options:o,showSearch:!0,filterOption:function(A,E){var b;return((b=E==null?void 0:E.label)!==null&&b!==void 0?b:"").includes(A)},value:v==null?void 0:v.split("|")[0],onChange:function(A){if(A===void 0)r(void 0);else{var E;r("".concat(A,"|").concat((E=o.find(function(b){return b.value===A}))===null||E===void 0?void 0:E.label))}},style:f,bordered:g,disabled:u,className:c,allowClear:!0})};function _(t,n){return n||(t==="date"?"YYYY-MM-DD":t==="dateTime"?"YYYY-MM-DD HH:mm:ss":t==="time"?"HH:mm:ss":"YYYY-MM-DD")}function V(t){return t?t==="YYYY"?"year":t==="YYYY-MM"?"month":"date":"date"}var ue=function(n){var i=n.onChange,v=n.type,r=n.value,f=n.style,g=f===void 0?{width:"100%"}:f,c=n.className,l=n.readOnly,m=n.bordered,a=_(v,n.dateTimeFormat);return a.startsWith("HH")?(0,e.jsx)(me.Z,{value:Y(r,a),format:a,onChange:function(h,d){return i(d)},style:g,className:c,disabled:l,bordered:m}):(0,e.jsx)(be.Z,{onChange:function(h,d){i(d)},disabled:l,format:a,picker:V(a),showTime:a.includes("HH")||a.includes("mm")||a.includes("ss"),showSecond:a.includes("ss"),showMinute:a.includes("mm"),showHour:a.includes("HH"),value:Y(r,a),style:g,className:c,bordered:m})},le=function(n){var i,v,r,f,g,c=n.onChange,l=n.type,m=n.value,a=n.suffix,u=n.style,h=u===void 0?{width:"100%"}:u,d=n.className,x=n.readOnly,o=x===void 0?(i=n.schema)===null||i===void 0||(v=i.attribute)===null||v===void 0?void 0:v.readOnly:x,j=n.dictCode,C=j===void 0?(r=n.schema)===null||r===void 0||(f=r.attribute)===null||f===void 0?void 0:f.dictCode:j,y=n.onBlur,A=y===void 0?function(){}:y,E=n.bordered,b=n.parentValue,p=n.cascaderLevel,z=n.icon,F=z===void 0?!0:z,S=n.schema,D=n.placeholder,w=D===void 0?S==null||(g=S.attribute)===null||g===void 0?void 0:g.placeholder:D,Q=n.autoSize;return l==="horzBlank"?(0,e.jsx)(e.Fragment,{}):l==="selectDict"&&C?(0,e.jsx)(re,{value:m,onChange:c,dictCode:C,style:h,bordered:E,className:d,parentValue:b,cascaderLevel:p,disabled:o}):l==="select"&&S!==null&&S!==void 0&&S.dataSource?(0,e.jsx)(oe.Z,{options:S.dataSource,className:d,disabled:o,style:h,bordered:E,value:m,onChange:c,placeholder:w}):l==="date"||l==="dateTime"||l==="time"?(0,e.jsx)(ue,(0,P.Z)({},n)):l==="mobile"?(0,e.jsx)(se.Z,{prefix:F?(0,e.jsx)(ge.Z,{}):void 0,onChange:function(I){return c(I.target.value)},value:m,className:d,onBlur:function(I){return A(I.target.value)},bordered:E,readOnly:o,placeholder:w}):l==="idCard"?(0,e.jsx)(se.Z,{prefix:F?(0,e.jsx)(ce.Z,{}):void 0,onChange:function(I){return c(I.target.value)},value:m,style:h,className:d,onBlur:function(I){return A(I.target.value)},bordered:E,readOnly:o,placeholder:w}):Q?(0,e.jsx)(J.Z,{onChange:function(I){return c(I.target.value)},onBlur:function(I){return A(I.target.value)},value:m,suffix:a,style:h,className:d,bordered:E,readOnly:o,placeholder:w}):l==="number"?(0,e.jsx)(M.Z,{className:d,onChange:c,onBlur:function(I){var ee=I.target.value;A(ee===""?void 0:parseFloat(ee))},value:m,style:h,addonAfter:a,readOnly:o,bordered:E,placeholder:w}):l==="email"?(0,e.jsx)(se.Z,{prefix:F?(0,e.jsx)(Ce.Z,{}):void 0,onChange:function(I){return c(I.target.value)},onBlur:function(I){return A(I.target.value)},value:m,style:h,className:d,bordered:E,readOnly:o,placeholder:w}):l==="password"?(0,e.jsx)(se.Z.Password,{onChange:function(I){return c(I.target.value)},onBlur:function(I){return A(I.target.value)},value:m,suffix:a,style:h,className:d,bordered:E,readOnly:o,placeholder:w||"\u8BF7\u8F93\u5165\u5BC6\u7801"}):(0,e.jsx)(se.Z,{onChange:function(I){return c(I.target.value)},onBlur:function(I){return A(I.target.value)},value:m,suffix:a,style:h,className:d,bordered:E,readOnly:o,placeholder:w})},ye=s(49111),je=s(19650),Se=s(17672),Ae=function(n){var i=n.onChange,v=(0,Z.useRef)(null),r=(0,Z.useRef)(),f=(0,Z.useRef)(),g=(0,Z.useState)(0),c=(0,$.Z)(g,2),l=c[0],m=c[1];return(0,Z.useEffect)(function(){var a=v.current;if(a){var u,h=new Se.Z(v.current);h.addEventListener("beginStroke",function(){m(1)}),r.current=h;var d=Math.max(window.devicePixelRatio||1,1);a.width=a.offsetWidth*d,a.height=a.offsetHeight*d,(u=a.getContext("2d"))===null||u===void 0||u.scale(d,d)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:f.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:v,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:l!==2?"block":"none"}}),l===2&&(0,e.jsx)("img",{src:f.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(je.Z,{children:[l===1&&(0,e.jsx)(W.Z,{type:"link",onClick:function(){var u;(u=r.current)===null||u===void 0||u.clear(),m(0)},children:"\u6E05\u7A7A"}),(l===0||l===1)&&(0,e.jsx)(W.Z,{type:"primary",disabled:l!==1,ghost:!0,size:"small",onClick:function(){var u;i(r.current.toDataURL()),f.current=(u=r.current)===null||u===void 0?void 0:u.toDataURL(),m(2)},children:"\u5B8C\u6210"}),l===2&&(0,e.jsx)(W.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var u;m(0),(u=r.current)===null||u===void 0||u.clear()},children:"\u91CD\u7B7E"})]})})]})]})},$e=s(3024),Pe=(0,L.Pi)(function(){var t=(0,Z.useContext)(k.ZX),n=t.progressBar,i=(0,N.AK)(),v=(0,N.Rk)(),r=v.progress;return n?(0,e.jsx)($e.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:i+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),Ge=function(n){var i,v=n.optionId,r=n.questionId,f=n.checked,g=n.checkedCount,c=n.quota,l=n.statEnabled,m=(0,N.Al)(),a=m.statistics,u=a==null?void 0:a.questionStatistics[r],h=((u==null?void 0:u.optionStatistics.reduce(function(j,C){return j+C.count},0))||0)+g,d=(u==null||(i=u.optionStatistics.find(function(j){return j.optionId===v}))===null||i===void 0?void 0:i.count)||0,x=f?d+1:d,o="".concat(Math.floor(x/h*1e3)/10,"%");return!l&&c===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[c&&(0,e.jsxs)("span",{className:"vote-info-cnt",style:{color:c-d>0?"#1890ff":"#949aae"},children:["(\u4F59",c-d,")"]}),l&&g>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[x,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:o}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:o}})})]})]})},Ue=function(n){var i=n.schema,v=n.type,r=i.attribute,f=r===void 0?{}:r,g=f.examCorrectAnswer,c=(0,N.Al)(),l=c.correctAnswerVisible,m=c.mode;return g&&l&&m==="exam"?v==="FillBlank"||v==="HorzBlank"||v==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:g}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Ht=function(n){var i=n.schema,v=i.attribute,r=v===void 0?{}:v,f=r.examScore,g=useSurvey(),c=g.mode,l=g.examScoreVisible;return f&&c==="exam"&&l?_jsxs("span",{className:"question-score",children:["\uFF08",f,"\u5206\uFF09"]}):_jsx(_Fragment,{})},mn=(0,L.Pi)(function(t){var n=(0,N.Rk)(),i=n.reviewAnswer[t.qId];return i&&!i.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){i.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),Wt=s(63185),we=s(9676),gn=s(36862),xn=s(46533),jn=s(94184),Ie=s.n(jn),Jt=s(12968),Cn=s(62462),yn=s(91220),Xe=s(15020),An=s(54531);function En(t,n,i){if(!t)return"";var v=RegExp("_{3,}","g"),r=t.matchAll(v),f=[],g=(0,yn.Z)(r),c;try{for(g.s();!(c=g.n()).done;){var l=c.value,m=l.index,a=l.index+l[0].length;f.push([m,a])}}catch(o){g.e(o)}finally{g.f()}if(f.length===0)return t;for(var u=f[0][0]===0?"":t.substring(0,f[0][0]),h=function(j){var C,y,A=f[j],E=f[j+1],b=t.substring(A[0],A[1]),p=t.substring(A[1],E?E[0]:t.length),z=n[j];if(!z)return"break";var F=i?i[z.id]:"";if(((C=z.attribute)===null||C===void 0?void 0:C.dataType)==="select"){var S,D;F=(S=z.dataSource)===null||S===void 0||(D=S.find(function(O){return O.value===F}))===null||D===void 0?void 0:D.label}else if(((y=z.attribute)===null||y===void 0?void 0:y.dataType)==="selectDict"){var w,Q;F=(w=F)===null||w===void 0||(Q=w.split("|"))===null||Q===void 0?void 0:Q[1]}u+='<input data-id="'.concat(n[j].id,`" value='`).concat(F||"",`'  class="horz-blank" style="width:`).concat(12*b.length,'px">'),u+=p},d=0;d<f.length;d++){var x=h(d);if(x==="break")break}return u}function qe(t,n){return t.name===n?!0:t.parent?qe(t.parent,n):!1}var Oe=(0,L.Pi)(function(t){var n=t.content,i=t.children,v=t.value,r=v===void 0?{}:v,f=t.onChange,g=t.onBlur,c=t.schema,l=t.isTitle,m=(0,N.Rk)(),a=m.reviewAnswer[c.id];function u(h,d){var x,o;if(r[h]===d)return r;r[h]=d;var j=i.find(function(E){return E.id===h}),C=j==null||(x=j.attribute)===null||x===void 0?void 0:x.cascaderLevel,y=j==null||(o=j.attribute)===null||o===void 0?void 0:o.dictCode;y&&C&&i.filter(function(E){var b;return((b=E.attribute)===null||b===void 0?void 0:b.dictCode)===y&&E.attribute.cascaderLevel&&E.attribute.cascaderLevel>C}).forEach(function(E){delete r[E.id]}),(d===""||d===void 0)&&delete r[h];var A=(0,P.Z)({},r);if(Object.keys(A).length!==0)return(0,An.ZN)(A)}return(0,e.jsx)("div",{className:"pe-view",onClick:function(d){d.preventDefault(),d.stopPropagation()},children:(0,Xe.ZP)((0,k.qZ)(n,i.filter(function(h){var d,x;return l?(d=h.attribute)===null||d===void 0?void 0:d.fieldInTitle:!((x=h.attribute)!==null&&x!==void 0&&x.fieldInTitle)})),{replace:function(d){if(d.name==="img"){var x=d.attribs.width;return(0,e.jsx)(Cn.Z,{width:x?parseFloat(x):void 0,src:d.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,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",preview:{mask:!1}})}var o=d.attribs;if(!!o){var j=o["data-id"];if(j){var C,y,A,E,b,p=(0,Xe.e_)(o),z=qe(d,"tr");z&&p.style&&(p.style=(0,P.Z)((0,P.Z)({},p.style),{},{width:"96%"}));var F=i.findIndex(function(ne){return ne.id===j}),S=i[F],D=(C=i[F-1])===null||C===void 0?void 0:C.id,w=r[D],Q=(S==null||(y=S.attribute)===null||y===void 0?void 0:y.dataType)||"text",O=S==null||(A=S.attribute)===null||A===void 0?void 0:A.dictCode,I=S==null||(E=S.attribute)===null||E===void 0?void 0:E.dateTimeFormat,ee=S==null||(b=S.attribute)===null||b===void 0?void 0:b.cascaderLevel,G=a==null?void 0:a[j].isCorrect,X=Ie()(p.className,{selected:a&&a.visible,"is-correct":a&&a.visible&&G},"horz-blank");return(0,e.jsx)(le,(0,P.Z)((0,P.Z)({},p),{},{type:Q,value:r[j],parentValue:w,schema:S,cascaderLevel:ee,onChange:function(Ve){return f==null?void 0:f(u(j,Ve))},onBlur:function(Ve){return g==null?void 0:g(u(j,Ve))},dictCode:O,dateTimeFormat:I,bordered:!1,icon:!1,className:X,autoSize:!0}))}}}})})}),bn=(0,L.Pi)(function(t){var n=t.qId,i=t.schema,v=t.checked,r=t.onChange,f=t.value,g=t.onBlur,c=t.disabled,l=i.id,m=i.title,a=i.attribute,u=a===void 0?{}:a,h=(0,N.Rk)(),d=h.reviewAnswer[n],x=d==null?void 0:d[l].selected,o=d==null?void 0:d[l].isCorrect,j=u.dataType;return d&&d.visible&&(x||o)?(0,e.jsxs)("label",{className:Ie()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:x,"is-correct":o}),onClick:function(){return r(!v)},children:[(0,e.jsxs)("span",{children:[!o&&(0,e.jsx)(gn.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),o&&(0,e.jsx)(xn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(B.Z,{html:m})})]}):(0,e.jsxs)(we.Z,{value:l,checked:v,onChange:function(y){return r(y.target.checked)},disabled:c,children:[j==="horzBlank"&&i.children?(0,e.jsx)(Oe,{content:m,children:i.children,value:f,schema:i,onBlur:g,onChange:function(y){return r(!0,y)}}):(0,e.jsx)(B.Z,{html:m}),(0,e.jsx)(Ue,{schema:t.schema})]})}),Yt=s(88983),De=s(66253),_e=s(43061),en=s(38819),Zn=s(91508),pn=(0,L.Pi)(function(t){var n=t.qId,i=t.schema,v=t.onBlur,r=t.onChange,f=t.value,g=t.disabled,c=i.id,l=i.title,m=i.attribute,a=(0,N.Rk)(),u=a.reviewAnswer[n],h=u==null?void 0:u[c].selected,d=u==null?void 0:u[c].isCorrect,x=Z.useContext(Zn.ZP),o=m==null?void 0:m.dataType;return u&&u.visible&&(h||d)?(0,e.jsxs)("label",{className:Ie()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:h,"is-correct":d}),onClick:function(){var C;g||x==null||(C=x.onChange)===null||C===void 0||C.call(x,{target:{value:c}})},children:[(0,e.jsxs)("span",{children:[!d&&(0,e.jsx)(_e.Z,{style:{color:"#ff6d56",marginRight:10}}),d&&(0,e.jsx)(en.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(B.Z,{html:l})})]}):(0,e.jsxs)(De.ZP,{value:c,className:"radio-item",disabled:g,children:[o==="horzBlank"&&i.children?(0,e.jsx)(Oe,{schema:i,content:l,children:i.children,value:typeof f=="boolean"?{}:f,onBlur:v,onChange:r}):(0,e.jsx)(B.Z,{html:l}),(0,e.jsx)(Ue,{schema:t.schema})]})}),Bn=(0,L.Pi)(function(t){var n=t.schema,i=t.value,v=t.onChange,r=t.qId,f=t.onBlur,g=(0,N.AK)("-body-question"),c=n.id,l=n.attribute,m=l==null?void 0:l.suffix,a=l==null?void 0:l.dataType,u=l==null?void 0:l.dictCode,h=l==null?void 0:l.dateTimeFormat,d=l==null?void 0:l.readOnly,x=(0,N.Rk)(),o=x.reviewAnswer[r],j=o==null?void 0:o[c].isCorrect;return o&&o.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!j&&(0,e.jsx)(_e.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),j&&(0,e.jsx)(en.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(le,{type:a,value:i[c],readOnly:d,schema:n,className:Ie()("selected",{"is-correct":j}),onChange:function(y){return v(y)},onBlur:f,style:{paddingLeft:20},suffix:m&&(0,e.jsx)("span",{className:g+"-option-suffix",children:(0,e.jsx)(B.Z,{html:m})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le,{type:a,value:i[c],onChange:function(y){return v(y)},onBlur:f,schema:n,readOnly:d,dictCode:u,dateTimeFormat:h,suffix:m&&(0,e.jsx)("span",{className:g+"-option-suffix",children:(0,e.jsx)(B.Z,{html:m})})})})}),Vt=s(65011),Gt=s(48736),Xt=s(402),nn=s(20294),Sn=oe.Z.Option,Te=nn.Z.Text,qt=function(n){var i=n.onChange,v=n.form,r=n.record,f=useState(n.value),g=_slicedToArray(f,2),c=g[0],l=g[1],m=useState(n.value),a=_slicedToArray(m,2),u=a[0],h=a[1];useEffect(function(){h(n.value)},[n.value]);var d=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),x=_slicedToArray(d,2),o=x[0],j=x[1],C=useThrottleCallback(function(y){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:u,dropdownMatchSelectWidth:!1,onBlur:function(){h(c),c?i==null||i(c):i==null||i(void 0)},onSelect:function(A){l(A),h(A)},allowClear:!0,onClear:function(){l(void 0),h(void 0),i==null||i(void 0)},onSearch:function(A){h(A),C(A)},dropdownRender:function(A){return _jsxs(_Fragment,{children:[A,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(Te,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(Te,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:o.map(function(y){return _jsxs(Sn,{value:y.drugName,children:[_jsxs(Te,{children:[" ",y.drugName]}),_jsxs(Te,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",y.chemicalName,"-",y.stCompName,")"]})]},y.id)})})},In=(0,L.Pi)(function(t){var n,i=t.schema,v=t.title,r=t.onBlur,f=t.onChange,g=i.type,c=((n=i.children)===null||n===void 0?void 0:n.filter(function(a){var u;return(u=a.attribute)===null||u===void 0?void 0:u.fieldInTitle}))||[],l=(0,L.U$)(),m=l.value;return g!=="HorzBlank"||c.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(B.Z,{html:v})}):(0,e.jsx)(Oe,{schema:i,children:c,content:v,onChange:f,onBlur:r,value:m})}),Nn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),Mn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),Fn=(0,L.Pi)(function(t){var n,i=t.schema,v=t.seqNo,r=v===void 0?0:v,f=(0,N.Rk)(),g=f.props.correctAnswerVisible,c=f.props.questionScore,l=(n=i.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!g||!c||l==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",r,"\u9898"]}),c[i.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",c[i.id],"\u5206"]}),Mn]}):Nn]})}),_t=s(71194),Pn=s(50146);function tn(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var Rn=function(n){var i=n.onChange,v=n.value,r=n.mapMove,f=r===void 0?!1:r,g=n.optionId,c=(0,Z.useRef)(null),l=(0,Z.useRef)(),m=(0,Z.useRef)(),a=(0,Z.useRef)(),u=(0,Z.useState)(function(){if(!!v){var F=v.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(F&&F.length>2)return[parseFloat(F[1]),parseFloat(F[2])]}}),h=(0,$.Z)(u,2),d=h[0],x=h[1],o=(0,Z.useState)(function(){return tn(v)}),j=(0,$.Z)(o,2),C=j[0],y=j[1],A=(0,Z.useState)(!1),E=(0,$.Z)(A,2),b=E[0],p=E[1],z=(0,Z.useCallback)(function(F){m.current.getLocation(F,function(S,D){if(S==="complete"&&D.geocodes.length){var w=D.geocodes[0].location;a.current.start(w)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,Z.useEffect)(function(){if(!!b){window["localMap".concat(g)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(Q){var O=new AMap.Map("map-".concat(g),{zoom:16,center:d,dragEnable:f,zoomEnable:f});if(l.current=O,f){var I=new Q({mode:"dragMarker",map:O});I.on("success",function(X){y(X.address),x([X.position.lng,X.position.lat])}),d?I.start(d):I.start(),O.panBy(0,1),a.current=I}var ee=new AMap.Geocoder({city:"010"});m.current=ee;var G=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});G.getCurrentPosition(function(X,ne){X=="complete"?(O.setCenter(ne.position),y(ne.formattedAddress),x([ne.position.lng,ne.position.lat])):console.error(ne)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var F="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(g,"&plugin=AMap.Geocoder,AMap.Geolocation"),S=document.createElement("script");S.src=F,document.head.appendChild(S);var D="https://webapi.amap.com/ui/1.1/main-async.js",w=document.createElement("script");w.src=D,document.head.appendChild(w)}},[b]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(se.Z.TextArea,{readOnly:!0,value:tn(v),onClick:function(){return p(!0)}}),(0,e.jsxs)(Pn.Z,{open:b,onCancel:function(){p(!1)},onOk:function(){d&&i("".concat(C,"[").concat(d[0],", ").concat(d[1],"]")),p(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:f&&(0,e.jsx)(se.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(S){return z(S)}})}),(0,e.jsx)("div",{ref:c,id:"map-".concat(g),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:C})]})]})},wn=(0,L.Pi)(function(t){var n,i,v=t.qId,r=t.schema,f=(0,N.Rk)(),g=f.reviewAnswer[v],c=(n=r.children)===null||n===void 0?void 0:n.map(function(u){var h;return(h=u.attribute)===null||h===void 0?void 0:h.examCorrectAnswer}).filter(function(u){return u}).join(";"),l=c&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(r.type),m=function(){return l?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:c})]}):(0,e.jsx)(e.Fragment,{})},a=function(){var h;if((h=r.attribute)!==null&&h!==void 0&&h.examAnalysis){var d;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(B.Z,{html:(d=r.attribute)===null||d===void 0?void 0:d.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return g&&g.visible&&((i=r.attribute)!==null&&i!==void 0&&i.examAnalysis||l)?(0,e.jsxs)("div",{className:"answer-analysis",children:[m(),a()]}):(0,e.jsx)(e.Fragment,{})}),Ke=s(76898),an=s(28991),On={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"},Dn=On,Tn=s(27029),rn=function(n,i){return Z.createElement(Tn.Z,(0,an.Z)((0,an.Z)({},n),{},{ref:i,icon:Dn}))};rn.displayName="HighlightOutlined";var Qn=Z.forwardRef(rn),Ln=nn.Z.Paragraph,kn=(0,L.Pi)(function(t){var n=t.qId,i=t.schema,v=(0,N.Rk)(),r=v.lazy,f=(0,L.cI)(),g=f.getFieldState(n,function(c){var l;return(l=c.componentProps)===null||l===void 0?void 0:l.note});return r?(0,e.jsx)("div",{className:"answer-note",children:(0,e.jsx)(Ln,{title:"\u6DFB\u52A0\u7B14\u8BB0",editable:{icon:(0,e.jsx)(Qn,{}),triggerType:["icon","text"],tooltip:"\u70B9\u51FB\u7F16\u8F91\u7B14\u8BB0",onChange:function(l){var m,a;(m=v.props)===null||m===void 0||(a=m.onNote)===null||a===void 0||a.call(m,n,l),f.setFieldState(n,function(u){return u.componentProps.note=l})}},children:g})}):(0,e.jsx)(e.Fragment,{})});function zn(t){var n=t.schema,i=t.required,v=t.error,r=t.replaceTitle,f=t.seqNo,g=t.onBlur,c=t.onChange,l=t.onFocus,m=(0,Z.useContext)(k.ZX),a=m.questionNumber,u=m.requiredVisible,h=(0,N.AK)("-body-question"),d=(0,Z.useState)(),x=(0,$.Z)(d,2),o=x[0],j=x[1],C=n.description,y=(0,N.Rk)(),A=y.answerSheet.find(function(p){return p.id===n.id}),E=A==null?void 0:A.marked;(0,Z.useEffect)(function(){if(o){var p,z;(p=document.querySelector("[data-id='".concat(n.id,"']")))===null||p===void 0||p.classList.remove("ant-form-item-has-error"),(z=document.querySelector("[data-id='".concat(n.id,"']")))===null||z===void 0||z.querySelectorAll("[data-id]").forEach(function(I){I.classList.remove("ant-form-item-has-error")})}if(v.length>0){var F,S=v[0].split("^"),D=(0,$.Z)(S,2),w=D[0],Q=D[1],O;Q?(O=document.querySelector("[data-id='".concat(w,"']")),j(Q)):(O=document.querySelector("[data-id='".concat(n.id,"']")),j(w)),(F=O)===null||F===void 0||F.classList.add("ant-form-item-has-error")}else o&&j(void 0)},[v]);var b=function(){return o?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:o})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:h,children:[(0,e.jsx)("div",{className:"".concat(h,"-head"),children:(0,e.jsxs)("span",{className:h+"-header",children:[(0,e.jsx)(Fn,{schema:n,seqNo:f}),(0,e.jsxs)("h2",{className:h+"-header-title",children:[a&&(0,e.jsx)("span",{className:h+"-header-title-seq",children:(0,e.jsx)("b",{children:a&&f?f:""})}),i&&u&&(0,e.jsx)("span",{className:h+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:h+"-header-title-text",children:(0,e.jsx)(In,{schema:n,title:r||n.title,onBlur:g,onChange:c,onFocus:l})}),b(),f&&(0,e.jsx)(Ke.M2,{marked:E,onClick:function(){y.markQuestion(n.id,!E)}}),(0,e.jsx)(Ke.rF,{id:n.id,name:n.title})]}),C&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(B.Z,{html:C})})]})}),(0,e.jsxs)("div",{className:"".concat(h,"-body"),children:[t.children,(0,e.jsx)(mn,{qId:n.id}),(0,e.jsx)(wn,{qId:n.id,schema:n}),(0,e.jsx)(kn,{qId:n.id,schema:n})]})]})}(0,R.eC)("Question",(0,L.Pi)(zn),"antd");function $n(t){var n=t.schema,i=t.index,v=t.seqNo,r=(0,N.AK)("-body-questionSet"),f=(0,Z.useContext)(k.ZX),g=f.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[g&&(0,e.jsx)("span",{className:r+"-title-seq",children:(0,e.jsx)("b",{children:g?v:""})}),(0,e.jsx)(B.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,R.eC)("QuestionSet",$n,"antd");var ea=s(84305),Un=s(88182),Kn=s(82925);Fe().locale("zh-cn");function Hn(t){var n=t.headerVisible,i=t.footerVisible,v=t.schema,r=(0,N.AK)(),f=(0,N.Al)(),g=function(){var l,m=(l=v.attribute)===null||l===void 0?void 0:l.headerImage;if(m)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(m),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Ie()(r,{preview:f.isPreview}),children:[(0,e.jsx)(Pe,{}),(0,e.jsx)("div",{className:r+"-banner",children:g()}),n&&(0,e.jsx)(te,{}),(0,e.jsx)(Un.ZP,{locale:Kn.Z,children:(0,e.jsx)(U,{children:t.children})}),i&&(0,e.jsx)(he,{}),(0,e.jsx)(Ke.Ff,{})]})}(0,R.eC)("Survey",Hn,"antd");var na=s(13062),ve=s(71230),ta=s(89032),de=s(15746),ae=s(32059);function Wn(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children;function g(c,l){i((0,ae.Z)({},l,c))}return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(c){var l=c.id,m=c.title,a=c.attribute,u=a===void 0?{}:a,h=u.mapMove;return(0,e.jsxs)(ve.Z,{gutter:[10,0],"data-id":l,children:[m&&(0,e.jsx)(de.Z,{span:24},c.id),(0,e.jsx)(de.Z,{span:24,children:(0,e.jsx)(Rn,{optionId:l,onChange:function(x){return g(x,l)},value:r[l],mapMove:h})})]},l)})})}(0,R.RM)("Address",Wn,"antd");var aa=s(43185),Qe=s(32620),ra=s(34792),He=s(48086),Le=s(39428),ln=s(3182),Jn=s(81473);function Yn(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=t.readOnly,g=n.children,c=g===void 0?[]:g,l=(0,N.Al)(),m=function(){var a=(0,ln.Z)((0,Le.Z)().mark(function u(h){var d,x,o,j;return(0,Le.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:d=h.onSuccess,x=h.onError,o=h.file,j=h.onProgress,l.onUpload&&l.onUpload({file:o,fileType:6},function(A){j&&j({percent:A.loaded/A.total*100})}).then(function(A){if(A.success&&d&&(d(A.data),A.data.content&&i((0,ae.Z)({},c[0].id,A.data.content))),!A.success&&x){var E=new Error("Some error");x({event:E})}});case 2:case"end":return y.stop()}},u)}));return function(h){return a.apply(this,arguments)}}();return(0,e.jsx)("div",{children:c==null?void 0:c.map(function(a){var u=a.id,h=a.attribute,d=h===void 0?{}:h,x=d.cameraOnly;return(0,e.jsx)(ve.Z,{style:{marginBottom:10},"data-id":u,children:(0,e.jsx)(de.Z,{span:12,children:(0,e.jsx)(se.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:r[u],addonAfter:(0,e.jsx)(Qe.Z,{accept:"image/*",capture:x?"environment":void 0,disabled:f,maxCount:1,beforeUpload:function(j){return d!=null&&d.maxFileSize&&j.size>d.maxFileSize*1024*1024?(He.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(d.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Qe.Z.LIST_IGNORE):!0},customRequest:m,showUploadList:!1,children:(0,e.jsx)(Jn.Z,{})},u)})})},u)})})}(0,R.RM)("Barcode",Yn,"antd");var ia=s(36877),Vn=s(18480);function Gn(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f;function c(l){var m={};l.forEach(function(a,u){var h=g[u].id;m[h]=a}),i(m)}return(0,e.jsx)(ve.Z,{children:(0,e.jsx)(de.Z,{span:12,children:(0,e.jsx)(Vn.Z,{value:g.map(function(l){return r[l.id]}).filter(function(l){return l}),style:{width:260},options:n.dataSource,onChange:c,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,R.RM)("Cascader",Gn,"antd");function Xn(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=t.onBlur,g=n.children,c=n.attribute,l=24/((c==null?void 0:c.columns)||1),m=(0,N.AK)("-body-question"),a=!!(c!=null&&c.statEnabled),u=(0,N.Al)(),h=(0,N.Rk)(),d=h.hiddenOption[n.id]||[];(0,Z.useEffect)(function(){var o=Object.keys(r),j=!1;o.forEach(function(C){d.includes(C)&&(j=!0,delete r[C])}),j&&i((0,P.Z)({},r))},[d]);function x(o,j,C){return j?r[o]=C||!0:delete r[o],(0,P.Z)({},r)}return(0,Z.useEffect)(function(){g==null||g.forEach(function(o){var j;(j=o.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(r).length===0&&i((0,ae.Z)({},o.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ve.Z,{children:g==null?void 0:g.filter(function(o){return!d.includes(o.id)}).map(function(o){var j,C,y,A,E=o.id,b=(j=o.attribute)===null||j===void 0?void 0:j.dataType,p=(C=o.attribute)===null||C===void 0?void 0:C.suffix,z=(y=o.attribute)===null||y===void 0?void 0:y.readOnly,F=(A=o.attribute)===null||A===void 0?void 0:A.quota,S=!1;if(F!==void 0){var D,w=u.statistics,Q=w==null?void 0:w.questionStatistics[n.id],O=(Q==null||(D=Q.optionStatistics.find(function(ee){return ee.optionId===E}))===null||D===void 0?void 0:D.count)||0,I=F-O;I<=0&&(S=!0)}return(0,e.jsxs)(de.Z,{span:l,className:m+"-option","data-id":E,children:[(0,e.jsx)(bn,{disabled:S,qId:n.id,schema:o,checked:r.hasOwnProperty(E),onChange:function(G,X){S||i(x(E,G,X))},value:typeof r[E]=="boolean"?{}:r[E],onBlur:f}),(0,e.jsx)(Ge,{statEnabled:a,quota:F,checked:!!r[E],optionId:E,questionId:n.id,checkedCount:Object.keys(r).length}),b&&(0,e.jsx)(le,{value:typeof r[E]=="boolean"?"":r[E],style:{maxWidth:200},type:b,schema:o,onChange:function(G){return i(x(E,!0,G))},onBlur:function(G){return f(x(E,!0,G))},readOnly:z,suffix:p&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(B.Z,{html:p})})})]},E)})})})}(0,R.RM)("Checkbox",(0,L.Pi)(Xn),"antd");var la=s(71153),sn=s(60331),sa=s(62999),qn=s(54680),Ne=s(3980),_n=s(60780),et=s.n(_n);function nt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f,c=g[0].id,l=(0,Z.useState)([]),m=(0,$.Z)(l,2),a=m[0],u=m[1];function h(x){c&&((x==null?void 0:x.length)===0?i(void 0):i((0,ae.Z)({},c,x==null?void 0:x.map(function(o){return o.value}))))}var d=(0,Z.useMemo)(function(){return et()(a.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[a]);return(0,Z.useEffect)(function(){Ne.hi.selectDept({}).then(function(x){x.success&&u(x.data)})},[]),(0,e.jsx)(ve.Z,{children:(0,e.jsx)(de.Z,{span:24,children:(0,e.jsx)(qn.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[c]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:d,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:h,showSearch:!1})})})}var tt=function(n){var i=n.schema,v=n.value,r=v===void 0?{}:v,f=i.children,g=f===void 0?[]:f,c=g[0].id,l=(0,Z.useState)([]),m=(0,$.Z)(l,2),a=m[0],u=m[1];return(0,Z.useEffect)(function(){Ne.hi.selectDept({selected:r[c]||[],name:"^_^"}).then(function(h){h.success&&u(h.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(je.Z,{children:a.map(function(h){return(0,e.jsx)(sn.Z,{color:"blue",children:h.name},h.id)})})})};(0,R.RM)("Dept",nt,"antd"),(0,R.uF)("Dept",tt,"antd");function on(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=t.onBlur,g=n.children,c=(0,N.AK)("-body-question");function l(a,u){r[a]=u,u===""&&delete r[a],i((0,P.Z)({},r),a)}function m(a,u){r[a]=u,u===""&&delete r[a],f((0,P.Z)({},r),a)}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(a){var u=a.id,h=a.title;return(0,e.jsxs)(ve.Z,{style:{marginBottom:10},"data-id":u,children:[h&&(0,e.jsx)(de.Z,{className:c+"-option",span:4,children:a.title&&(0,e.jsx)("span",{className:c+"-option-title",children:(0,e.jsx)(B.Z,{html:a.title})})},a.id),(0,e.jsxs)(de.Z,{span:12,className:c+"-option",children:[(0,e.jsx)(Bn,{qId:n.id,schema:a,value:r,onChange:function(x){return l(u,x)},onBlur:function(x){return m(u,x)}}),(0,e.jsx)(Ue,{schema:a,type:n.type})]})]},u)})})}(0,R.RM)("FillBlank",on,"antd"),(0,R.RM)("MultipleBlank",on,"antd");function at(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=t.onBlur,g=n.children,c=n.attribute,l=c===void 0?{}:c,m=l.content;return!m||!g?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Oe,{schema:n,children:g.filter(function(a){var u;return!((u=a.attribute)!==null&&u!==void 0&&u.fieldInTitle)}),content:m,onBlur:f,onChange:i,value:r})}var rt=function(n){var i=n.schema,v=n.value,r=i.children,f=i.attribute,g=f===void 0?{}:f,c=g.content;return(0,e.jsx)("div",{className:"preview pe-view",children:(0,e.jsx)(B.Z,{html:En(c,r,v),replaceP:!1},Math.random())})};(0,R.RM)("HorzBlank",at,"antd"),(0,R.uF)("HorzBlank",rt,"antd");var oa=s(66456),We=s(53831),ke=s(83279),it=s(73218);function lt(t){var n,i=t.schema,v=t.onChange,r=t.onBlur,f=t.value||[{}],g=i.children,c=g===void 0?[]:g,l=(0,k.Ck)((n=i.attribute)===null||n===void 0?void 0:n.scope,[1,999]),m=c.map(function(a,u){var h;return{title:(0,e.jsx)(B.Z,{html:a.title}),width:(h=a.attribute)===null||h===void 0?void 0:h.width,dataIndex:a.id,render:function(x,o,j){var C,y=a.id;if(((C=a.attribute)===null||C===void 0?void 0:C.dataType)==="select"){var A;return(0,e.jsx)(oe.Z,{placeholder:"\u8BF7\u9009\u62E9",value:x,style:{width:"98%"},onChange:function(p){o[a.id]=p,v((0,ke.Z)(f))},options:((A=a.dataSource)===null||A===void 0?void 0:A.map(function(b){return{label:b.label,value:b.value}}))||[]},"".concat(j,"-").concat(y))}else{var E;return(0,e.jsx)(le,{value:x,dataId:"".concat(j,"-").concat(y),type:(E=a.attribute)===null||E===void 0?void 0:E.dataType,schema:a,onBlur:function(p){r(p)},onChange:function(p){o[a.id]=p,v((0,ke.Z)(f))}},"".concat(j,"-").concat(y))}}}});return m.push({title:"",width:30,render:function(u,h){return(0,e.jsx)(it.Z,{style:{cursor:"pointer"},onClick:function(){var x=f.indexOf(h);f.splice(x,1),v((0,ke.Z)(f))}})}}),(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(We.Z,{bordered:!0,columns:m,pagination:!1,size:"small",rowKey:"k",style:{width:"100%"},dataSource:f,footer:function(){return(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"footer",style:{textAlign:"center",cursor:"pointer"},onClick:function(){if(f.length>=l[2]){He.default.error("\u6700\u591A\u53EA\u80FD\u6DFB\u52A0 ".concat(l[2]," \u884C"));return}f.push({}),v((0,ke.Z)(f))},children:"+ \u7EE7\u7EED\u586B\u5199"})})}})})}var st=function(n){var i=n.schema,v=n.value||[],r=i.children,f=r===void 0?[]:r,g=f.map(function(c,l){var m;return{title:(0,e.jsx)(B.Z,{html:c.title}),width:(m=c.attribute)===null||m===void 0?void 0:m.width,dataIndex:c.id,render:function(u,h,d){var x,o=c.id;if(((x=c.attribute)===null||x===void 0?void 0:x.dataType)==="select"){var j;return(0,e.jsx)(oe.Z,{placeholder:"\u8BF7\u9009\u62E9",disabled:!0,value:u,style:{width:"98%"},options:((j=c.dataSource)===null||j===void 0?void 0:j.map(function(y){return{label:y.label,value:y.value}}))||[]},"".concat(d,"-").concat(o))}else{var C;return(0,e.jsx)(le,{value:u,type:(C=c.attribute)===null||C===void 0?void 0:C.dataType,schema:c,readOnly:!0,onBlur:function(A){},onChange:function(A){}},"".concat(d,"-").concat(o))}}}});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(We.Z,{columns:g,dataSource:v,pagination:!1,size:"small",rowKey:"k"})})};(0,R.RM)("MatrixAuto",lt,"antd"),(0,R.uF)("MatrixAuto",st,"antd");var Re=s(93224),ze=s(79521),ot=["title","rowId"],ut=["title","rowId"];function un(t){var n=t.columns,i=t.data,v=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,ze.useTable)({columns:n,data:i,defaultColumn:v},ze.useBlockLayout),f=r.getTableProps,g=r.getTableBodyProps,c=r.headerGroups,l=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,P.Z)((0,P.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(a){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},a.getHeaderGroupProps()),{},{className:"tr",children:a.headers.map(function(u){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},g()),{},{children:l.map(function(a){return m(a),(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},a.getRowProps()),{},{className:"tr",children:a.cells.map(function(u){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function dt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f,c=n.row,l=c===void 0?[]:c,m=(0,Z.useMemo)(function(){var u,h=g.map(function(d){var x;return{Header:(0,e.jsx)(B.Z,{html:d.title}),width:(x=d.attribute)===null||x===void 0?void 0:x.width,accessor:d.id,Cell:function(j){var C,y=j.value,A=j.row,E=j.data,b=(C=d.attribute)===null||C===void 0?void 0:C.dataType;return(0,e.jsxs)("div",{onClick:function(z){var F=!y,S={};E.forEach(function(D,w){var Q=D.title,O=D.rowId,I=(0,Re.Z)(D,ot);A.index===w&&(F?I[d.id]=!0:delete I[d.id]),S[O]=I}),i(S)},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(we.Z,{checked:!!y}),b?(0,e.jsx)(le,{type:b,style:{width:120,marginLeft:5},value:y===!0?"":y,onChange:function(z){var F={};E.forEach(function(S,D){var w=S.title,Q=S.rowId,O=(0,Re.Z)(S,ut);A.index===D&&(O[d.id]=z),F[Q]=O}),i(F)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return h.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),h},[]),a=l.map(function(u,h){var d=u.id,x=r[d]||{};return(0,P.Z)({title:(0,e.jsx)(B.Z,{html:u.title}),rowId:d},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(un,{columns:m,data:a})})}var ct=function(n){var i=n.schema,v=n.value,r=v===void 0?{}:v,f=i.children,g=f===void 0?[]:f,c=i.row,l=c===void 0?[]:c,m=(0,Z.useMemo)(function(){var u,h=g.map(function(d){var x;return{Header:(0,e.jsx)(B.Z,{html:d.title}),width:(x=d.attribute)===null||x===void 0?void 0:x.width,accessor:d.id,Cell:function(j){var C=j.value,y=j.row,A=j.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(we.Z,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return h.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=i.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),h},[]),a=l.map(function(u,h){var d=u.id,x=r[d]||{};return(0,P.Z)({title:(0,e.jsx)(B.Z,{html:u.title}),rowId:d},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(un,{columns:m,data:a})})};(0,R.RM)("MatrixCheckbox",dt,"antd"),(0,R.uF)("MatrixCheckbox",ct,"antd");var vt=["rid","title"];function dn(t){var n,i,v=t.schema,r=t.onChange,f=t.value,g=f===void 0?{}:f,c=t.onBlur,l=v.children,m=l===void 0?[]:l,a=v.row,u=a===void 0?[]:a,h=(0,L.cI)(),d=m.map(function(o){var j;return{title:(0,e.jsx)(B.Z,{html:o.title}),width:(j=o.attribute)===null||j===void 0?void 0:j.width,dataIndex:o.id,render:function(y,A){var E,b,p=A.rid,z=A.title,F=(0,Re.Z)(A,vt);if(!h.editable){if(o.dataSource){var S;return(S=o.dataSource.find(function(D){return D.value===y}))===null||S===void 0?void 0:S.label}return(0,e.jsx)("span",{children:y})}return(0,e.jsx)(le,{type:(E=o.attribute)===null||E===void 0?void 0:E.dataType,readOnly:!h.editable,dateTimeFormat:(b=o.attribute)===null||b===void 0?void 0:b.dateTimeFormat,value:y,schema:o,dataId:"".concat(p,"-").concat(o.id),onBlur:function(w){F[o.id]=w,c((0,P.Z)((0,P.Z)({},g),{},(0,ae.Z)({},p,F)))},onChange:function(w){F[o.id]=w,r((0,P.Z)((0,P.Z)({},g),{},(0,ae.Z)({},p,F)))}},"".concat(p,"-").concat(o.id))}}});d.splice(0,0,{title:(0,e.jsx)(B.Z,{html:(n=v.attribute)===null||n===void 0?void 0:n.cornerText}),width:((i=v.attribute)===null||i===void 0?void 0:i.width)||150,dataIndex:"title",render:function(j){return(0,e.jsx)("div",{style:{whiteSpace:"normal"},children:j})}});var x=u.map(function(o){var j=o.id,C=g[j]||{};return(0,P.Z)({rid:o.id,title:(0,e.jsx)(B.Z,{html:o.title})},C)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(We.Z,{bordered:!0,columns:d,dataSource:x,size:"small",pagination:!1,style:{width:"100%"},rowKey:"rid"})})}(0,R.RM)("MatrixFillBlank",dn,"antd"),(0,R.uF)("MatrixFillBlank",dn,"antd");var ht=["title","rowId"],ft=["title","rowId"];function cn(t){var n=t.columns,i=t.data,v=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,ze.useTable)({columns:n,data:i,defaultColumn:v},ze.useBlockLayout),f=r.getTableProps,g=r.getTableBodyProps,c=r.headerGroups,l=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,P.Z)((0,P.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(a){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},a.getHeaderGroupProps()),{},{className:"tr",children:a.headers.map(function(u){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},g()),{},{children:l.map(function(a){return m(a),(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},a.getRowProps()),{},{className:"tr",children:a.cells.map(function(u){return(0,e.jsx)("div",(0,P.Z)((0,P.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function mt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f,c=n.row,l=c===void 0?[]:c,m=(0,Z.useMemo)(function(){var h;return((h=n.children)===null||h===void 0?void 0:h.filter(function(d){var x;return(x=d.attribute)===null||x===void 0?void 0:x.exclusiveFillBlankInMatrix}).map(function(d){return d.id}))||[]},[n]),a=(0,Z.useMemo)(function(){var h,d,x=g.map(function(o){var j;return{Header:(0,e.jsx)(B.Z,{html:o.title}),width:(j=o.attribute)===null||j===void 0?void 0:j.width,accessor:o.id,Cell:function(y){var A,E,b=y.value,p=y.row,z=y.data,F=(A=o.attribute)===null||A===void 0?void 0:A.exclusiveFillBlankInMatrix,S=(E=o.attribute)===null||E===void 0?void 0:E.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!F){var w={};z.forEach(function(Q,O){var I=Q.title,ee=Q.rowId,G=(0,Re.Z)(Q,ht);p.index===O?(w[ee]={},m.forEach(function(X){w[ee][X]=G[X]}),w[ee][o.id]=!0):w[ee]=G}),i(w)}},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[!F&&(0,e.jsx)(De.ZP,{checked:!!b}),S?(0,e.jsx)(le,{type:S,style:{width:120},value:b===!0?"":b,onChange:function(w){var Q={};z.forEach(function(O,I){var ee=O.title,G=O.rowId,X=(0,Re.Z)(O,ft);p.index===I?(F?Q[G]=X:(Q[G]={},m.forEach(function(ne){Q[G][ne]=X[ne]})),Q[G][o.id]=w):Q[G]=X}),i(Q)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return x.splice(0,0,{Header:(0,e.jsx)(B.Z,{html:(h=n.attribute)===null||h===void 0?void 0:h.cornerText}),width:((d=n.attribute)===null||d===void 0?void 0:d.width)||150,accessor:"title"}),x},[]),u=l.map(function(h,d){var x=h.id,o=r[x]||{};return(0,P.Z)({title:(0,e.jsx)(B.Z,{html:h.title}),rowId:x},o)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(cn,{columns:a,data:u})})}var gt=function(n){var i=n.schema,v=n.value,r=v===void 0?{}:v,f=i.children,g=f===void 0?[]:f,c=i.row,l=c===void 0?[]:c,m=(0,Z.useMemo)(function(){var u,h,d=g.map(function(x){var o;return{Header:(0,e.jsx)(B.Z,{html:x.title}),width:(o=x.attribute)===null||o===void 0?void 0:o.width,accessor:x.id,Cell:function(C){var y=C.value,A=C.row,E=C.data;return y?(0,e.jsx)("div",{children:(0,e.jsx)(De.ZP,{checked:!!y,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return d.splice(0,0,{Header:(0,e.jsx)(B.Z,{html:(u=i.attribute)===null||u===void 0?void 0:u.cornerText}),width:((h=i.attribute)===null||h===void 0?void 0:h.width)||150,accessor:"title"}),d},[]),a=l.map(function(u,h){var d=u.id,x=r[d]||{};return(0,P.Z)({title:(0,e.jsx)(B.Z,{html:u.title}),rowId:d},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(cn,{columns:m,data:a})})};(0,R.RM)("MatrixRadio",mt,"antd"),(0,R.uF)("MatrixRadio",gt,"antd");function xt(t){for(var n=[],i=2;i<t+2;i++)n.push(i/(t+2));return n}function jt(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=[],r=t;r<=n;r++)v.push(r);return i&&v.reverse(),v}function Ct(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f,c=g[0].id,l=(0,Z.useState)(function(){return r[c]||-1}),m=(0,$.Z)(l,2),a=m[0],u=m[1];function h(x){i((0,ae.Z)({},c,x))}(0,Z.useEffect)(function(){Object.keys(r).length>0&&u(r[c])},[r,c]);var d=function(o){var j=r[o.id],C=o.attribute||{},y=C.scope,A=y===void 0?"[0,10]":y,E=C.npsInvertSort,b=C.npsStart,p=b===void 0?"\u4E0D\u53EF\u80FD":b,z=C.npsEnd,F=z===void 0?"\u6781\u6709\u53EF\u80FD":z,S=A.replace("[","").replace("]","").split(","),D=(0,$.Z)(S,2),w=D[0],Q=D[1],O=xt(a||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){u(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:jt(parseInt(w),parseInt(Q),E).map(function(I){var ee={background:"#2672ff",opacity:O[I]};return(0,e.jsx)("div",{className:"nps-item",style:a>=I?ee:void 0,onMouseOver:function(){u(I)},onClick:function(){return h(I)},children:I},I)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:E?F:p}),(0,e.jsx)("div",{children:E?p:F})]})]},o.id)};return(0,e.jsx)(ve.Z,{children:g.map(function(x){return d(x)})})}(0,R.RM)("Nps",Ct,"antd");var yt=De.ZP.Group;function vn(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=t.onBlur,g=n.children,c=n.attribute,l=24/((c==null?void 0:c.columns)||1),m=(0,N.AK)("-body-question"),a=!!(c!=null&&c.statEnabled),u=(0,N.Rk)(),h=u.hiddenOption[n.id]||[],d=(0,N.Al)();function x(C){var y,A=C.target.value,E=(y=n.children)===null||y===void 0?void 0:y.find(function(p){return p.id===A});if(E){var b=E.id;i((0,ae.Z)({},C.target.value,r[b]||!0))}}(0,Z.useEffect)(function(){var C=Object.keys(r)[0];h.includes(C)&&i(void 0)},[h]);function o(C,y){i((0,ae.Z)({},C,y||!0),C)}function j(C,y){f((0,ae.Z)({},C,y||!0),C)}return(0,Z.useEffect)(function(){var C;(C=n.children)===null||C===void 0||C.forEach(function(y){var A,E=y.id,b=y.attribute,p=b==null?void 0:b.dataType;(A=y.attribute)!==null&&A!==void 0&&A.defaultChecked&&Object.keys(r).length===0&&i((0,ae.Z)({},E,p?r[E]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(yt,{onChange:x,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(ve.Z,{children:g==null?void 0:g.filter(function(C){return!h.includes(C.id)}).map(function(C){var y,A,E,b,p=C.id,z=(y=C.attribute)===null||y===void 0?void 0:y.dataType,F=(A=C.attribute)===null||A===void 0?void 0:A.suffix,S=(E=C.attribute)===null||E===void 0?void 0:E.readOnly,D=(b=C.attribute)===null||b===void 0?void 0:b.quota,w=!1;if(D!==void 0){var Q,O=d.statistics,I=O==null?void 0:O.questionStatistics[n.id],ee=(I==null||(Q=I.optionStatistics.find(function(X){return X.optionId===p}))===null||Q===void 0?void 0:Q.count)||0,G=D-ee;G<=0&&(w=!0)}return(0,e.jsxs)(de.Z,{span:l,className:m+"-option","data-id":p,children:[(0,e.jsx)(pn,{qId:n.id,schema:C,disabled:w,value:r[p],onChange:function(ne){return o(p,ne)},onBlur:function(ne){return j(p,ne)}}),(0,e.jsx)(Ge,{statEnabled:a,quota:D,checked:!!r[p],optionId:p,questionId:n.id,checkedCount:Object.keys(r).length}),z&&(0,e.jsx)(le,{value:r[p]===!0?"":r[p],type:z,schema:C,readOnly:S,style:{maxWidth:200},onChange:function(ne){return o(p,ne)},onBlur:function(ne){return j(p,ne)},suffix:F&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(B.Z,{html:F})})})]},p)})})})})}(0,R.RM)("Radio",(0,L.Pi)(vn),"antd"),(0,R.RM)("Judge",(0,L.Pi)(vn),"antd");function At(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(B.Z,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}var Et=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(B.Z,{html:"".concat(n.replaceTitle||n.schema.title||"")})})};(0,R.RM)("Remark",At,"antd"),(0,R.uF)("Remark",Et,"antd");var ua=s(96433),Je=s(2864),hn=s(41687),bt=s(46870),fn=s(18613),Zt=s(57206),pt={1:(0,e.jsx)(hn.Z,{}),2:(0,e.jsx)(hn.Z,{}),3:(0,e.jsx)(bt.Z,{}),4:(0,e.jsx)(fn.Z,{}),5:(0,e.jsx)(fn.Z,{})};function Bt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f;function c(m,a){i((0,ae.Z)({},m,a))}var l=function(a){var u=a.attribute||{},h=a.id,d=u.scope,x=d===void 0?"[0,5]":d,o=u.scoreStyle,j=x.replace("[","").replace("]","").split(","),C=(0,$.Z)(j,2),y=C[0],A=C[1];return o==="heart"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(Zt.Z,{}),style:{color:"#ea7463"},value:r[h],count:parseInt(A),onChange:function(b){return c(h,b)}},h):o==="smile"?(0,e.jsx)(Je.Z,{defaultValue:parseInt(y),character:function(b){var p=b.index;return pt[p+1]},count:parseInt(A),onChange:function(b){return c(h,b)},value:r[h]},h):(0,e.jsx)(Je.Z,{defaultValue:parseInt(y),count:parseInt(A),value:r[h],onChange:function(b){return c(h,b)}},h)};return(0,e.jsx)(ve.Z,{children:g.map(function(m){return l(m)})})}(0,R.RM)("Score",Bt,"antd");function St(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f;function c(l){var m,a=(m=n.children)===null||m===void 0?void 0:m.find(function(u){return u.id===l});a&&i((0,ae.Z)({},l,!0))}return(0,Z.useEffect)(function(){var l;(l=n.children)===null||l===void 0||l.forEach(function(m){var a,u=m.id;(a=m.attribute)!==null&&a!==void 0&&a.defaultChecked&&Object.keys(r).length===0&&i((0,ae.Z)({},u,!0))})},[]),(0,e.jsx)(ve.Z,{children:(0,e.jsx)(de.Z,{span:12,children:(0,e.jsx)(oe.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){i(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(m,a){return(a==null?void 0:a.label).toLowerCase().indexOf(m.toLowerCase())!==-1},onChange:c,style:{width:260},options:g.map(function(l){return{label:l.title,value:l.id}})})})})}(0,R.RM)("Select",St,"antd");var da=s(34669),It=s(82833);function Nt(t){var n=t.schema,i=t.onChange,v=n.children,r=(0,N.Al)(),f=(0,Z.useState)(0),g=(0,$.Z)(f,2),c=g[0],l=g[1];function m(a,u){var h="signature-".concat(u,"-").concat((0,k.kb)(6),".png");if(!r.onUpload){i((0,ae.Z)({},u,[h]));return}fetch(a).then(function(d){return d.blob()}).then(function(d){var x=new File([d],h,{type:"image/png"});r.onUpload({file:x,questionId:n.id,projectId:r.schema.id},function(o){l(o.loaded/o.total*100)}).then(function(o){o.success&&o.data.id&&i((0,ae.Z)({},u,[o.data.id]))})})}return(0,e.jsx)("div",{children:v==null?void 0:v.map(function(a){var u=a.id,h=a.title;return(0,e.jsxs)(ve.Z,{gutter:[10,0],"data-id":u,children:[h&&(0,e.jsx)(de.Z,{span:24},a.id),(0,e.jsxs)(de.Z,{span:24,children:[(0,e.jsx)(Ae,{onChange:function(x){return m(x,u)}}),c>0&&c!==100&&(0,e.jsx)(It.Z,{percent:c,size:"small",showInfo:!1})]})]},u)})})}var Mt=function(n){var i=n.value,v;return i&&(v=Object.values(i)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:v&&(0,e.jsx)("img",{src:"/api/file?id=".concat(v)})})};(0,R.RM)("Signature",Nt,"antd"),(0,R.uF)("Signature",Mt,"antd");var Ye=s(27049);function Ft(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(Ye.Z,{plain:!0})})}var Pt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(Ye.Z,{plain:!0})})};(0,R.RM)("SplitLine",Ft,"antd"),(0,R.uF)("SplitLine",Pt,"antd");function Rt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=(0,N.AK)("-body-question");function c(l,m){r[l]=m,m===""&&delete r[l],i((0,P.Z)({},r))}return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(l){var m=l.id,a=l.attribute,u=l.title,h=(0,k.Ck)(a==null?void 0:a.autoSize,[2,4]);return(0,e.jsxs)(ve.Z,{style:{marginBottom:10},"data-id":m,children:[u&&(0,e.jsx)(de.Z,{className:g+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:g+"-option-title",children:l.title})},l.id),(0,e.jsx)(de.Z,{span:12,children:(0,e.jsx)(se.Z.TextArea,{autoSize:{minRows:h[1],maxRows:h[2]},value:r[m]||"",onChange:function(x){return c(m,x.target.value)}})})]},m)})})}(0,R.RM)("Textarea",Rt,"antd");var wt=s(43347),Ot=Qe.Z.Dragger;function Dt(t){var n=t.schema,i=t.onChange,v=t.value,r=t.readOnly,f=n.children,g=(0,N.Al)(),c=(0,Z.useState)(),l=(0,$.Z)(c,2),m=l[0],a=l[1];(0,Z.useEffect)(function(){var d=n.children[0].id,x=v&&v[d]||[];m==null&&x.length>0&&Ne.hi.loadFiles({ids:x}).then(function(o){a(o==null?void 0:o.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[v]);var u=function(){var d=(0,ln.Z)((0,Le.Z)().mark(function x(o){var j,C,y,A;return(0,Le.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:j=o.onSuccess,C=o.onError,y=o.file,A=o.onProgress,g.onUpload&&g.onUpload({file:y,questionId:n.id,projectId:g.schema.id},function(p){A&&A({percent:p.loaded/p.total*100})}).then(function(p){if(p.success&&j&&j(p.data),!p.success&&C){var z=new Error("Some error");C({event:z})}});case 2:case"end":return b.stop()}},x)}));return function(o){return d.apply(this,arguments)}}(),h=function(x,o){if(a(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(C){return C.status!=="done"})){var j=x.fileList.filter(function(C){return C.status==="done"}).map(function(C){var y;return((y=C.response)===null||y===void 0?void 0:y.id)||C.uid});j.length===0?i(void 0):i((0,ae.Z)({},o,j))}};return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(d){var x=d.id,o=d.attribute,j=[];if(o){var C=o.maxFileCount,y=o.maxFileSize,A=o.fileAccept;C&&j.push("\u6700\u591A\u4E0A\u4F20".concat(C,"\u4E2A")),y&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),A&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(A))}return(0,e.jsxs)(Ot,{multiple:!0,disabled:r,maxCount:(o==null?void 0:o.maxFileCount)||20,accept:o==null?void 0:o.fileAccept,beforeUpload:function(b){return o!=null&&o.maxFileSize&&b.size>o.maxFileSize*1024*1024?(He.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(o.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Qe.Z.LIST_IGNORE):!0},customRequest:u,onChange:function(b){return h(b,x)},fileList:m,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(wt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}(0,R.RM)("Upload",Dt,"antd");var Tt=s(55686),Qt=oe.Z.Option;function Lt(t){var n=t.schema,i=t.onChange,v=t.value,r=v===void 0?{}:v,f=n.children,g=f===void 0?[]:f,c=g[0].id,l=(0,Z.useState)([]),m=(0,$.Z)(l,2),a=m[0],u=m[1];function h(o){c&&i((0,ae.Z)({},c,o))}var d=(0,Ne.zE)(function(o){Ne.hi.selectUser({name:o,selected:r[c]||[]}).then(function(j){j.success&&u(j.data)})},5),x=function(j){h(j?a.map(function(C){return C.userId}):void 0)};return(0,Z.useEffect)(function(){var o;d(""),(o=n.children)===null||o===void 0||o.forEach(function(j){var C,y=j.id;(C=j.attribute)!==null&&C!==void 0&&C.defaultChecked&&Object.keys(r).length===0&&i((0,ae.Z)({},y,!0))})},[]),(0,e.jsx)(ve.Z,{children:(0,e.jsx)(de.Z,{span:24,children:(0,e.jsx)(oe.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){i(void 0)},style:{width:"100%"},value:r[c]||[],onSearch:d,showSearch:!0,onChange:h,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(we.Z,{onChange:function(y){x(y.target.checked)},children:"\u5168\u9009"})})]})},children:a.map(function(o){return(0,e.jsx)(Qt,{value:o.userId,label:o.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Tt.Z,{user:o,size:20})}),o.name," ",o.deptName&&"(".concat(o.deptName,")")]})},o.userId)})})})})}var kt=function(n){var i=n.schema,v=n.value,r=v===void 0?{}:v,f=i.children,g=f===void 0?[]:f,c=g[0].id,l=(0,Z.useState)([]),m=(0,$.Z)(l,2),a=m[0],u=m[1];return(0,Z.useEffect)(function(){Ne.hi.selectUser({selected:r[c]||[],name:"^_^"}).then(function(h){h.success&&u(h.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(je.Z,{children:a.map(function(h){return(0,e.jsx)(sn.Z,{color:"blue",children:h.name},h.userId)})})})};(0,R.RM)("User",Lt,"antd"),(0,R.uF)("User",kt,"antd");var zt=s(73328),$t=function(n){var i=(0,Z.useRef)(null),v=(0,Z.useState)(!1),r=(0,$.Z)(v,2),f=r[0],g=r[1];return(0,zt.Z)(i,function(){g(!1)}),(0,e.jsx)("div",{className:Ie()("preview",{active:f}),ref:i,onClick:function(){g(!0)},children:(0,e.jsx)(B.Z,{html:Object.values(n.value||{})[0]})})};(0,k.uF)("RichText",$t,"antd");var Ut=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Kt=Ut;(0,k.RM)("RichText",(0,Z.lazy)(function(){return Promise.all([s.e(4257),s.e(2684),s.e(1031),s.e(5761),s.e(8851),s.e(1912)]).then(s.bind(s,27321))}),"antd"),(0,k.uF)("Upload",(0,Z.lazy)(function(){return Promise.all([s.e(4502),s.e(3640)]).then(s.bind(s,43640))}),"antd")},55686:function(Ee,ie,s){"use strict";var $=s(11849),k=s(94233),B=s(51890),L=s(93224),Z=s(89366),N=s(85893),R=["user"],e=function(U){var H=U.user,q=(0,L.Z)(U,R);return!H||!H.avatar?(0,N.jsx)(B.C,(0,$.Z)({icon:(0,N.jsx)(Z.Z,{}),size:q.size||"small"},q)):(0,N.jsx)(B.C,(0,$.Z)({src:"/api/public/preview/".concat(H.avatar),size:q.size||"small"},q))};ie.Z=e},81643:function(Ee,ie,s){"use strict";s.d(ie,{Z:function(){return $}});var $=function(B){if(!B)return null;var L=typeof B=="function";return L?B():B}},55241:function(Ee,ie,s){"use strict";var $=s(22122),k=s(67294),B=s(53124),L=s(94199),Z=s(81643),N=s(33603),R=function(U,H){var q={};for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&H.indexOf(K)<0&&(q[K]=U[K]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function")for(var W=0,K=Object.getOwnPropertySymbols(U);W<K.length;W++)H.indexOf(K[W])<0&&Object.prototype.propertyIsEnumerable.call(U,K[W])&&(q[K[W]]=U[K[W]]);return q},e=function(H){var q=H.title,K=H.content,W=H.prefixCls;return!q&&!K?null:k.createElement(k.Fragment,null,q&&k.createElement("div",{className:"".concat(W,"-title")},(0,Z.Z)(q)),k.createElement("div",{className:"".concat(W,"-inner-content")},(0,Z.Z)(K)))},te=k.forwardRef(function(U,H){var q=U.prefixCls,K=U.title,W=U.content,he=U._overlay,fe=U.placement,M=fe===void 0?"top":fe,xe=U.trigger,se=xe===void 0?"hover":xe,P=U.mouseEnterDelay,pe=P===void 0?.1:P,be=U.mouseLeaveDelay,Be=be===void 0?.1:be,me=U.overlayStyle,Ze=me===void 0?{}:me,oe=R(U,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),ge=k.useContext(B.E_),ce=ge.getPrefixCls,Ce=ce("popover",q),Me=ce();return k.createElement(L.Z,(0,$.Z)({placement:M,trigger:se,mouseEnterDelay:pe,mouseLeaveDelay:Be,overlayStyle:Ze},oe,{prefixCls:Ce,ref:H,overlay:he||k.createElement(e,{prefixCls:Ce,title:K,content:W}),transitionName:(0,N.mL)(Me,"zoom-big",oe.transitionName)}))});ie.Z=te},20136:function(Ee,ie,s){"use strict";var $=s(38663),k=s.n($),B=s(31930),L=s.n(B)},84164:function(Ee,ie,s){"use strict";s.d(ie,{Z:function(){return B}});var $=s(90484),k=s(67294);function B(L,Z,N){var R=k.useRef({});function e(te){if(!R.current||R.current.data!==L||R.current.childrenColumnName!==Z||R.current.getRowKey!==N){let H=function(q){q.forEach(function(K,W){var he=N(K,W);U.set(he,K),K&&(0,$.Z)(K)==="object"&&Z in K&&H(K[Z]||[])})};var U=new Map;H(L),R.current={data:L,childrenColumnName:Z,kvMap:U,getRowKey:N}}return R.current.kvMap.get(te)}return[e]}},39002:function(Ee,ie,s){"use strict";var $=s(38663),k=s.n($),B=s(92801),L=s.n(B),Z=s(14965)}}]);
